<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>📜 다중지능 탐험: 고대의 부름</title>
<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline' https://cdn.pixabay.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; media-src https://cdn.pixabay.com;">
<link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Cinzel:wght@700&display=swap" rel="stylesheet">
<style>
:root{ --brown-text: #4a3a2a; --gold: #c89a4b; }
*{box-sizing:border-box}

body{
    margin:0;
    font-family: 'Gowun Dodum', serif;
    background: url('https://cdn.pixabay.com/photo/2020/02/05/17/23/ancient-4821613_1280.jpg') no-repeat center center/cover;
    background-color: rgba(0, 0, 0, 0.65); /* 이미지 위에 어둡게 오버레이 */
    background-blend-mode: multiply; /* 블렌드 모드 추가 */
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 20px;
}

.wrap{ width:100%; max-width:1200px; }

.header{
    text-align: center;
    margin-bottom: 20px;
    animation: fadeInDown 1s ease-out;
}
.title{
    font-family: 'Cinzel', serif;
    font-size: 3rem;
    color: var(--gold);
    text-shadow: 2px 2px 8px rgba(0,0,0,0.8);
}
.subtitle{ font-family: 'Gowun Dodum'; opacity:0.9; font-size: 1.2rem; color: #f0f0f0; }

.layout{ display:flex; gap:20px; }
.left, .right{ transition: all 0.5s ease-out; }

.left{
    width:360px;
    animation: fadeInLeft 1s ease-out;
    position: relative;
    z-index: 10;
}
.right{
    flex:1;
    animation: fadeInRight 1s ease-out;
    position: relative;
    z-index: 5;
}


.card{
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(8px);
    border-radius:16px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    border: 1px solid rgba(255,215,102,0.15);
}

.char-row{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
.char{
    padding:10px;
    border-radius:10px;
    background:rgba(0,0,0,0.3);
    text-align:center;
    cursor:pointer;
    border: 2px solid transparent;
    transition: all 0.3s ease;
}
.char:hover{ transform:translateY(-5px); background:rgba(0,0,0,0.5); border-color: var(--gold); }
.char .emoji{ font-size:44px; filter: drop-shadow(0 0 5px rgba(0,0,0,0.5)); }
.char .name{ color:var(--gold); font-weight:bold; }
.char.selected{
    background:rgba(200,154,75,0.3);
    border-color: var(--gold);
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 0 15px rgba(200, 154, 75, 0.5);
}

label{ display:block; color:var(--gold); font-weight:700; margin-bottom:6px; }
input[type=text]{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:1px solid rgba(255,215,102,0.2);
    background:rgba(0,0,0,0.3);
    color:#fff;
    margin-bottom:10px;
    font-family: 'Gowun Dodum', serif;
}
.btn{
    display:inline-flex;
    gap:8px;
    align-items:center;
    justify-content:center;
    padding:12px 16px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    background:linear-gradient(145deg, #b38645, #835e2c);
    color:#fff;
    font-weight:bold;
    box-shadow: 0 5px 15px rgba(0,0,0,0.4);
    width: 100%;
    font-family: 'Gowun Dodum', serif;
    font-size: 1rem;
    transition: all 0.2s ease;
}
.btn:hover {
    transform: scale(1.02);
}
.btn:disabled {
    background: #555;
    cursor: not-allowed;
    opacity: 0.6;
    transform: scale(1);
    box-shadow: none;
}

#game-card {
    background: linear-gradient(150deg, #f5eadd 0%, #e8d9c2 100%);
    box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
    color: var(--brown-text);
    padding: 50px 60px;
    min-height: 550px;
    position: relative;
    border-radius: 8px;
}
.quest-header { text-align: center; margin-bottom: 20px; }
.quest-header h3 { font-family: 'Cinzel', serif; color: #6a4a2a; margin: 0; font-size: 1.5rem;}
.quest-text { font-size:1.2rem; line-height:1.8; min-height: 100px; }
.options{ display:grid; grid-template-columns:1fr; gap:12px; margin-top:20px; }
.option{
    padding:12px;
    border-radius:10px;
    background:rgba(189, 168, 133, 0.3);
    cursor:pointer;
    border:1px solid rgba(112, 83, 48, 0.3);
    transition: all .2s ease;
}
.option:hover{ transform: scale(1.03); background:rgba(189, 168, 133, 0.5); border-color: var(--brown-text); }
.option .label{ font-weight:bold; }

.stats-grid{ display:grid; grid-template-columns:repeat(4,1fr); gap:8px; margin-top:12px; color: #fff;}
.stat{ background:rgba(0,0,0,0.3); padding:8px; border-radius:8px; text-align:center; }
.bar{ height:10px; background:rgba(255,255,255,0.1); border-radius:6px; margin-top:8px; overflow:hidden; }
.bar-inner{ height:100%; background:linear-gradient(90deg,var(--gold),#e6b873); width:0%; transition:width .6s; }

.result-content { color: var(--brown-text); text-align: center; }
.result-content h3 { font-family: 'Cinzel', serif; color: #6a4a2a; }

@keyframes fadeInDown { 0% { opacity:0; transform: translateY(-30px); } 100% { opacity:1; transform: translateY(0); } }
@keyframes fadeInLeft { 0% { opacity:0; transform: translateX(-50px); } 100% { opacity:1; transform: translateX(0); } }
@keyframes fadeInRight { 0% { opacity:0; transform: translateX(50px); } 100% { opacity:1; transform: translateX(0); } }

@media(max-width:900px){ .layout{flex-direction:column} .left{width:100%} }
</style>
</head>
<body>

<audio id="bgm" src="https://cdn.pixabay.com/audio/2022/08/04/audio_2dde649a33.mp3" loop></audio>
<audio id="sfx-turn" src="https://cdn.pixabay.com/audio/2022/03/15/audio_731c045b61.mp3"></audio>

<div class="wrap">
  <div class="header">
    <div class="title">Ancient Calling</div>
    <div class="subtitle">나의 다중지능을 찾아 떠나는 모험</div>
  </div>

  <div class="layout">
    <div class="left">
      <div class="card">
        <label>모험가 이름</label>
        <input id="input-name" type="text" placeholder="예: 김민준" />
        <label>소속 (반)</label>
        <input id="input-class" type="text" placeholder="예: 1학년 3반" />
        <label>여정을 함께할 동료</label>
        <div id="char-row" class="char-row">
          <div class="char" data-id="prince"><div class="emoji">🤴</div><div class="name">용감한 왕자</div></div>
          <div class="char" data-id="princess"><div class="emoji">👸</div><div class="name">지혜로운 공주</div></div>
          <div class="char" data-id="warrior"><div class="emoji">⚔️</div><div class="name">강인한 전사</div></div>
          <div class="char" data-id="wizard"><div class="emoji">🔮</div><div class="name">신비한 마법사</div></div>
        </div>
        <div style="margin-top:20px;">
          <button id="btn-start" class="btn" disabled>▶ 모험 시작하기</button>
        </div>
      </div>

      <div id="stats-panel" class="card" style="margin-top:12px; display:none;">
         <div id="stats" class="stats-grid"></div>
      </div>
    </div>

    <div class="right">
      <div id="game-card" class="card">
        <div id="pre-game">
          <div style="text-align:center; padding-top: 80px;">
            <h3 style="font-family:'Cinzel', serif; color: var(--brown-text);">📜 모험의 서막</h3>
            <p style="font-size: 1.1rem; line-height: 1.8;">이름과 소속을 적고, 여정을 함께할 동료를 선택하세요.<br>당신의 선택이 모여 미래의 길을 밝혀줄 것입니다.<br>이제, 고대의 부름에 응답할 시간입니다.</p>
          </div>
        </div>

        <div id="game-area" style="display:none">
          <div class="quest-header">
            <h3 id="quest-title"></h3>
          </div>
          <div id="quest-text" class="quest-text"></div>
          <div id="options" class="options"></div>
        </div>
        
        <div id="result-area" style="display:none; padding-top: 50px;">
          <div class="result-content" id="result-content"></div>
          <button id="btn-restart" class="btn" style="max-width:300px; margin: 20px auto 0;">🔄 새로운 모험 시작하기</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// DOM 요소 가져오기
const el = id => document.getElementById(id);

// 게임 변수
let player = {
    name: '',
    class: '',
    companion: null
};
let scores = {
    linguistic: 0,
    logical: 0,
    spatial: 0,
    bodily: 0,
    musical: 0,
    interpersonal: 0,
    intrapersonal: 0,
    naturalist: 0
};
let currentQuestIndex = 0;
let questLine = null;

// 지능 이름 매핑 (코드 전체에서 한 번만 정의)
const mapNames = {
    linguistic: '언어 지능',
    logical: '논리-수학 지능',
    spatial: '공간 지능',
    bodily: '신체-운동 지능',
    musical: '음악 지능',
    interpersonal: '대인관계 지능',
    intrapersonal: '자기이해 지능',
    naturalist: '자연친화 지능'
};
const mapNamesForStats = {
    linguistic: '언어',
    logical: '논리',
    spatial: '공간',
    bodily: '신체',
    musical: '음악',
    interpersonal: '대인관계',
    intrapersonal: '자기이해',
    naturalist: '자연'
};

// 사운드 객체
const sounds = {
    bgm: document.getElementById('bgm'),
    turn: document.getElementById('sfx-turn'),
};
sounds.bgm.volume = 0.2; // BGM 볼륨 조절

document.body.addEventListener('click', () => {
    if (sounds.bgm.paused) {
        sounds.bgm.play().catch(e => console.log("BGM 자동재생이 차단되었습니다."));
    }
}, { once: true });


/* ====== 퀘스트 데이터 (전체 80개) ====== */
function q(title, text, a, b, c, d){ return { title, text, options:[a,b,c,d] }; }
function opt(text, effects){ return {t:text, e:effects}; }

const quests = {
  // Prince Questline (20 Quests)
  prince: [
    q("왕의 서신", "먼지 쌓인 서고에서 아버지의 흔적이 담긴 낡은 편지를 발견했다. '진정한 왕의 자격은 왕관이 아닌, 백성을 비추는 빛에 있나니. 그 빛을 따라가거라.' 이 수수께끼 같은 유언의 실마리는 어디서부터 찾아야 할까?",
      opt('📜 편지에 쓰인 단어들의 상징적 의미를 파고들어 분석한다.',{linguistic:14}),
      opt('🗺️ 편지에 남은 희미한 지도의 흔적을 따라 직접 현장으로 향한다.',{bodily:12,spatial:6}),
      opt('👥 편지를 마지막으로 만졌을 법한 왕궁의 오랜 신하를 찾아가 대화한다.',{interpersonal:12,logical:6}),
      opt('🌿 편지지에서 희미하게 나는 풀 향기를 단서로, 특정 지역의 식생를 조사한다.',{naturalist:8,spatial:6})
    ),
    q("시장의 현자", "시장에 도착하자, 한 노인이 당신을 알아보고 다가와 속삭였다. '왕께서 찾던 빛은 북쪽 숲의 심장, 가장 오래된 고목에서 나온다네.' 그의 말을 어떻게 받아들여야 할까?",
      opt('💬 노인의 이야기에 진심으로 감사하며, 숲에 대한 다른 전설은 없는지 묻는다.',{interpersonal:12,linguistic:6}),
      opt('🧭 즉시 숲으로 달려가기보다, 먼저 도서관에서 북쪽 숲에 대한 자료를 찾아본다.',{logical:12,linguistic:6}),
      opt('🤝 탐험대를 꾸려 함께 숲으로 떠난다. 여러 눈으로 보는 것이 더 정확할 것이다.',{interpersonal:12,bodily:6}),
      opt('🌲 그의 말이 사실인지 확인하기 위해, 즉시 혼자서 숲의 고목을 찾아 나선다.',{bodily:12,naturalist:6})
    ),
    q("별자리石", "숲길을 걷다, 이끼 낀 바위 위에 고대의 별자리와 닮은 문양이 새겨진 돌을 발견했다. 이 돌은 무엇을 의미할까?",
      opt('✍️ 문양을 양피지에 똑같이 베껴 그리고, 각 상징의 의미를 추론해본다.',{linguistic:12,spatial:4}),
      opt('⭐ 밤하늘의 실제 별자리와 돌의 문양을 대조하여 방향을 찾는다.',{spatial:14,naturalist:4}),
      opt('🪨 돌 주변의 흙과 식물을 관찰하여, 이 돌이 언제부터 이곳에 있었는지 추정한다.',{naturalist:12,logical:4}),
      opt('🤔 잠시 명상에 잠겨, 이 문양이 나에게 어떤 영감을 주는지 내면의 소리에 귀 기울인다.',{intrapersonal:12})
    ),
    q("숲의 울림", "밤이 되자 숲 속에서 규칙적인 북소리 같은 울림이 들려온다. 불안해하는 동료들 사이에서, 당신은 어떻게 행동할까?",
      opt('🎶 울림의 박자와 리듬을 분석하여, 그것이 인공적인 신호인지 자연적인 소리인지 판단한다.',{musical:14,logical:4}),
      opt('🏕️ 즉시 안전한 야영지를 구축하고, 교대로 불침번을 서며 동료들을 안심시킨다.',{bodily:12,interpersonal:8}),
      opt('🤫 소리의 근원지를 향해 조심스럽게 다가가, 정체가 무엇인지 직접 확인한다.',{bodily:12,spatial:4}),
      opt('🤝 동료들을 모아 각자의 의견을 듣고, 다 함께 다음 행동을 결정한다.',{interpersonal:14})
    ),
    q("고목의 비문", "마침내 거대한 고목을 찾았다. 그 앞에는 글자가 거의 지워진 낡은 비문이 서 있다. '오직 [■■] 자만이 빛을 보리라.' 비문의 내용을 어떻게 알아낼까?",
      opt('🔎 남아있는 글자의 형태와 조각들을 조합하여 사라진 단어를 추리한다.',{linguistic:14}),
      opt('📜 주변에서 비문과 비슷한 시대의 다른 유적을 찾아, 사용된 언어의 패턴을 비교 분석한다.',{logical:10,spatial:6}),
      opt('🖐️ 비문 표면을 손으로 직접 문질러, 마모된 글자의 흔적을 감각으로 읽어낸다.',{bodily:12,naturalist:4}),
      opt('❓ '만약 내가 비문을 세웠다면 어떤 단어를 썼을까?' 스스로 질문하며 답을 찾는다.',{intrapersonal:12,linguistic:4})
    ),
    q("가뭄의 마을", "숲을 나오자 극심한 가뭄으로 고통받는 마을을 마주쳤다. 물을 찾아달라는 마을 사람들의 간절한 눈빛을 외면할 수 없다. 어떻게 그들을 도울까?",
      opt('🌊 주변 지형을 정밀하게 분석하여, 지하 수맥이 있을 만한 곳을 찾아낸다.',{logical:12,spatial:8}),
      opt('💪 마을 사람들을 조직하고 격려하며, 다 함께 우물을 파는 작업에 직접 참여한다.',{interpersonal:14,bodily:6}),
      opt('🌱 가뭄에도 잘 자라는 식물들을 추적하여, 물이 있는 곳의 단서를 찾는다.',{naturalist:12}),
      opt('🗣️ 물 분배 문제로 다투는 마을 사람들을 중재하고, 모두가 합의할 규칙을 만든다.',{interpersonal:14,linguistic:6})
    ),
    q("광장의 노래", "마을 광장에서 한 음유시인이 '빛을 잃은 왕관'에 대한 노래를 부르고 있다. 가사 속에 중요한 단서가 있을지도 모른다.",
      opt('🎼 노래의 가사 하나하나를 빠짐없이 기록하고, 그 안에 숨겨진 은유를 분석한다.',{linguistic:12,musical:6}),
      opt('😊 노래가 끝난 후, 음유시인에게 다가가 그의 이야기에 깊은 관심을 보이며 추가 정보를 얻는다.',{interpersonal:12}),
      opt('🗺️ 노래에 묘사된 '세 개의 봉우리'나 '붉은 강' 같은 지형을 지도에서 찾아본다.',{spatial:12}),
      opt('🎵 가사보다는 노래의 슬픈 멜로디에 집중하여, '잃어버린 왕관'의 감정적 의미를 파악한다.',{musical:12,intrapersonal:4})
    ),
    q("국경의 의심", "단서를 따라 도착한 국경 요새. 하지만 수비대는 당신의 신분을 의심하며 길을 열어주지 않는다. 어떻게 이 상황을 해결할까?",
      opt('👑 나의 신분과 여정의 목적을 논리정연하고 설득력 있게 설명하여 신뢰를 얻는다.',{linguistic:14,interpersonal:6}),
      opt('🛡️ 수비대의 경계심을 이해한다고 말하며, 그들의 임무를 존중하는 태도를 보인다.',{interpersonal:16}),
      opt('🔍 지금까지 모아온 증거물(편지, 지도 조각 등)을 제시하여 나의 주장을 증명한다.',{logical:12}),
      opt('⏳ 당장 통과하려 하지 않고, 요새 밖에서 머물며 그들이 마음을 열 때까지 기다린다.',{intrapersonal:12})
    ),
    q("왕의 시험", "마침내 왕 앞에 선 당신. 그는 시험하듯 묻는다. '백성의 행복과 왕국의 안정, 둘 중 하나만 택해야 한다면 무엇을 택하겠는가?' 당신의 답은?",
      opt('💬 '백성의 행복이 곧 왕국의 가장 튼튼한 기반입니다.'라고 답하며 구체적인 정책을 제시한다.',{interpersonal:16,linguistic:6}),
      opt('⚖️ '안정 없는 행복은 신기루와 같으니, 먼저 튼튼한 방벽을 쌓겠습니다.'라고 답한다.',{logical:14,bodily:6}),
      opt('❓ '그 둘은 분리될 수 없습니다. 왜 그런 선택을 해야만 하는가?' 스스로 되묻는다.',{intrapersonal:12,logical:8}),
      opt('🎨 '교육과 예술을 통해 백성들의 마음을 풍요롭게 하는 것이 장기적인 안정의 길입니다.'라고 답한다.',{linguistic:12,musical:4})
    ),
    q("고대의 장치", "왕이 인정한 당신에게 마지막 장소의 지도가 주어진다. 그곳엔 복잡한 고대 장치가 잠들어 있다. 어떻게 작동시킬까?",
      opt('⚙️ 톱니바퀴와 문양들의 관계를 분석하여, 장치의 논리적인 작동 원리를 파악한다.',{logical:14,spatial:6}),
      opt('✋ 장치의 여러 부분을 직접 만지고 움직여보며, 물리적인 반응을 통해 해법을 찾는다.',{bodily:12}),
      opt('🔊 장치에서 주기적으로 들려오는 미세한 소리의 높낮이와 패턴에서 단서를 찾는다.',{musical:12}),
      opt('🌿 장치 주변에만 자라는 특이한 식물이나 이끼를 통해, 장치의 에너지원을 추측한다.',{naturalist:12})
    ),
    q("길 잃은 아이", "장치를 작동시키자 새로운 길이 열렸다. 하지만 그 길목에서, 겁에 질려 울고 있는 한 아이를 발견했다. 어떻게 할 것인가?",
      opt('❤️ 아이의 눈높이에 맞춰 앉아, 부드러운 목소리로 안심시키며 무슨 일이 있었는지 들어준다.',{interpersonal:14}),
      opt('👣 아이가 걸어온 방향의 발자국이나 흔적을 찾아, 부모를 찾을 단서를 수집한다.',{spatial:12,naturalist:8}),
      opt('🎵 아이의 긴장을 풀어주기 위해, 재미있는 노래를 불러주거나 작은 놀이를 함께 한다.',{musical:10,interpersonal:6}),
      opt('🤔 일단 아이를 안전한 곳으로 데려간 뒤, 침착하게 아이를 찾을 최선의 방법을 계획한다.',{logical:12,intrapersonal:6})
    ),
    q("마을의 전설", "아이를 부모에게 돌려보내자, 마을 사람들이 당신에게 고대의 전설을 들려준다. '세상의 끝에는 모든 지혜가 잠들어 있는 샘이 있다'고 한다. 어떻게 이 전설을 탐색할까?",
      opt('📜 전설에 등장하는 지명과 단어들을 철저히 조사하여, 숨겨진 의미를 파악한다.',{linguistic:14}),
      opt('🗺️ 전설에서 묘사된 지형적 특징들을 지도에 표시하고, 예상 경로를 설정한다.',{spatial:14}),
      opt('👥 마을의 현자나 나이 많은 이들을 찾아가 전설에 대한 더 자세한 이야기를 듣는다.',{interpersonal:12,linguistic:6}),
      opt('🧘‍♀️ 전설의 내용을 곰곰이 생각하며, 내가 중요하게 생각하는 가치와 연결시켜 본다.',{intrapersonal:12,logical:4})
    ),
    q("어둠의 동굴", "전설을 따라가다 어둠과 습기로 가득 찬 동굴을 만났다. 동굴 안에는 길을 잃은 듯한 불빛들이 깜빡인다. 어떻게 동굴을 통과할까?",
      opt('💡 동굴의 지형과 불빛의 패턴을 분석하여, 안전한 길을 찾아낸다.',{logical:14,spatial:8}),
      opt('✋ 동굴 벽을 손으로 직접 문질러, 발의 감각을 이용해 길을 찾는다.',{bodily:14,intrapersonal:6}),
      opt('🔊 동굴에서 들려오는 메아리 소리의 방향을 분석하여, 출구를 짐작한다.',{musical:12}),
      opt('🔦 횃불을 밝혀 주변 환경을 밝히고, 어둠 속에 숨어 있는 위험을 찾아낸다.',{naturalist:12})
    ),
    q("고대 부족", "동굴을 통과하자 외부와 단절된 고대 부족을 만났다. 그들은 낯선 당신을 경계한다. 어떻게 그들과 소통할까?",
      opt('🗣️ 그들의 몸짓과 소리를 주의 깊게 관찰하여, 비언어적인 방식으로 소통을 시도한다.',{linguistic:14,interpersonal:10}),
      opt('🤝 부족민들에게 먼저 다가가, 존중과 평화의 제스처를 보인다.',{interpersonal:16}),
      opt('🎁 그들에게 작은 선물이나 유용한 물건을 건네며 신뢰를 얻는다.',{logical:12,interpersonal:8}),
      opt('🌿 주변의 식물을 이용해 그들의 문화와 자연의 연관성을 파악한다.',{naturalist:12,spatial:6})
    ),
    q("춤의 의식", "부족민들은 당신에게 그들의 전통 의식인 '춤의 의식'에 참여해달라고 요청한다. 어떻게 참여할까?",
      opt('🕺 부족민들의 춤 동작을 유심히 관찰하고, 그들의 리듬을 몸으로 익혀 따라 한다.',{bodily:16,musical:8}),
      opt('🎵 의식에서 연주되는 음악의 특징을 파악하고, 그에 맞는 나만의 춤을 창조한다.',{musical:14,intrapersonal:6}),
      opt('🤔 춤의 의미와 역사를 부족민들에게 물어보며, 의식에 대한 이해를 깊게 한다.',{linguistic:12,interpersonal:8}),
      opt('👀 춤을 추는 부족민들의 표정과 몸짓에서 그들의 감정을 읽고 공감한다.',{interpersonal:14})
    ),
    q("지혜의 샘", "모든 시련을 이겨내고 마침내 지혜의 샘에 도착했다. 샘물은 당신의 과거와 미래를 비춘다. 무엇을 볼 것인가?",
      opt('📚 샘물에 비친 과거의 지식들을 흡수하여, 나의 지능을 더욱 확장한다.',{linguistic:16,logical:10}),
      opt('💡 샘물이 보여주는 미래의 가능성 중, 가장 논리적이고 현실적인 길을 선택한다.',{logical:16,intrapersonal:8}),
      opt('💖 샘물에 비친 사람들의 행복한 모습을 보며, 그들을 위해 무엇을 할 수 있을지 생각한다.',{interpersonal:16,intrapersonal:8}),
      opt('🌌 샘물이 보여주는 우주의 신비와 자연의 섭리를 깊이 관찰한다.',{naturalist:16,spatial:10})
    ),
    q("샘물의 시험", "지혜의 샘은 당신에게 마지막 시험을 제시한다. '가장 위대한 지혜는 무엇인가?' 당신의 답은?",
      opt('💬 '타인의 아픔에 공감하고 사랑하는 마음입니다.'라고 답한다.',{interpersonal:16}),
      opt('🧠 '세상을 이해하고 문제를 해결하는 논리적 사고입니다.'라고 답한다.',{logical:16}),
      opt('🌳 '자연의 순리와 조화를 이해하는 것입니다.'라고 답한다.',{naturalist:16}),
      opt('🎶 '아름다움을 창조하고 감동을 주는 예술적 영감입니다.'라고 답한다.',{musical:16})
    ),
    q("진정한 왕의 귀환", "모든 시험을 통과하고 샘의 축복을 받은 당신. 이제 진정한 왕으로서 왕국으로 돌아갈 시간이다. 어떤 모습으로 돌아갈 것인가?",
      opt('👑 위엄과 지혜를 겸비한 모습으로 돌아가, 왕국을 평화롭게 다스린다.',{linguistic:14,interpersonal:12}),
      opt('💪 백성들을 이끌고 직접 나라를 재건하며, 강인한 리더십을 보여준다.',{bodily:14,interpersonal:10}),
      opt('✨ 백성들에게 새로운 지식과 예술을 전파하며, 문명의 발전을 이끈다.',{logical:14,musical:10}),
      opt('🌿 자연과 인간이 조화롭게 살아가는 이상적인 왕국을 건설한다.',{naturalist:14,intrapersonal:10})
    ),
    q("계승자의 명예", "왕위에 오른 당신은 이제 미래를 위한 결정을 해야 한다. 당신의 후계자는 어떤 자질을 가진 인물이어야 하는가?",
      opt('📚 뛰어난 언어 능력과 지식을 겸비한 학자를 후계자로 지명한다.',{linguistic:14,logical:8}),
      opt('💖 백성을 사랑하고 공감 능력이 뛰어난 인물을 후계자로 삼는다.',{interpersonal:16}),
      opt('⚔️ 위기 상황에 강인하게 대처하고, 백성을 직접 보호할 수 있는 용사를 택한다.',{bodily:14,spatial:8}),
      opt('🧘‍♀️ 자신의 내면을 깊이 이해하고, 백성들의 마음을 헤아릴 수 있는 현자를 선택한다.',{intrapersonal:16})
    ),
    q("평화로운 시대", "당신의 통치 아래 왕국은 평화롭고 번영한다. 백성들은 당신을 영원히 기억할 것이다. 당신의 치세는 어떤 모습으로 역사에 기록될까?",
      opt('✨ 지혜와 정의로움으로 모든 갈등을 해결하고, 평화로운 시대를 이룩한 왕으로 기억된다.',{logical:14,interpersonal:12}),
      opt('🎨 예술과 학문을 장려하여, 문화적 황금기를 이끈 위대한 군주로 칭송받는다.',{musical:14,linguistic:12}),
      opt('🌳 자연과 조화를 이루는 정책으로, 풍요로운 환경을 조성한 환경 친화적인 왕으로 기록된다.',{naturalist:14,bodily:10}),
      opt('❤️ 백성들의 마음을 하나로 모아, 모두가 행복한 공동체를 만든 따뜻한 왕으로 기억된다.',{intrapersonal:14,interpersonal:14})
    )
  ],
  // Princess Questline (20 Quests)
  princess: [
    q("잃어버린 일기장", "성 정원 가장 깊은 곳, 비밀의 샘 근처에서 낡은 일기장을 발견했다. 공주님이 썼을 법한 섬세한 글씨로 '가장 귀한 보석은 마음속에 있다'고 적혀있다. 그 의미를 어떻게 해석해야 할까?",
      opt('✍️ 문장 하나하나의 의미를 깊이 생각하고, 숨겨진 비유와 상징을 찾아본다.',{linguistic:14}),
      opt('🤔 조용히 샘물가에 앉아, 나 자신의 내면을 들여다보며 그 의미를 깨닫고자 한다.',{intrapersonal:14,interpersonal:6}),
      opt('🏰 일기장에 묘사된 정원의 지형과 비밀 통로를 지도에 표시해본다.',{spatial:12}),
      opt('👥 일기장의 필체를 아는 궁중 화가를 찾아가, 일기장의 주인을 추론한다.',{interpersonal:12,logical:4})
    ),
    q("정원의 수수께끼", "일기장에는 '해가 지는 방향으로 일곱 걸음, 그리고 밤의 노래가 끝날 때'라는 알쏭달쏭한 구절이 있다. 이 수수께끼를 어떻게 풀어야 할까?",
      opt('🧭 정확히 서쪽으로 일곱 걸음을 걸은 뒤, 밤의 별자리와 달의 위치를 관찰한다.',{spatial:14,naturalist:6}),
      opt('🎵 밤이 되었을 때, 정원에서 들려오는 모든 소리를 주의 깊게 듣고 패턴을 분석한다.',{musical:12,logical:6}),
      opt('🏃‍♀️ 일곱 걸음을 걷는 가장 효율적인 움직임을 연구하여, 최단 경로로 이동한다.',{bodily:10,logical:6}),
      opt('📖 일기장 속 다른 구절들과 연관성을 찾아, 구절의 진정한 의미를 추론한다.',{linguistic:12})
    ),
    q("궁정 연회", "다음 단서가 궁정 연회에 숨겨져 있다는 것을 알게 되었다. 하지만 사람들로 붐비는 곳에서 단서를 찾는 것은 쉽지 않다. 어떻게 행동할까?",
      opt('🤫 연회장의 모든 대화를 주의 깊게 엿들어, 중요한 정보를 찾아낸다.',{linguistic:14,interpersonal:6}),
      opt('🕺 음악에 맞춰 춤을 추며 자연스럽게 사람들과 어울려 정보를 얻는다.',{bodily:12,interpersonal:8}),
      opt('🖼️ 연회장 벽에 걸린 그림들과 장식품의 배치를 분석하여 단서를 찾는다.',{spatial:12}),
      opt('🤐 조용히 구석에 앉아, 나 자신에게 주어진 임무에 대해 깊이 생각한다.',{intrapersonal:12})
    ),
    q("무도회장의 가면", "무도회에서 가면을 쓴 수상한 사람이 당신에게 귓속말로 '자정의 종소리에 맞춰 정원의 분수대로 오라'고 속삭였다. 어떻게 할까?",
      opt('🕵️‍♀️ 수상한 사람의 걸음걸이와 행동 패턴을 분석하여, 그의 신분을 추정한다.',{bodily:12,logical:6}),
      opt('⏰ 약속 장소에 미리 도착해 분수대 주변의 모든 지형을 살핀다.',{spatial:12,intrapersonal:6}),
      opt('🤝 주변 사람들에게 그 수상한 사람에 대해 물어보며 정보를 모은다.',{interpersonal:14}),
      opt('🎶 자정의 종소리 소리를 기억하며, 그 소리가 울리는 방식에 집중한다.',{musical:12})
    ),
    q("사서의 부탁", "도서관에서 단서를 찾던 중, 사서가 당신에게 곤란한 부탁을 한다. '오래된 책들의 순서가 뒤섞였으니, 제자리를 찾아달라'고 한다. 어떻게 할까?",
      opt('📚 책의 내용과 저술 시기를 분석하여, 논리적인 순서대로 배열한다.',{logical:14,linguistic:6}),
      opt('🏃‍♀️ 책을 들고 빠르게 도서관을 돌아다니며, 원래의 위치를 찾아낸다.',{bodily:12}),
      opt('🧐 책장에 남은 미세한 먼지 흔적이나 빛바랜 자국을 통해, 책의 원래 위치를 추정한다.',{naturalist:12,spatial:6}),
      opt('💬 사서와 다른 사람들에게 책의 원래 순서에 대해 물어본다.',{interpersonal:14})
    ),
    q("미로 정원", "단서를 따라 도착한 곳은 복잡한 미로 정원. 길을 잃지 않고 지나가는 방법은 무엇일까?",
      opt('🧭 미로의 전체 지도를 머릿속에 그리며, 가장 효율적인 경로를 계산한다.',{spatial:14,logical:6}),
      opt('👣 벽을 한쪽 손으로 계속 짚으며 나아가는 가장 고전적인 방법을 사용한다.',{bodily:12,intrapersonal:4}),
      opt('🐦 미로 안에서 울고 있는 새의 소리를 듣고, 그 소리의 방향을 따라간다.',{musical:12}),
      opt('🌱 미로 벽에 붙어있는 식물들의 생장 방향을 관찰하여, 햇빛이 드는 방향을 추론한다.',{naturalist:12,spatial:4})
    ),
    q("비밀의 방", "미로를 통과하자 벽에 비밀의 방으로 통하는 문이 나타났다. 하지만 문에는 복잡한 기하학적 문양이 새겨져 있다. 어떻게 문을 열까?",
      opt(' geometrically 문양의 도형들과 패턴을 분석하여, 숨겨진 규칙을 찾아낸다.',{logical:14,spatial:8}),
      opt('💬 문양의 의미를 고대 문헌에서 찾아, 올바른 주문을 외운다.',{linguistic:12}),
      opt('🖐️ 문양의 각 부분을 직접 만져보고, 그 촉감과 무게에서 해답을 찾는다.',{bodily:12}),
      opt('🤔 문양을 보는 순간 떠오르는 영감에 따라 문을 조작해본다.',{intrapersonal:14})
    ),
    q("가시 덤불", "비밀의 방으로 가는 길목을 가시 덤불이 막고 있다. 덤불을 뚫고 가야 한다.",
      opt('✂️ 날카로운 도구를 사용하여 덤불의 가장 약한 부분을 체계적으로 잘라낸다.',{logical:12,bodily:6}),
      opt('🎶 노래를 부르며 덤불을 뚫고 나아간다. 흥겨운 리듬이 힘든 여정을 잊게 해 줄 것이다.',{musical:10,intrapersonal:8}),
      opt('🌳 덤불을 이루는 식물의 종류와 특성을 파악하여, 가장 효율적인 통로를 찾는다.',{naturalist:14,spatial:6}),
      opt('🤝 함께 온 동료들과 힘을 합쳐 덤불을 치워 길을 만든다.',{interpersonal:14,bodily:6})
    ),
    q("보석의 노래", "비밀의 방 안에는 아름다운 보석들이 놓여 있다. 그 중 하나가 미세하게 떨리며 이상한 소리를 낸다.",
      opt('👂 보석의 떨림이 만들어내는 소리의 파장과 멜로디를 분석한다.',{musical:16}),
      opt('💎 보석의 종류와 광물학적 특징을 파악하여, 그것이 어떤 물질에 반응하는지 알아본다.',{naturalist:12,logical:8}),
      opt('💬 보석이 내는 소리를 글로 기록하고, 그 의미를 해독한다.',{linguistic:12,logical:4}),
      opt('🧘‍♀️ 보석이 내는 소리에 집중하며, 그 소리가 내면에 어떤 감정을 일으키는지 느낀다.',{intrapersonal:14})
    ),
    q("진정한 공주", "마침내 모든 단서를 해독하고 진정한 왕녀의 자격을 증명하는 시험에 임한다. '힘과 지혜 중, 진정으로 중요한 것은 무엇인가?'라는 질문을 받았다. 당신의 답은?",
      opt('🧠 '지혜가 힘의 방향을 결정합니다.'라고 답하며 논리적인 근거를 제시한다.',{logical:16}),
      opt('🗣️ '진정한 힘은 백성들의 마음을 얻는 데서 나옵니다. 지혜롭게 소통하는 것이 중요합니다.'라고 답한다.',{interpersonal:16,linguistic:6}),
      opt('⚖️ '둘은 분리될 수 없습니다. 힘이 지혜를 뒷받침하고 지혜가 힘을 올바르게 이끌어야 합니다.'라고 답한다.',{intrapersonal:14}),
      opt('🤝 '동료들과 힘을 합칠 때 진정한 힘이 발현됩니다.'라고 답하며 연대의 중요성을 강조한다.',{interpersonal:12,bodily:8})
    ),
    q("돌아온 평화", "모든 난관을 극복하고 왕궁으로 돌아온 당신. 당신을 향해 사람들이 '지혜의 왕녀'라고 외친다. 어떻게 그들의 기대에 부응할 것인가?",
      opt('📜 백성을 위한 새로운 법과 제도를 만들고, 공정한 규칙을 세운다.', {logical:16, linguistic:10}),
      opt('❤️ 백성들의 삶에 더 깊이 공감하고, 그들의 행복을 위한 정책을 펼친다.', {interpersonal:16}),
      opt('🎨 궁정 화가와 음악가들을 후원하여, 문화와 예술이 꽃피는 왕국을 만든다.', {musical:14, intrapersonal:6}),
      opt('🌿 자연과 함께하는 지속 가능한 왕국을 건설하고, 자연의 소중함을 알린다.', {naturalist:14, spatial:8})
    ),
    q("유적의 수리", "고대 유적이 무너져 내리고 있다. 유적을 수리하여 후대에 남기려면 어떻게 해야 할까?",
      opt('🏗️ 유적의 건축 구조를 분석하여, 가장 효율적이고 안전한 수리 계획을 세운다.', {spatial:14, logical:8}),
      opt('💪 직접 망치와 톱을 들고 유적 수리 작업에 참여하여 모범을 보인다.', {bodily:12, interpersonal:6}),
      opt('📚 유적에 새겨진 고대 문헌을 해독하여, 수리에 필요한 지식을 얻는다.', {linguistic:12}),
      opt('🤔 유적의 건축물을 보며, 고대인들의 지혜와 정신을 깨닫고자 한다.', {intrapersonal:12, logical:4})
    ),
    q("새로운 길", "왕녀로서의 삶을 살던 당신에게, 미지의 세계로 향하는 새로운 길이 열렸다. 어떤 선택을 할 것인가?",
      opt('🗺️ 새로운 길을 탐험하며 미지의 세계를 개척한다.', {spatial:16, bodily:10}),
      opt('👩‍🏫 왕국의 백성들에게 지금까지 얻은 지혜와 경험을 가르친다.', {interpersonal:16, linguistic:12}),
      opt('🎶 새로운 길에서 영감을 받아, 백성들을 위한 새로운 노래를 만든다.', {musical:14, intrapersonal:8}),
      opt('🌿 미지의 땅의 생태계를 연구하고, 자연과 함께 살아가는 방법을 모색한다.', {naturalist:16, logical:8})
    ),
    q("빛의 정원", "새로운 길을 통해 도착한 곳은 신비로운 '빛의 정원'이다. 정원의 꽃들은 밤이 되면 아름다운 빛을 낸다. 이 정원의 비밀을 어떻게 알아낼까?",
      opt('🎨 꽃들의 빛깔과 모양을 세밀하게 관찰하고, 그 아름다움을 그림으로 기록한다.', {spatial:14, musical:8}),
      opt('💧 꽃에 흐르는 물의 성분과 토양을 분석하여, 빛의 원인을 과학적으로 규명한다.', {logical:16, naturalist:8}),
      opt('📝 꽃들의 빛이 내는 패턴과 소리를 기록하고, 고대 언어와의 연관성을 찾아본다.', {linguistic:14, musical:10}),
      opt('🧘‍♀️ 정원 한가운데에 앉아, 자연의 기운을 느끼고 내면의 목소리에 귀 기울인다.', {intrapersonal:14})
    ),
    q("외교관의 요청", "인접한 왕국의 외교관이 찾아와, 당신의 조언을 구한다. 그들의 왕국에서 발생한 분쟁을 해결해달라고 한다. 어떻게 해결할까?",
      opt('🗣️ 양측의 주장을 모두 듣고, 공통의 목표를 찾아내어 대화를 중재한다.', {interpersonal:16, linguistic:12}),
      opt('⚖️ 분쟁의 원인을 논리적으로 분석하고, 객관적인 해결책을 제시한다.', {logical:16, interpersonal:8}),
      opt('🗺️ 분쟁 지역의 지형과 자원 분포를 파악하여, 갈등의 근본적인 원인을 찾아낸다.', {spatial:14, naturalist:10}),
      opt('🤔 외교관의 이면에 숨겨진 의도와 감정을 파악하여, 진정한 문제의 본질을 꿰뚫는다.', {intrapersonal:14, logical:8})
    ),
    q("왕국의 축제", "당신의 지혜와 평화로운 통치에 감사하며, 백성들이 큰 축제를 연다. 어떤 축제를 열 것인가?",
      opt('🎶 음악과 춤이 가득한 예술 축제를 열어, 백성들의 마음을 풍요롭게 한다.', {musical:16, interpersonal:12}),
      opt('📚 지식과 학문을 나누는 학술 축제를 열어, 백성들의 지적 성장을 돕는다.', {linguistic:14, logical:12}),
      opt('💪 힘과 기량을 겨루는 체육 축제를 열어, 백성들의 건강과 단결을 도모한다.', {bodily:14, interpersonal:12}),
      opt('🌿 자연의 아름다움을 기념하는 자연 축제를 열어, 환경 보호의 중요성을 알린다.', {naturalist:14, spatial:10})
    ),
    q("유산의 선택", "당신의 치세가 끝날 무렵, 다음 세대에 어떤 유산을 남길 것인지 결정해야 한다. 무엇을 남길 것인가?",
      opt('📜 당신의 지혜와 경험을 담은 책을 남겨, 후대에게 교훈을 전한다.', {linguistic:16, intrapersonal:12}),
      opt('🏛️ 백성들이 함께 모여 지식을 쌓을 수 있는 위대한 도서관을 건설한다.', {logical:16, spatial:10}),
      opt('🖼️ 당신의 생애와 업적을 담은 예술 작품을 제작하여, 영원히 기억되게 한다.', {musical:14, interpersonal:10}),
      opt('🌳 자연과 조화를 이루는 영구적인 정원을 조성하여, 평화의 상징으로 남긴다.', {naturalist:16, intrapersonal:10})
    ),
    q("별들의 속삭임", "밤하늘을 올려다보자, 별들이 당신에게 속삭이는 듯한 환청이 들린다. '가장 밝게 빛나는 별은 너의 마음속에 있다.' 이 말을 어떻게 해석할까?",
      opt('⭐ 별자리의 위치와 움직임을 분석하여, 이것이 어떤 천문학적 현상인지 규명한다.', {spatial:16, logical:12}),
      opt('🎵 별들의 속삭임에서 멜로디를 찾아내고, 새로운 음악을 창조한다.', {musical:14, intrapersonal:10}),
      opt('💖 나의 내면을 깊이 들여다보며, 진정한 나의 가치와 빛을 찾아낸다.', {intrapersonal:16, interpersonal:14}),
      opt('📜 별들의 이야기가 담긴 고대 신화를 찾아, 숨겨진 의미를 해독한다.', {linguistic:14, naturalist:10})
    ),
    q("평화의 상징", "당신은 모든 이에게 존경받는 위대한 존재가 되었다. 당신을 상징하는 것은 무엇이 될까?",
      opt('✍️ 당신의 지혜를 담은 글귀가 새겨진 돌이 평화의 상징이 된다.', {linguistic:14, logical:12}),
      opt('🤝 당신이 만든 평화의 의식 춤이 후대에 전해진다.', {bodily:14, interpersonal:12}),
      opt('🌿 당신이 조성한 아름다운 정원이 평화의 상징이 된다.', {naturalist:16, spatial:10}),
      opt('👑 당신이 썼던 왕관이, 지혜로운 통치의 상징으로 대대로 이어진다.', {intrapersonal:14, interpersonal:14})
    )
  ],
  // Warrior Questline (20 Quests)
  warrior: [
    q("마을의 위협", "당신의 고향 마을이 야만족의 위협을 받고 있다는 소식을 들었다. 어떻게 대응할 것인가?",
      opt('🛡️ 마을 사람들을 조직하여 방어 태세를 갖추고, 약점을 보완할 전략을 세운다.',{logical:14,interpersonal:10}),
      opt('⚔️ 즉시 야만족의 본거지로 달려가, 적의 대장을 직접 물리친다.',{bodily:16,spatial:8}),
      opt('🏹 주변 지형을 이용하여 매복 작전을 펼치고, 적의 동선을 예측한다.',{spatial:14,logical:8}),
      opt('🗣️ 야만족과의 대화를 시도하여, 싸움 없이 문제를 해결할 방법을 모색한다.',{linguistic:12,interpersonal:12})
    ),
    q("훈련장", "마을 사람들을 훈련시키기 위해 훈련장을 만들었다. 어떤 방식으로 훈련시킬까?",
      opt('💪 다양한 무술과 전투 기술을 직접 시범 보이며 가르친다.',{bodily:16,interpersonal:8}),
      opt('📝 전략 시뮬레이션과 전술 훈련을 통해, 지능적인 전투를 가르친다.',{logical:14,spatial:8}),
      opt('🗣️ 훈련생들의 개인적인 약점과 강점을 파악하여 맞춤형 훈련 계획을 세운다.',{interpersonal:14,intrapersonal:8}),
      opt('🌲 숲과 산을 이용하여 자연 속에서 실전과 같은 훈련을 진행한다.',{naturalist:12,bodily:10})
    ),
    q("적의 약점", "야만족의 공격을 막아내던 중, 적의 약점을 발견했다. 이 정보를 어떻게 활용할까?",
      opt('🗺️ 적의 이동 경로와 공격 패턴을 분석하여, 가장 효과적인 반격 지점을 찾아낸다.',{spatial:14,logical:12}),
      opt('🤫 적의 지휘관을 암살하여, 그들의 조직을 와해시킨다.',{bodily:12,intrapersonal:6}),
      opt('📜 적의 문화와 언어를 연구하여, 그들의 심리를 이해하고 전략을 세운다.',{linguistic:14,interpersonal:10}),
      opt('🔊 북소리와 함성을 이용하여, 적에게 혼란을 주고 사기를 꺾는다.',{musical:12,logical:8})
    ),
    q("전쟁의 상처", "전쟁이 끝난 후, 마을에는 깊은 상처가 남았다. 어떻게 마을 사람들을 치유할까?",
      opt('❤️ 마을 사람들의 이야기를 듣고, 그들의 아픔에 공감하며 위로한다.',{interpersonal:16}),
      opt('💪 직접 무너진 건물들을 복구하고, 마을 재건에 앞장선다.',{bodily:14,interpersonal:10}),
      opt('🎶 희망을 담은 노래를 만들어, 지친 마음을 위로한다.',{musical:14,intrapersonal:8}),
      opt('🌱 전쟁으로 황폐해진 땅을 복구하고, 농사를 다시 시작하게 돕는다.',{naturalist:14,logical:8})
    ),
    q("외로운 여정", "당신은 더 넓은 세상의 위험을 막기 위해 홀로 여행을 떠난다. 어떤 길을 택할까?",
      opt('🗺️ 지도를 보며 가장 빠르고 효율적인 길을 선택한다.',{spatial:16,logical:8}),
      opt('👣 발길이 닿는 대로, 나의 직관이 이끄는 길을 따라간다.',{intrapersonal:14,bodily:12}),
      opt('👥 가는 길에 만나는 사람들과 동행하며, 새로운 정보를 얻는다.',{interpersonal:14}),
      opt('🌿 숲과 강을 따라가며, 자연의 힘을 느끼고 배우며 나아간다.',{naturalist:14,spatial:6})
    ),
    q("야생 동물", "야생의 숲을 지나던 중, 사나운 맹수와 마주쳤다. 어떻게 이 상황을 헤쳐나갈까?",
      opt('⚔️ 맹수와 일대일로 맞서 싸워 제압한다.',{bodily:16}),
      opt('🤔 맹수의 행동 패턴을 관찰하고, 가장 안전한 길로 회피한다.',{logical:14,naturalist:10}),
      opt('🤫 소리를 내지 않고, 맹수의 눈을 피하며 조심스럽게 지나간다.',{intrapersonal:12,bodily:8}),
      opt('🔊 큰 소리를 내거나 노래를 불러, 맹수를 위협하고 쫓아낸다.',{musical:12,interpersonal:8})
    ),
    q("폭풍우 속의 난파선", "해안가에 도착하자, 거대한 폭풍우에 난파된 배를 발견했다. 어떻게 할 것인가?",
      opt('💪 난파선으로 직접 헤엄쳐 가서, 생존자를 구조한다.',{bodily:16,interpersonal:10}),
      opt('💡 난파선의 구조를 분석하여, 생존자들이 있을 만한 곳을 추론한다.',{logical:14,spatial:10}),
      opt('🗣️ 구조를 기다리는 생존자들에게 희망의 메시지를 외쳐 보낸다.',{linguistic:12,interpersonal:14}),
      opt('🌊 바다의 흐름과 날씨를 분석하여, 구조 시점을 예측한다.',{naturalist:14,logical:8})
    ),
    q("거인의 뼈", "새로운 섬에 도착하자, 거대한 거인의 뼈가 널브러져 있다. 무엇을 느낄까?",
      opt('🎨 거인의 뼈를 보며, 거인의 삶과 고통을 상상하고 예술 작품을 만든다.',{musical:14,intrapersonal:12}),
      opt('🔬 뼈의 크기와 형태로 거인의 생태와 특징을 과학적으로 추론한다.',{logical:14,naturalist:12}),
      opt('📜 뼈에 남겨진 고대 문양이나 기호들을 해독하여, 거인의 역사를 알아낸다.',{linguistic:14,spatial:8}),
      opt('💪 거인의 뼈를 만지며, 그 거대한 힘과 위압감을 느껴본다.',{bodily:12,intrapersonal:10})
    ),
    q("두 부족의 싸움", "두 부족이 영토 분쟁으로 싸우고 있다. 당신은 어떻게 이 분쟁을 해결할 것인가?",
      opt('⚔️ 두 부족의 대표와 결투하여, 승리한 부족의 손을 들어준다.',{bodily:16,logical:8}),
      opt('🗣️ 각 부족의 언어와 문화를 배워, 그들의 입장에서 문제를 이해한다.',{linguistic:14,interpersonal:14}),
      opt('🤝 두 부족을 모아 평화 협정을 맺도록 설득하고, 공존의 길을 제시한다.',{interpersonal:16,logical:12}),
      opt('🗺️ 두 부족의 영토를 직접 탐험하고, 자원을 공평하게 나눌 방법을 찾아낸다.',{spatial:14,naturalist:10})
    ),
    q("현자의 물음", "모든 난관을 극복하고 돌아온 당신에게, 현자가 묻는다. '진정한 힘은 어디서 나오는가?' 당신의 답은?",
      opt('💪 '강인한 육체와 정신력에서 나옵니다.'라고 답한다.',{bodily:16}),
      opt('🧠 '지혜롭게 생각하고 문제를 해결하는 능력에서 나옵니다.'라고 답한다.',{logical:16}),
      opt('❤️ '타인을 이해하고 사랑하는 마음에서 나옵니다.'라고 답한다.',{interpersonal:16}),
      opt('🌌 '자연과 하나가 되는 순리에서 나옵니다.'라고 답한다.',{naturalist:16})
    ),
    q("새로운 임무", "당신은 이제 왕국의 수호자가 되었다. 당신에게 새로운 임무가 주어진다. '외세의 침략으로부터 왕국을 지켜라!' 어떻게 이 임무를 수행할 것인가?",
      opt('🛡️ 왕국의 모든 국경에 요새를 건설하고, 방어 시스템을 구축한다.',{logical:14,spatial:10}),
      opt('⚔️ 병사들을 직접 훈련시키고, 최강의 군대를 양성한다.',{bodily:16,interpersonal:12}),
      opt('🤝 주변 국가들과 외교 관계를 강화하여, 평화적인 방어 체제를 만든다.',{interpersonal:16,linguistic:12}),
      opt('🧐 적국의 약점과 강점을 분석하고, 가장 효과적인 전략을 세운다.',{logical:14,intrapersonal:10})
    ),
    q("위기의 순간", "적의 침략이 시작되었다. 예상치 못한 위기에 병사들이 동요한다. 어떻게 할 것인가?",
      opt('🗣️ 병사들 앞에 나서서 용기와 희망을 주는 연설을 한다.',{linguistic:14,interpersonal:16}),
      opt('💪 가장 위험한 전선에 직접 뛰어들어, 솔선수범하여 병사들을 이끈다.',{bodily:16,intrapersonal:12}),
      opt('🔊 힘찬 북소리와 함성으로 병사들의 사기를 높인다.',{musical:14,interpersonal:12}),
      opt('🤔 전황을 빠르게 분석하고, 적의 허를 찌르는 기발한 전술을 지시한다.',{logical:14,spatial:10})
    ),
    q("고대의 무기", "전쟁 중, 고대의 무기가 잠들어 있는 비밀의 장소를 알게 되었다. 이 무기를 어떻게 사용할까?",
      opt('⚔️ 직접 무기를 들고 적의 심장부로 돌진한다.',{bodily:16,spatial:10}),
      opt('🔬 무기의 작동 원리를 과학적으로 분석하여, 대량 생산할 방법을 찾는다.',{logical:16,bodily:8}),
      opt('📜 무기에 새겨진 고대 문양을 해독하여, 무기의 진정한 힘을 이끌어낸다.',{linguistic:14,intrapersonal:12}),
      opt('💡 무기의 힘을 이용해 자연의 힘을 제어하고, 전쟁을 종식시킨다.',{naturalist:14,logical:8})
    ),
    q("적과의 협상", "적의 지휘관이 당신에게 협상을 제안한다. 어떤 조건으로 협상할 것인가?",
      opt('💬 언변을 이용하여, 가장 유리한 조건을 얻어낸다.',{linguistic:16,logical:12}),
      opt('🤝 상대방의 입장을 이해하고, 모두가 만족할 수 있는 평화적인 해결책을 찾는다.',{interpersonal:16,intrapersonal:12}),
      opt('🤔 협상의 이면에 숨겨진 함정을 파악하고, 신중하게 접근한다.',{logical:14,interpersonal:10}),
      opt('💪 나의 힘을 과시하여, 상대를 굴복시키고 원하는 것을 얻어낸다.',{bodily:14,linguistic:8})
    ),
    q("평화의 시대", "전쟁을 승리로 이끈 당신. 이제 왕국은 평화의 시대를 맞이했다. 어떤 리더가 될 것인가?",
      opt('📜 백성들에게 병법과 전술을 가르쳐, 스스로를 지킬 힘을 준다.',{linguistic:14,bodily:12}),
      opt('🏛️ 전쟁의 상흔을 치유하기 위해, 재건 사업을 이끌고 백성들의 삶을 돌본다.',{interpersonal:16,logical:12}),
      opt('🎨 전쟁의 아픔을 잊게 할 아름다운 예술과 음악을 장려한다.',{musical:14,intrapersonal:10}),
      opt('🌳 자연과 더불어 살아가는 방법을 가르치고, 풍요로운 환경을 만든다.',{naturalist:14,spatial:10})
    ),
    q("후계자의 자질", "당신은 이제 후계자를 선택해야 한다. 어떤 자질을 가진 인물을 선택할 것인가?",
      opt('⚔️ 강인한 무력과 용맹함을 가진 인물을 선택한다.',{bodily:16}),
      opt('⚖️ 논리적이고 정의로운 판단력을 가진 인물을 선택한다.',{logical:16}),
      opt('❤️ 백성을 사랑하고 공감하는 마음을 가진 인물을 선택한다.',{interpersonal:16}),
      opt('🧘‍♀️ 자신의 내면을 깊이 성찰하는 인물을 선택한다.',{intrapersonal:16})
    ),
    q("전설의 영웅", "당신은 전설적인 영웅으로 역사에 기록되었다. 당신의 이야기는 어떻게 전해질까?",
      opt('🗣️ 당신의 용맹한 활약이 담긴 서사시로 전해진다.',{linguistic:14,musical:12}),
      opt('🏛️ 당신이 세운 위대한 건축물들이 당신의 위대함을 증명한다.',{spatial:14,logical:12}),
      opt('🌳 당신이 심은 나무들이 우거진 숲이 당신의 이름으로 불린다.',{naturalist:14,bodily:10}),
      opt('💖 당신이 베푼 자비와 사랑이 담긴 이야기로 영원히 기억된다.',{interpersonal:16,intrapersonal:14})
    ),
    q("새로운 도전", "평화로운 시대에 접어든 당신에게, 새로운 도전이 찾아왔다. 미지의 던전을 탐험해달라는 요청이다. 어떻게 할 것인가?",
      opt('⚔️ 홀로 던전에 들어가, 모든 위험을 무력으로 극복한다.',{bodily:16}),
      opt('🗺️ 던전의 구조를 분석하고, 가장 안전한 경로를 찾아 팀원들과 함께 들어간다.',{spatial:14,logical:12}),
      opt('👥 마을 사람들을 모아 던전 탐험대를 구성하고, 각자의 역할을 부여한다.',{interpersonal:16,linguistic:12}),
      opt('🤔 던전의 보스가 어떤 존재인지 내면을 탐색하고, 전략을 세운다.',{intrapersonal:14,logical:10})
    ),
    q("고대의 보물", "던전의 가장 깊은 곳에서, 고대의 보물을 발견했다. 이 보물은 무엇인가?",
      opt('💎 영원히 마르지 않는 샘물', {naturalist:16}),
      opt('📜 모든 지식을 담고 있는 고대 문헌', {linguistic:16}),
      opt('🛡️ 어떠한 공격도 막아내는 불멸의 방패', {bodily:16}),
      opt('🎶 어떤 소리도 조절할 수 있는 신비한 악기', {musical:16})
    ),
    q("위대한 전사", "모든 모험을 마친 당신은 진정한 전사가 되었다. 당신의 위대함은 어떻게 기억될까?",
      opt('💪 당신의 강인한 힘과 용기가 역사에 기록된다.',{bodily:16}),
      opt('🧠 당신의 뛰어난 전략과 지혜가 후대에 전해진다.',{logical:16}),
      opt('❤️ 당신의 정의와 백성을 향한 사랑이 영원히 기억된다.',{interpersonal:16}),
      opt('🌳 당신이 이룩한 평화로운 자연이 당신의 위대함을 말해준다.',{naturalist:16})
    )
  ],
  // Wizard Questline (20 Quests)
  wizard: [
    q("마법의 서재", "어둠의 서재에서 잊혀진 고대 마법의 책을 발견했다. 책은 봉인되어 열리지 않는다. 어떻게 봉인을 풀까?",
      opt('🔮 봉인에 쓰인 마법 문양을 분석하여, 반대되는 주문을 외운다.',{logical:14,linguistic:12}),
      opt('✋ 책을 직접 만져보고, 봉인에 담긴 마력의 흐름을 감각으로 읽어낸다.',{bodily:12,intrapersonal:10}),
      opt('📜 책 주변에 남겨진 희미한 글귀를 해독하여, 봉인 해제 방법을 알아낸다.',{linguistic:14,logical:10}),
      opt('🎶 봉인에서 나는 미세한 소리의 주파수를 조절하여 봉인을 해제한다.',{musical:14,logical:8})
    ),
    q("마법의 탑", "책의 봉인을 풀자, '하늘의 별을 담은 마법의 탑으로 오라'는 메시지가 나타났다. 어떻게 탑으로 갈까?",
      opt('🗺️ 밤하늘의 별자리를 관찰하고, 별의 위치를 따라 탑의 위치를 찾는다.',{spatial:14,naturalist:10}),
      opt('🚀 하늘로 날아가는 마법을 연구하여, 직접 탑으로 비행한다.',{logical:12,bodily:10}),
      opt('👥 탑에 대해 아는 현자를 찾아가, 정보를 얻는다.',{interpersonal:12,linguistic:8}),
      opt('🤔 탑의 메시지가 내게 주는 영적인 의미를 성찰하며, 길을 찾는다.',{intrapersonal:12,logical:8})
    ),
    q("환상의 숲", "마법의 탑으로 가는 길목에 환상의 숲이 있다. 숲의 환영 때문에 길을 잃기 쉽다. 어떻게 숲을 통과할까?",
      opt('🔍 환상의 패턴을 논리적으로 분석하여, 진짜와 가짜를 구별한다.',{logical:16}),
      opt('🎶 숲에서 들려오는 신비한 노래에 집중하여, 올바른 길을 찾는다.',{musical:14}),
      opt('🌿 숲의 식물들과 동물들의 움직임을 관찰하여, 자연의 길을 따른다.',{naturalist:14,spatial:8}),
      opt('🧘‍♀️ 내면의 목소리에 집중하여, 환영에 흔들리지 않고 앞으로 나아간다.',{intrapersonal:14})
    ),
    q("골렘의 수수께끼", "탑의 입구에 마법 골렘이 길을 막고 있다. 골렘은 수수께끼를 내고, 맞추면 길을 열어준다고 한다. 어떻게 수수께끼를 풀까?",
      opt('📚 골렘이 낸 수수께끼와 관련된 고대 문헌을 떠올려, 답을 찾는다.',{linguistic:14,logical:12}),
      opt('💬 골렘에게 끊임없이 질문하고, 대화의 논리적인 모순을 찾아낸다.',{logical:16,interpersonal:10}),
      opt('🤔 수수께끼의 의미를 내면적으로 성찰하고, 창의적인 답을 제시한다.',{intrapersonal:14,linguistic:10}),
      opt('💪 골렘의 동작과 외형을 분석하여, 어떤 유형의 수수께끼를 내는지 파악한다.',{bodily:12,spatial:8})
    ),
    q("별의 마법", "탑의 정상에 도착하자, 별들이 마법처럼 빛나고 있다. 이 별들의 힘을 어떻게 이용할까?",
      opt('✨ 별의 위치를 기록하고, 별자리의 힘을 이용한 새로운 마법을 창조한다.',{spatial:16,logical:12}),
      opt('🎶 별들이 내는 미세한 소리를 듣고, 우주의 멜로디를 음악으로 만든다.',{musical:16}),
      opt('🌌 별들의 빛을 흡수하여, 나의 마력을 강화한다.',{intrapersonal:14}),
      opt('💬 별의 언어를 해독하여, 별들이 전하는 메시지를 읽어낸다.',{linguistic:14,naturalist:12})
    ),
    q("마법사의 시험", "별들의 힘을 이용하자, 당신 앞에 고대의 마법사가 나타나 시험을 낸다. '가장 위대한 마법은 무엇인가?' 당신의 답은?",
      opt('❤️ '모두를 연결하고 공감하게 하는 마음의 마법입니다.'라고 답한다.',{interpersonal:16}),
      opt('✨ '자연의 순리를 이해하고, 자연의 힘을 다루는 마법입니다.'라고 답한다.',{naturalist:16}),
      opt('🎶 '아름다운 선율로 사람들의 마음을 치유하는 마법입니다.'라고 답한다.',{musical:16}),
      opt('🧠 '지식과 논리로 세상을 이해하고 문제를 해결하는 마법입니다.'라고 답한다.',{logical:16})
    ),
    q("마법 학파의 설립", "모든 시험을 통과하고 위대한 마법사가 된 당신. 이제 새로운 마법 학파를 설립해야 한다. 어떤 학파를 설립할 것인가?",
      opt('📜 고대의 주문과 새로운 언어를 결합한 언어 마법 학파를 설립한다.',{linguistic:16,logical:12}),
      opt('✨ 별자리와 지형을 이용한 공간 마법 학파를 설립한다.',{spatial:14,naturalist:12}),
      opt('🧘‍♀️ 자신의 내면을 탐구하여 마력을 이끌어내는 심리 마법 학파를 설립한다.',{intrapersonal:16,interpersonal:12}),
      opt('🎶 소리와 리듬을 이용하여 마법을 구사하는 음향 마법 학파를 설립한다.',{musical:14,logical:12})
    ),
    q("혼돈의 마법사", "당신의 명성을 시기한 혼돈의 마법사가 나타나, 당신의 학파를 위협한다. 어떻게 대응할 것인가?",
      opt('🗣️ 혼돈의 마법사에게 대화를 제안하고, 그의 진정한 의도를 파악한다.',{interpersonal:16,intrapersonal:12}),
      opt('⚔️ 강력한 공격 마법을 사용하여, 혼돈의 마법사를 물리친다.',{bodily:14,logical:10}),
      opt('🔮 혼돈의 마법에 대한 논리적인 방어 마법을 개발하여, 학파를 보호한다.',{logical:16,spatial:10}),
      opt('🎶 마음을 안정시키는 선율을 사용하여, 혼돈의 힘을 중화시킨다.',{musical:14,interpersonal:12})
    ),
    q("마법의 유물", "전쟁을 승리로 이끈 당신에게, 고대의 마법 유물이 주어진다. 어떤 유물을 선택할까?",
      opt('📚 모든 언어를 이해하게 해주는 마법의 펜', {linguistic:16}),
      opt('🧭 모든 길을 찾아주는 마법의 나침반', {spatial:16}),
      opt('🤝 모든 생명체의 마음을 읽는 마법의 거울', {interpersonal:16}),
      opt('🌿 모든 식물을 자라게 하는 마법의 씨앗', {naturalist:16})
    ),
    q("마법 학교", "당신은 후대의 마법사들을 양성할 마법 학교를 설립한다. 어떤 학생을 가르칠 것인가?",
      opt('📜 뛰어난 언어 능력으로 고대 문헌을 해독하는 학생', {linguistic:16,logical:12}),
      opt('🗺️ 미지의 세계를 탐험하고 새로운 지식을 찾는 학생', {spatial:16,bodily:12}),
      opt('❤️ 타인의 마음을 이해하고 공감하는 학생', {interpersonal:16,intrapersonal:12}),
      opt('🎶 자연의 소리를 음악으로 만들고, 마법을 구사하는 학생', {musical:14,naturalist:12})
    ),
    q("마지막 선택", "당신의 삶의 끝이 다가왔다. 당신은 마지막으로 한 가지 마법을 사용할 수 있다. 어떤 마법을 사용할 것인가?",
      opt('✨ 온 세상을 밝히는 영원한 빛의 마법을 사용한다.', {interpersonal:16,naturalist:16}),
      opt('🔮 모든 지식을 기록하고, 후대에게 전달하는 마법을 사용한다.', {logical:16,linguistic:16}),
      opt('🌳 모든 생명체와 소통하고, 자연을 치유하는 마법을 사용한다.', {naturalist:16,interpersonal:16}),
      opt('🎶 영원히 끝나지 않는 아름다운 선율을 만들어, 세상을 평화롭게 한다.', {musical:16,intrapersonal:16})
    ),
    q("위대한 마법사", "당신은 위대한 마법사로 역사에 기록되었다. 당신의 이야기는 어떻게 전해질까?",
      opt('📚 당신의 마법 이론과 지식이 담긴 책으로 전해진다.', {logical:16,linguistic:14}),
      opt('✨ 당신이 발견한 새로운 마법으로 인해 세상이 변화했다는 이야기로 전해진다.', {spatial:14,naturalist:14}),
      opt('❤️ 당신이 사람들에게 베푼 자비와 사랑이 담긴 이야기로 전해진다.', {interpersonal:16,intrapersonal:14}),
      opt('🔮 당신의 신비로운 능력과 업적이 담긴 전설로 전해진다.', {musical:14,bodily:12})
    ),
    q("도시의 위협", "당신이 머무는 도시가 정체불명의 괴물에게 위협받고 있다. 어떻게 할 것인가?",
      opt('⚔️ 강력한 공격 마법을 사용하여 괴물을 물리친다.',{bodily:16,logical:12}),
      opt('🗺️ 괴물의 행동 패턴과 이동 경로를 분석하여, 도시의 약점을 파악하고 방어 전략을 세운다.',{spatial:14,logical:16}),
      opt('🤝 도시 사람들을 안심시키고, 모두의 힘을 모아 괴물에 맞선다.',{interpersonal:16,intrapersonal:14}),
      opt('🌿 괴물의 생태를 연구하여, 괴물을 물리칠 방법을 찾아낸다.',{naturalist:14,linguistic:12})
    ),
    q("기억의 마법", "괴물과의 싸움으로 파괴된 도시를 복구하기 위해, 당신은 '기억의 마법'을 사용한다. 이 마법은 어떤 방식으로 작동할까?",
      opt('🔮 파괴된 도시의 모습을 기억하고, 그 기억을 현실로 구현한다.',{spatial:16,intrapersonal:12}),
      opt('🎶 도시 사람들의 기억 속에 남아있는 아름다운 멜로디를 사용하여, 도시를 복구한다.',{musical:14,interpersonal:12}),
      opt('📜 파괴된 도시의 모습을 고대 문헌에 기록하고, 후대에게 교훈을 남긴다.',{linguistic:14,logical:10}),
      opt('❤️ 도시 사람들의 상실감에 공감하고, 그들의 마음을 치유한다.',{interpersonal:16,intrapersonal:14})
    ),
    q("자연의 균형", "당신은 자연의 균형이 무너지고 있음을 알게 된다. 어떻게 이 문제를 해결할까?",
      opt('🌳 자연의 힘을 복원시키는 마법을 사용하여, 균형을 되찾는다.',{naturalist:16}),
      opt('📜 자연의 언어를 해독하여, 자연의 문제를 직접 듣고 해결한다.',{linguistic:14,interpersonal:12}),
      opt('📊 자연의 변화를 논리적으로 분석하고, 과학적인 해결책을 제시한다.',{logical:16,spatial:12}),
      opt('🧘‍♀️ 자연과 하나가 되는 명상을 통해, 자연의 에너지를 회복시킨다.',{intrapersonal:14,musical:10})
    ),
    q("마법의 노래", "당신은 자연의 균형을 되찾기 위해 '마법의 노래'를 만든다. 이 노래는 어떤 힘을 가지고 있을까?",
      opt('🎶 듣는 이의 마음을 평화롭게 하고, 자연의 기운을 회복시킨다.', {musical:16,intrapersonal:14}),
      opt('💬 자연의 언어로 이루어져, 모든 생명체와 소통하게 해준다.', {linguistic:14,naturalist:12}),
      opt('✨ 별자리의 힘을 이용하여, 자연의 순환을 되살린다.', {spatial:14,logical:12}),
      opt('❤️ 사람들의 마음을 하나로 모아, 자연을 보호하려는 의지를 심어준다.', {interpersonal:16,bodily:12})
    ),
    q("공존의 길", "당신은 자연과 인간이 공존하는 새로운 길을 제시한다. 어떤 길을 제시할 것인가?",
      opt('🤝 자연과 인간이 협력하여, 서로의 약점을 보완하는 길', {interpersonal:16,logical:12}),
      opt('🌱 자연의 힘을 이용하여, 인간의 삶을 풍요롭게 하는 길', {naturalist:16,bodily:14}),
      opt('📜 자연의 지혜를 담은 책을 만들어, 후대에게 전하는 길', {linguistic:14,intrapersonal:12}),
      opt('🧘‍♀️ 인간의 내면을 성찰하여, 자연과 하나가 되는 길', {intrapersonal:16,spatial:12})
    ),
    q("마법의 결실", "당신의 노력 덕분에 자연과 인간은 조화롭게 공존하게 되었다. 당신의 가장 큰 결실은 무엇일까?",
      opt('🌳 당신이 만든 마법의 숲이 영원히 번영한다.', {naturalist:16,spatial:14}),
      opt('💖 당신의 마법으로 인해 모든 이들이 행복해졌다.', {interpersonal:16,musical:14}),
      opt('💡 당신의 지혜가 담긴 마법이 모든 이들에게 전해졌다.', {logical:16,linguistic:14}),
      opt('🧘‍♀️ 당신이 이룩한 내면의 평화가 모든 이들에게 영감을 준다.', {intrapersonal:16,bodily:12})
    ),
    q("마법의 축복", "당신은 모든 생명체로부터 존경과 사랑을 받는다. 당신이 내리는 마지막 축복은 무엇일까?",
      opt('✨ 모든 이들이 자신의 내면의 빛을 찾게 되는 축복', {intrapersonal:16}),
      opt('❤️ 모든 이들이 서로를 사랑하고 공감하게 되는 축복', {interpersonal:16}),
      opt('📚 모든 이들이 지혜와 지식을 얻게 되는 축복', {logical:16}),
      opt('🎶 모든 이들이 아름다운 음악을 만들고 즐기게 되는 축복', {musical:16})
    ),
    q("마법의 유산", "당신은 세상을 떠나지만, 당신의 마법은 영원히 남는다. 당신의 유산은 어떻게 기억될까?",
      opt('📜 당신의 마법 이론과 주문이 담긴 책으로 전해진다.', {linguistic:16}),
      opt('🌳 당신이 만들었던 자연의 공간들이 영원히 존재한다.', {naturalist:16}),
      opt('✨ 당신이 만들었던 빛의 마법이 밤하늘을 수놓는다.', {spatial:16}),
      opt('❤️ 당신의 사랑과 지혜가 담긴 이야기가 세대를 거쳐 전해진다.', {interpersonal:16})
    )
  ]
};

// 퀘스트 진행
function showQuest(quest) {
    el('quest-title').innerText = quest.title;
    el('quest-text').innerText = quest.text;
    const optionsEl = el('options');
    optionsEl.innerHTML = '';
    quest.options.forEach((option, index) => {
        const optionEl = document.createElement('div');
        optionEl.className = 'option';
        optionEl.innerHTML = `<span class="label">선택 ${index + 1}:</span> ${option.t}`;
        optionEl.addEventListener('click', () => handleOption(option));
        optionsEl.appendChild(optionEl);
    });
    sounds.turn.play().catch(e => console.log("효과음 자동재생이 차단되었습니다."));
}

function handleOption(option) {
    for (const key in option.e) {
        if (scores.hasOwnProperty(key)) {
            scores[key] += option.e[key];
        }
    }
    
    currentQuestIndex++;
    if (currentQuestIndex < questLine.length) {
        showQuest(questLine[currentQuestIndex]);
    } else {
        showResult();
    }
    updateStats();
}

function updateStats() {
    const root = el('stats');
    root.innerHTML = '';
    Object.entries(scores).forEach(([k, score]) => {
        const box = document.createElement('div');
        box.className = 'stat';
        box.innerHTML = `
            <div style="font-weight:bold;color:var(--gold)">${mapNamesForStats[k]}</div>
            <div class="bar"><div class="bar-inner" style="width:${score}%;background-color:var(--gold)"></div></div>
        `;
        root.appendChild(box);
    });
}

function showResult() {
    el('game-area').style.display = 'none';
    el('stats-panel').style.display = 'none';
    el('result-area').style.display = 'block';

    const entries = Object.entries(scores).sort((a,b)=>b[1]-a[1]);
    const top1 = entries[0][0];
    const top2 = entries[1][0];
    
    const resultHTML = `
        <h3>📜 모험의 결과</h3>
        <p><strong>${player.name}</strong>(${player.class})님은<br><strong>${mapNames[top1]}</strong>와 <strong>${mapNames[top2]}</strong>을(를) 기반으로 하는 능력이 뛰어납니다. 
        <br>고대의 부름에 응답하여 당신이 찾아낸 능력은<br>
        <br><strong>1위: ${mapNames[top1]}</strong><br>
        <strong>2위: ${mapNames[top2]}</strong><br>
        <br>당신의 여정은 이제 시작입니다. 이 결과를 바탕으로 당신의 강점을 더욱 발전시켜 보세요!</p>
    `;
    el('result-content').innerHTML = resultHTML;
}

function checkStartButton() {
    const nameInput = el('input-name').value.trim();
    const classInput = el('input-class').value.trim();
    const startButton = el('btn-start');
    if (nameInput && classInput && player.companion) {
        startButton.disabled = false;
    } else {
        startButton.disabled = true;
    }
}

function selectCompanion(e) {
    const chars = document.querySelectorAll('.char');
    chars.forEach(char => char.classList.remove('selected'));
    const selectedChar = e.currentTarget;
    selectedChar.classList.add('selected');
    player.companion = selectedChar.dataset.id;
    checkStartButton();
}

function startGame() {
    player.name = el('input-name').value.trim();
    player.class = el('input-class').value.trim();
    if (!player.name || !player.class || !player.companion) {
        return;
    }
    
    // 게임 상태 초기화
    scores = { linguistic: 0, logical: 0, spatial: 0, bodily: 0, musical: 0, interpersonal: 0, intrapersonal: 0, naturalist: 0 };
    currentQuestIndex = 0;
    questLine = quests[player.companion];

    // 화면 전환
    el('pre-game').style.display = 'none';
    el('game-area').style.display = 'block';
    el('stats-panel').style.display = 'block';
    el('result-area').style.display = 'none';

    // 첫 번째 퀘스트 시작
    showQuest(questLine[currentQuestIndex]);
    updateStats();
}

function restartGame() {
    el('pre-game').style.display = 'block';
    el('game-area').style.display = 'none';
    el('stats-panel').style.display = 'none';
    el('result-area').style.display = 'none';
    el('input-name').value = '';
    el('input-class').value = '';
    document.querySelectorAll('.char').forEach(char => char.classList.remove('selected'));
    player.companion = null;
    checkStartButton(); // 재시작 후에도 버튼 상태 확인
}

// 이벤트 리스너
el('input-name').addEventListener('input', checkStartButton);
el('input-class').addEventListener('input', checkStartButton);
document.querySelectorAll('.char').forEach(char => {
    char.addEventListener('click', selectCompanion);
});
el('btn-start').addEventListener('click', startGame);
el('btn-restart').addEventListener('click', restartGame);
</script>
</body>
</html>
