<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>📜 다중지능 탐험: 고대의 부름 (버그 최종 수정판)</title>
<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline' https://cdn.pixabay.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; media-src https://cdn.pixabay.com;">
<link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Cinzel:wght@700&display=swap" rel="stylesheet">
<style>
:root{ --brown-text: #4a3a2a; --gold: #c89a4b; }
*{box-sizing:border-box}

body{
    margin:0;
    font-family: 'Gowun Dodum', serif;
    background: linear-gradient(170deg, #0d1117 0%, #1e2c40 50%, #161b22 100%);
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 20px;
}

.wrap{ width:100%; max-width:1200px; }

.header{
    text-align: center;
    margin-bottom: 20px;
    animation: fadeInDown 1s ease-out;
}
.title{
    font-family: 'Cinzel', serif;
    font-size: 3rem;
    color: var(--gold);
    text-shadow: 2px 2px 8px rgba(0,0,0,0.8);
}
.subtitle{ font-family: 'Gowun Dodum'; opacity:0.9; font-size: 1.2rem; color: #f0f0f0; }

.layout{ display:flex; gap:20px; }
.left, .right{ transition: all 0.5s ease-out; }

/* ✨✨✨ 버그 수정의 핵심 부분 ✨✨✨ */
.left{
    width:360px;
    animation: fadeInLeft 1s ease-out;
    position: relative; /* z-index 적용을 위해 position 속성 추가 */
    z-index: 10;       /* right 영역보다 항상 위에 있도록 설정 */
}
.right{
    flex:1;
    animation: fadeInRight 1s ease-out;
    position: relative;
    z-index: 5;
}
/* ✨✨✨ 여기까지가 수정의 핵심입니다 ✨✨✨ */


.card{
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(8px);
    border-radius:16px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    border: 1px solid rgba(255,215,102,0.15);
}

.char-row{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
.char{
    padding:10px;
    border-radius:10px;
    background:rgba(0,0,0,0.3);
    text-align:center;
    cursor:pointer;
    border: 2px solid transparent;
    transition: all 0.3s ease;
}
.char:hover{ transform:translateY(-5px); background:rgba(0,0,0,0.5); border-color: var(--gold); }
.char .emoji{ font-size:44px; filter: drop-shadow(0 0 5px rgba(0,0,0,0.5)); }
.char .name{ color:var(--gold); font-weight:bold; }
.char.selected{
    background:rgba(200,154,75,0.3);
    border-color: var(--gold);
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 0 15px rgba(200, 154, 75, 0.5);
}

label{ display:block; color:var(--gold); font-weight:700; margin-bottom:6px; }
input[type=text]{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:1px solid rgba(255,215,102,0.2);
    background:rgba(0,0,0,0.3);
    color:#fff;
    margin-bottom:10px;
    font-family: 'Gowun Dodum', serif;
}
.btn{
    display:inline-flex;
    gap:8px;
    align-items:center;
    justify-content:center;
    padding:12px 16px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    background:linear-gradient(145deg, #b38645, #835e2c);
    color:#fff;
    font-weight:bold;
    box-shadow: 0 5px 15px rgba(0,0,0,0.4);
    width: 100%;
    font-family: 'Gowun Dodum', serif;
    font-size: 1rem;
    transition: all 0.2s ease;
}
.btn:hover {
    transform: scale(1.02);
}
.btn:disabled {
    background: #555;
    cursor: not-allowed;
    opacity: 0.6;
    transform: scale(1);
    box-shadow: none;
}

#game-card {
    background: linear-gradient(150deg, #f5eadd 0%, #e8d9c2 100%);
    box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
    color: var(--brown-text);
    padding: 50px 60px;
    min-height: 550px;
    position: relative;
    border-radius: 8px;
}
.quest-header { text-align: center; margin-bottom: 20px; }
.quest-header h3 { font-family: 'Cinzel', serif; color: #6a4a2a; margin: 0; font-size: 1.5rem;}
.quest-text { font-size:1.2rem; line-height:1.8; min-height: 100px; }
.options{ display:grid; grid-template-columns:1fr; gap:12px; margin-top:20px; }
.option{
    padding:12px;
    border-radius:10px;
    background:rgba(189, 168, 133, 0.3);
    cursor:pointer;
    border:1px solid rgba(112, 83, 48, 0.3);
    transition: all .2s ease;
}
.option:hover{ transform: scale(1.03); background:rgba(189, 168, 133, 0.5); border-color: var(--brown-text); }
.option .label{ font-weight:bold; }

.stats-grid{ display:grid; grid-template-columns:repeat(4,1fr); gap:8px; margin-top:12px; color: #fff;}
.stat{ background:rgba(0,0,0,0.3); padding:8px; border-radius:8px; text-align:center; }
.bar{ height:10px; background:rgba(255,255,255,0.1); border-radius:6px; margin-top:8px; overflow:hidden; }
.bar-inner{ height:100%; background:linear-gradient(90deg,var(--gold),#e6b873); width:0%; transition:width .6s; }

.result-content { color: var(--brown-text); text-align: center; }
.result-content h3 { font-family: 'Cinzel', serif; color: #6a4a2a; }

@keyframes fadeInDown { 0% { opacity:0; transform: translateY(-30px); } 100% { opacity:1; transform: translateY(0); } }
@keyframes fadeInLeft { 0% { opacity:0; transform: translateX(-50px); } 100% { opacity:1; transform: translateX(0); } }
@keyframes fadeInRight { 0% { opacity:0; transform: translateX(50px); } 100% { opacity:1; transform: translateX(0); } }

@media(max-width:900px){ .layout{flex-direction:column} .left{width:100%} }
</style>
</head>
<body>

<audio id="bgm" src="https://cdn.pixabay.com/audio/2022/08/04/audio_2dde649a33.mp3" loop></audio>
<audio id="sfx-turn" src="https://cdn.pixabay.com/audio/2022/03/15/audio_731c045b61.mp3"></audio>

<div class="wrap">
  <div class="header">
    <div class="title">Ancient Calling</div>
    <div class="subtitle">나의 다중지능을 찾아 떠나는 모험</div>
  </div>

  <div class="layout">
    <div class="left">
      <div class="card">
        <label>모험가 이름</label>
        <input id="input-name" type="text" placeholder="예: 김민준" />
        <label>소속 (반)</label>
        <input id="input-class" type="text" placeholder="예: 1학년 3반" />
        <label>여정을 함께할 동료</label>
        <div id="char-row" class="char-row">
          <div class="char" data-id="prince"><div class="emoji">🤴</div><div class="name">용감한 왕자</div></div>
          <div class="char" data-id="princess"><div class="emoji">👸</div><div class="name">지혜로운 공주</div></div>
          <div class="char" data-id="warrior"><div class="emoji">⚔️</div><div class="name">강인한 전사</div></div>
          <div class="char" data-id="wizard"><div class="emoji">🔮</div><div class="name">신비한 마법사</div></div>
        </div>
        <div style="margin-top:20px;">
          <button id="btn-start" class="btn" disabled>▶ 모험 시작하기</button>
        </div>
      </div>

      <div id="stats-panel" class="card" style="margin-top:12px; display:none;">
         <div id="stats" class="stats-grid"></div>
      </div>
    </div>

    <div class="right">
      <div id="game-card" class="card">
        <div id="pre-game">
          <div style="text-align:center; padding-top: 80px;">
            <h3 style="font-family:'Cinzel', serif; color: var(--brown-text);">📜 모험의 서막</h3>
            <p style="font-size: 1.1rem; line-height: 1.8;">이름과 소속을 적고, 여정을 함께할 동료를 선택하세요.<br>당신의 선택이 모여 미래의 길을 밝혀줄 것입니다.<br>이제, 고대의 부름에 응답할 시간입니다.</p>
          </div>
        </div>

        <div id="game-area" style="display:none">
          <div class="quest-header">
            <h3 id="quest-title"></h3>
          </div>
          <div id="quest-text" class="quest-text"></div>
          <div id="options" class="options"></div>
        </div>
        
        <div id="result-area" style="display:none; padding-top: 50px;">
          <div class="result-content" id="result-content"></div>
          <button id="btn-restart" class="btn" style="max-width:300px; margin: 20px auto 0;">🔄 새로운 모험 시작하기</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// DOM 요소 가져오기
const el = id => document.getElementById(id);

// 게임 변수
let player = {
    name: '',
    class: '',
    companion: null
};
let scores = {
    linguistic: 0,
    logical: 0,
    spatial: 0,
    bodily: 0,
    musical: 0,
    interpersonal: 0,
    intrapersonal: 0,
    naturalist: 0
};
let currentQuestIndex = 0;
let questLine = null;

// 사운드 객체
const sounds = {
    bgm: document.getElementById('bgm'),
    turn: document.getElementById('sfx-turn'),
};
sounds.bgm.volume = 0.2; // BGM 볼륨 조절

document.body.addEventListener('click', () => {
    if (sounds.bgm.paused) {
        sounds.bgm.play().catch(e => console.log("BGM 자동재생이 차단되었습니다."));
    }
}, { once: true });


/* ====== 퀘스트 데이터 (전체 80개) ====== */
function q(title, text, a, b, c, d){ return { title, text, options:[a,b,c,d] }; }
function opt(text, effects){ return {t:text, e:effects}; }

const quests = {
  // Prince Questline (20 Quests)
  prince: [
    q("왕의 서신", "먼지 쌓인 서고에서 아버지의 흔적이 담긴 낡은 편지를 발견했다. '진정한 왕의 자격은 왕관이 아닌, 백성을 비추는 빛에 있나니. 그 빛을 따라가거라.' 이 수수께끼 같은 유언의 실마리는 어디서부터 찾아야 할까?",
      opt('📜 편지에 쓰인 단어들의 상징적 의미를 파고들어 분석한다.',{linguistic:14}),
      opt('🗺️ 편지에 남은 희미한 지도의 흔적을 따라 직접 현장으로 향한다.',{bodily:12,spatial:6}),
      opt('👥 편지를 마지막으로 만졌을 법한 왕궁의 오랜 신하를 찾아가 대화한다.',{interpersonal:12,logical:6}),
      opt('🌿 편지지에서 희미하게 나는 풀 향기를 단서로, 특정 지역의 식생를 조사한다.',{naturalist:8,spatial:6})
    ),
    q("시장의 현자", "시장에 도착하자, 한 노인이 당신을 알아보고 다가와 속삭였다. '왕께서 찾던 빛은 북쪽 숲의 심장, 가장 오래된 고목에서 나온다네.' 그의 말을 어떻게 받아들여야 할까?",
      opt('💬 노인의 이야기에 진심으로 감사하며, 숲에 대한 다른 전설은 없는지 묻는다.',{interpersonal:12,linguistic:6}),
      opt('🧭 즉시 숲으로 달려가기보다, 먼저 도서관에서 북쪽 숲에 대한 자료를 찾아본다.',{logical:12,linguistic:6}),
      opt('🤝 탐험대를 꾸려 함께 숲으로 떠난다. 여러 눈으로 보는 것이 더 정확할 것이다.',{interpersonal:12,bodily:6}),
      opt('🌲 그의 말이 사실인지 확인하기 위해, 즉시 혼자서 숲의 고목을 찾아 나선다.',{bodily:12,naturalist:6})
    ),
    q("별자리石", "숲길을 걷다, 이끼 낀 바위 위에 고대의 별자리와 닮은 문양이 새겨진 돌을 발견했다. 이 돌은 무엇을 의미할까?",
      opt('✍️ 문양을 양피지에 똑같이 베껴 그리고, 각 상징의 의미를 추론해본다.',{linguistic:12,spatial:4}),
      opt('⭐ 밤하늘의 실제 별자리와 돌의 문양을 대조하여 방향을 찾는다.',{spatial:14,naturalist:4}),
      opt('🪨 돌 주변의 흙과 식물을 관찰하여, 이 돌이 언제부터 이곳에 있었는지 추정한다.',{naturalist:12,logical:4}),
      opt('🤔 잠시 명상에 잠겨, 이 문양이 나에게 어떤 영감을 주는지 내면의 소리에 귀 기울인다.',{intrapersonal:12})
    ),
    q("숲의 울림", "밤이 되자 숲 속에서 규칙적인 북소리 같은 울림이 들려온다. 불안해하는 동료들 사이에서, 당신은 어떻게 행동할까?",
      opt('🎶 울림의 박자와 리듬을 분석하여, 그것이 인공적인 신호인지 자연적인 소리인지 판단한다.',{musical:14,logical:4}),
      opt('🏕️ 즉시 안전한 야영지를 구축하고, 교대로 불침번을 서며 동료들을 안심시킨다.',{bodily:12,interpersonal:8}),
      opt('🤫 소리의 근원지를 향해 조심스럽게 다가가, 정체가 무엇인지 직접 확인한다.',{bodily:12,spatial:4}),
      opt('🤝 동료들을 모아 각자의 의견을 듣고, 다 함께 다음 행동을 결정한다.',{interpersonal:14})
    ),
    q("고목의 비문", "마침내 거대한 고목을 찾았다. 그 앞에는 글자가 거의 지워진 낡은 비문이 서 있다. '오직 [■■] 자만이 빛을 보리라.' 비문의 내용을 어떻게 알아낼까?",
      opt('🔎 남아있는 글자의 형태와 조각들을 조합하여 사라진 단어를 추리한다.',{linguistic:14}),
      opt('📜 주변에서 비문과 비슷한 시대의 다른 유적을 찾아, 사용된 언어의 패턴을 비교 분석한다.',{logical:10,spatial:6}),
      opt('🖐️ 비문 표면을 손으로 직접 문질러, 마모된 글자의 흔적을 감각으로 읽어낸다.',{bodily:12,naturalist:4}),
      opt('❓ '만약 내가 비문을 세웠다면 어떤 단어를 썼을까?' 스스로 질문하며 답을 찾는다.',{intrapersonal:12,linguistic:4})
    ),
    q("가뭄의 마을", "숲을 나오자 극심한 가뭄으로 고통받는 마을을 마주쳤다. 물을 찾아달라는 마을 사람들의 간절한 눈빛을 외면할 수 없다. 어떻게 그들을 도울까?",
      opt('🌊 주변 지형을 정밀하게 분석하여, 지하 수맥이 있을 만한 곳을 찾아낸다.',{logical:12,spatial:8}),
      opt('💪 마을 사람들을 조직하고 격려하며, 다 함께 우물을 파는 작업에 직접 참여한다.',{interpersonal:14,bodily:6}),
      opt('🌱 가뭄에도 잘 자라는 식물들을 추적하여, 물이 있는 곳의 단서를 찾는다.',{naturalist:12}),
      opt('🗣️ 물 분배 문제로 다투는 마을 사람들을 중재하고, 모두가 합의할 규칙을 만든다.',{interpersonal:14,linguistic:6})
    ),
    q("광장의 노래", "마을 광장에서 한 음유시인이 '빛을 잃은 왕관'에 대한 노래를 부르고 있다. 가사 속에 중요한 단서가 있을지도 모른다.",
      opt('🎼 노래의 가사 하나하나를 빠짐없이 기록하고, 그 안에 숨겨진 은유를 분석한다.',{linguistic:12,musical:6}),
      opt('😊 노래가 끝난 후, 음유시인에게 다가가 그의 이야기에 깊은 관심을 보이며 추가 정보를 얻는다.',{interpersonal:12}),
      opt('🗺️ 노래에 묘사된 '세 개의 봉우리'나 '붉은 강' 같은 지형을 지도에서 찾아본다.',{spatial:12}),
      opt('🎵 가사보다는 노래의 슬픈 멜로디에 집중하여, '잃어버린 왕관'의 감정적 의미를 파악한다.',{musical:12,intrapersonal:4})
    ),
    q("국경의 의심", "단서를 따라 도착한 국경 요새. 하지만 수비대는 당신의 신분을 의심하며 길을 열어주지 않는다. 어떻게 이 상황을 해결할까?",
      opt('👑 나의 신분과 여정의 목적을 논리정연하고 설득력 있게 설명하여 신뢰를 얻는다.',{linguistic:14,interpersonal:6}),
      opt('🛡️ 수비대의 경계심을 이해한다고 말하며, 그들의 임무를 존중하는 태도를 보인다.',{interpersonal:16}),
      opt('🔍 지금까지 모아온 증거물(편지, 지도 조각 등)을 제시하여 나의 주장을 증명한다.',{logical:12}),
      opt('⏳ 당장 통과하려 하지 않고, 요새 밖에서 머물며 그들이 마음을 열 때까지 기다린다.',{intrapersonal:12})
    ),
    q("왕의 시험", "마침내 왕 앞에 선 당신. 그는 시험하듯 묻는다. '백성의 행복과 왕국의 안정, 둘 중 하나만 택해야 한다면 무엇을 택하겠는가?' 당신의 답은?",
      opt('💬 '백성의 행복이 곧 왕국의 가장 튼튼한 기반입니다.'라고 답하며 구체적인 정책을 제시한다.',{interpersonal:16,linguistic:6}),
      opt('⚖️ '안정 없는 행복은 신기루와 같으니, 먼저 튼튼한 방벽을 쌓겠습니다.'라고 답한다.',{logical:14,bodily:6}),
      opt('❓ '그 둘은 분리될 수 없습니다. 왜 그런 선택을 해야만 하는가?' 스스로 되묻는다.',{intrapersonal:12,logical:8}),
      opt('🎨 '교육과 예술을 통해 백성들의 마음을 풍요롭게 하는 것이 장기적인 안정의 길입니다.'라고 답한다.',{linguistic:12,musical:4})
    ),
    q("고대의 장치", "왕이 인정한 당신에게 마지막 장소의 지도가 주어진다. 그곳엔 복잡한 고대 장치가 잠들어 있다. 어떻게 작동시킬까?",
      opt('⚙️ 톱니바퀴와 문양들의 관계를 분석하여, 장치의 논리적인 작동 원리를 파악한다.',{logical:14,spatial:6}),
      opt('✋ 장치의 여러 부분을 직접 만지고 움직여보며, 물리적인 반응을 통해 해법을 찾는다.',{bodily:12}),
      opt('🔊 장치에서 주기적으로 들려오는 미세한 소리의 높낮이와 패턴에서 단서를 찾는다.',{musical:12}),
      opt('🌿 장치 주변에만 자라는 특이한 식물이나 이끼를 통해, 장치의 에너지원을 추측한다.',{naturalist:12})
    ),
    q("길 잃은 아이", "장치를 작동시키자 새로운 길이 열렸다. 하지만 그 길목에서, 겁에 질려 울고 있는 한 아이를 발견했다. 어떻게 할 것인가?",
      opt('❤️ 아이의 눈높이에 맞춰 앉아, 부드러운 목소리로 안심시키며 무슨 일이 있었는지 들어준다.',{interpersonal:14}),
      opt('👣 아이가 걸어온 방향의 발자국이나 흔적을 찾아, 부모를 찾을 단서를 수집한다.',{spatial:12,naturalist:8}),
      opt('🎵 아이의 긴장을 풀어주기 위해, 재미있는 노래를 불러주거나 작은 놀이를 함께 한다.',{musical:10,interpersonal:6}),
      opt('🤔 일단 아이를 안전한 곳으로 데려간 뒤, 침착하게 아이를 찾을 최선의 방법을 계획한다.',{logical:12,intrapersonal:6})
    ),
    q("마지막 문", "마침내 빛의 신전, 마지막 문 앞에 섰다. 문에는 네 종류의 기념물을 올릴 제단이 있다. 올바른 순서를 어떻게 알아낼까?",
      opt('📜 제단에 새겨진 고대 문자의 의미를 해석하여, 올바른 순서를 알아낸다.',{linguistic:16}),
      opt('✨ 각 기념물이 내뿜는 미세한 에너지의 강도와 파장을 분석하여 순서를 맞춘다.',{logical:14,naturalist:6}),
      opt('🎶 기념물들을 두드렸을 때 나는 소리의 조화를 통해 올바른 순서를 찾는다.',{musical:14}),
      opt('🙏 눈을 감고 각 제단 앞에 서서, 마음이 가장 평온해지는 순서를 따른다.',{intrapersonal:14})
    ),
    q("무너지는 신전", "문을 열고 빛을 마주한 순간, 신전이 흔들리며 무너지기 시작한다. 어떻게 이곳을 탈출할 것인가?",
      opt('🗺️ 신전의 구조를 빠르게 파악하고, 가장 안전하고 효율적인 탈출로를 계획한다.',{spatial:14,logical:6}),
      opt('🤝 함께 온 동료들을 먼저 챙기고, 서로 도우며 질서정연하게 대피시킨다.',{interpersonal:16}),
      opt('🏃 떨어지는 석상과 장애물들을 민첩하게 피하며, 가장 빠르게 출구를 향해 달린다.',{bodily:14}),
      opt('🧘‍ 무너지는 상황 속에서도, 두려움에 휩쓸리지 않고 침착하게 최선의 판단을 내린다.',{intrapersonal:14})
    ),
    q("왕국으로의 귀환", "무사히 귀환한 당신. 백성들은 당신을 새로운 영웅으로 환호한다. 그들의 신뢰에 어떻게 보답하겠는가?",
      opt('🎤 광장에 서서 나의 모험 이야기를 들려주며, 백성들에게 희망과 용기를 불어넣는다.',{linguistic:14,interpersonal:6}),
      opt('🛠️ 가장 피해가 컸던 지역으로 달려가, 백성들과 함께 땀 흘리며 재건 작업을 돕는다.',{bodily:12,interpersonal:8}),
      opt('🎉 모두가 참여하는 성대한 축제를 열어, 백성들의 지친 마음을 위로하고 화합을 도모한다.',{interpersonal:14,musical:6}),
      opt('🏞️ 왕국의 황폐해진 숲과 강을 되살리는 환경 보존 프로젝트를 발표한다.',{naturalist:12,spatial:6})
    ),
    q("이웃 나라와의 분쟁", "평화도 잠시, 이웃 나라가 국경 지역의 영유권을 주장하며 분쟁이 발생했다. 어떻게 이 위기를 해결하겠는가?",
      opt('✉️ 감정적인 비난 대신, 상호 존중의 원칙을 담은 평화 협상 제안서를 보낸다.',{linguistic:14,interpersonal:6}),
      opt('📊 분쟁 지역의 역사적 자료와 지리적 데이터를 철저히 분석하여 협상의 근거를 마련한다.',{logical:14}),
      opt('🤝 직접 이웃 나라의 대표를 만나, 형식적인 회담이 아닌 진솔한 대화로 해법을 모색한다.',{interpersonal:16}),
      opt('🛡️ 국경 지역의 방어 태세를 강화하되, 먼저 공격하지는 않겠다는 원칙을 분명히 한다.',{bodily:12,logical:6})
    ),
    q("새로운 시대의 설계", "이제 당신은 왕국의 미래를 설계할 위치에 섰다. 어떤 왕국을 만들고 싶은가?",
      opt('🏛️ 모든 백성이 자유롭게 배우고 토론할 수 있는 도서관과 아카데미를 세운다.', {linguistic:14, logical:6}),
      opt('🌳 인간과 자연이 조화롭게 공존하는, 지속 가능한 친환경 도시를 건설한다.', {naturalist:14, spatial:6}),
      opt('🎭 예술가들이 마음껏 창작하고, 시민들이 문화를 즐기는 예술의 중심지를 만든다.', {musical:12, interpersonal:8}),
      opt('❤️ 사회적 약자를 보호하고, 모든 구성원이 존중받는 복지 국가의 기틀을 마련한다.', {interpersonal:16, intrapersonal:6})
    ),
    q("진정한 '빛'", "모든 여정을 마친 당신은 깨닫는다. 아버지가 말한 진정한 '빛'이란 무엇이었을까?",
      opt('💡 그것은 한 사람의 영웅이 아닌, 모든 백성의 마음속에 있는 선한 의지였음을.', {interpersonal:16}),
      opt('🌟 그것은 위기 속에서도 길을 찾는 지혜와 통찰력이었음을.', {logical:14, intrapersonal:6}),
      opt('✨ 그것은 다음 세대에게 더 나은 세상을 물려주려는 희망 그 자체였음을.', {linguistic:12, naturalist:6}),
      opt('💖 결국 모든 해답은 내 안의 신념과 용기 속에 있었음을.', {intrapersonal:16, bodily:6})
    ),
    q("왕관의 무게", "왕관을 물려받는 날, 당신의 마음은 어떠한가?",
      opt('👑 "나의 말 한마디가 역사가 될 것이니, 신중하게 소통하겠다."',{linguistic:14, interpersonal:6}),
      opt('⚖️ "공정한 법과 질서를 세워 흔들리지 않는 왕국을 만들겠다."',{logical:14}),
      opt('🧘 "권력에 취하지 않도록, 끊임없이 나 자신을 성찰하겠다."',{intrapersonal:16}),
      opt('🌍 "백성들의 목소리를 직접 듣기 위해, 가장 낮은 곳으로 향하겠다."',{interpersonal:14, bodily:6})
    ),
    q("대관식 연설", "왕위에 오르며 백성들 앞에 선 당신. 어떤 말로 새로운 시대의 시작을 알리겠는가?",
      opt('📜 "여러분과 함께 써 내려갈 위대한 역사의 첫 장을 지금 시작하겠습니다!"',{linguistic:16}),
      opt('🤝 "나는 여러분의 왕이 아닌, 여러분과 함께 걷는 동반자가 되겠습니다!"',{interpersonal:16}),
      opt('🌱 "겨울이 가면 봄이 오듯, 이제 우리 왕국에 새로운 희망의 씨앗을 심겠습니다!"',{naturalist:14}),
      opt('💪 "말로만 하는 정치가 아닌, 행동으로 증명하는 군주가 되겠습니다!"',{bodily:14})
    ),
    q("나의 이야기", "훗날, 당신의 이야기는 어떤 통치자로 역사에 기록되길 바라는가?",
      opt('🧠 "지혜로운 해결사, '현왕(賢王)'"',{logical:14, intrapersonal:6}),
      opt('❤️ "백성의 아버지, '성군(聖君)'"',{interpersonal:16}),
      opt('✍️ "문화의 부흥을 이끈, '문화 군주'"',{linguistic:14, musical:6}),
      opt('🛡️ "왕국을 굳건히 지켜낸, '수호 군주'"',{bodily:14, spatial:6})
    )
  ],

  // Princess Questline (20 Quests)
  princess: [
    q("비밀의 지도", "어릴 적, 할머니께서 '세상을 밝힐 영원의 빛'이 숨겨진 곳이라며 낡은 지도를 주셨다. 이제 그 의미를 찾아 떠날 시간. 지도의 첫 번째 표식은 '고요의 정원'을 가리키고 있다. 어떻게 그곳을 찾아갈까?",
      opt('📜 지도의 고대 상형문자를 해독하여 정확한 위치를 파악한다.',{linguistic:14}),
      opt('🧭 지도의 지형과 실제 산맥의 흐름을 대조하며 길을 찾는다.',{spatial:14}),
      opt('🗣️ '고요의 정원'에 대한 전설을 아는 마을 현자를 찾아가 조언을 구한다.',{interpersonal:12}),
      opt('🌸 지도에 그려진 특별한 꽃을 찾아, 그 꽃이 피는 곳으로 향한다.',{naturalist:12})
    ),
    q("고요의 정원", "정원은 아름답지만, 슬픔에 잠긴 정원사가 길을 막아선다. '정원의 조화가 깨져 노래하는 꽃이 시들었어요.' 꽃을 다시 노래하게 만들 방법은 무엇일까?",
      opt('🎶 꽃들이 좋아했던 오래된 자장가를 불러주어 마음을 달랜다.',{musical:14, interpersonal:6}),
      opt('💧 토양의 성분과 물의 흐름을 분석하여, 시든 원인을 과학적으로 찾아낸다.',{logical:12, naturalist:6}),
      opt('💬 정원사의 슬픈 이야기에 귀 기울이며, 그의 마음을 먼저 위로해준다.',{interpersonal:14}),
      opt('🧘‍ 정원 한가운데서 명상하며, 정원의 기운을 느끼고 조화가 깨진 원인을 직감한다.',{intrapersonal:14, naturalist:4})
    ),
    q("감정의 호수", "다음 장소는 사람의 감정을 비추는 '감정의 호수'. 슬픔에 빠진 사람이 너무 많아 호수가 범람할 위기다. 호수를 진정시키려면?",
      opt('🤝 호숫가에 앉아 사람들의 이야기를 하나씩 들어주며, 그들의 슬픔을 공감해준다.',{interpersonal:16}),
      opt('🎵 모두의 마음을 어루만지는 평화로운 멜로디를 하프로 연주한다.',{musical:14}),
      opt('📖 슬픔을 극복한 영웅들의 이야기를 들려주며, 사람들에게 용기를 북돋운다.',{linguistic:12, interpersonal:6}),
      opt('🤔 나의 슬픔은 무엇인지 먼저 돌아보고, 나 자신을 위로하며 내면의 평화를 찾는다.',{intrapersonal:14})
    ),
    q("별빛의 신전", "호수를 건너 도착한 별빛의 신전. 입구의 크리스탈이 빛을 잃었다. 신전은 '진실한 마음의 소리'에만 반응한다고 한다. 당신의 '소리'는?",
      opt('🎤 신전을 향해 나의 꿈과 소망을 담은 진솔한 노래를 부른다.',{musical:16, intrapersonal:6}),
      opt('📜 크리스탈에 새겨진 고대 시를 낭송하여, 시에 담긴 지혜를 일깨운다.',{linguistic:14, logical:4}),
      opt('💖 함께 온 동료들에 대한 감사와 사랑의 마음을 조용히 전한다.',{interpersonal:14, intrapersonal:4}),
      opt('🙏 아무 말 없이, 신전의 위대함 앞에 겸허한 마음으로 깊이 고개 숙인다.',{intrapersonal:16})
    ),
    q("닫혀버린 문", "신전에 들어서자마자 문이 닫히고 동료들과 갇혔다. 모두가 불안에 떨고 있다. 리더로서 당신의 선택은?",
      opt('🗺️ 신전의 내부 구조를 기억해내고, 벽의 문양을 분석하여 숨겨진 통로를 찾는다.',{spatial:14, logical:6}),
      opt('🤗 동료들을 한 명씩 안아주며, '우리는 함께이기에 괜찮다'고 격려한다.',{interpersonal:16}),
      opt('💡 '이것은 우리를 시험하는 과정일 뿐'이라며, 이 상황의 긍정적인 의미를 찾아 설명한다.',{linguistic:12, intrapersonal:6}),
      opt('🎶 다 함께 노래를 부르며 불안감을 떨쳐내고, 팀의 사기를 끌어올린다.',{musical:14, interpersonal:6})
    ),
    q("메아리 다리", "길고 좁은 다리 너머에서 기이한 메아리가 들려온다. '가장 소중한 것을 버려야 지나갈 수 있다.' 이 수수께끼를 어떻게 풀까?",
      opt('🤔 '가장 소중한 것'이란 물질이 아닌, 나의 '두려움'이나 '욕심'임을 깨닫고 마음을 비운다.',{intrapersonal:16}),
      opt('🗣️ 메아리를 향해 '가장 소중한 것은 우리 모두의 우정이다!'라고 외친다.',{interpersonal:14, linguistic:6}),
      opt('🎵 메아리의 음높이와 똑같은 소리를 내어 공명시킴으로써, 길을 연다.',{musical:14}),
      opt('❓ '왜 소중한 것을 버려야만 하는가?'라며 메아리에게 역으로 질문을 던진다.',{linguistic:12, logical:6})
    ),
    q("왕국 외교 임무", "여정 중, 아버지의 부름을 받는다. 이웃 나라와의 갈등을 해결할 특사로 임명된 당신. 어떤 방법으로 평화를 이끌어낼까?",
      opt('🎨 상대국 왕실에 우리 왕국의 문화를 담은 그림과 음악을 선물로 보내 마음을 연다.',{musical:12, spatial:8}),
      opt('🤝 형식적인 외교 문서 대신, 상대국 대표의 관심사를 파악하여 공감대를 형성한다.',{interpersonal:16}),
      opt('📜 양국의 오랜 역사와 교류의 기록을 제시하며, 갈등보다 우정의 시간이 길었음을 상기시킨다.',{linguistic:14, logical:6}),
      opt('🌱 양국이 함께 참여하는 국경 지역 숲 가꾸기 프로젝트를 제안하여 협력의 장을 연다.',{naturalist:12, interpersonal:6})
    ),
    q("동굴의 붕괴", "외교 임무를 마치고 돌아오는 길, 갑작스런 지진으로 동굴에 갇혔다. 동료 한 명이 바위에 다리가 깔려 고통스러워한다. 어떻게 할까?",
      opt('🎶 아파하는 동료 곁에서 그의 고통을 덜어줄 진정의 노래를 불러준다.',{musical:14, interpersonal:6}),
      opt('🌿 주변의 약초를 찾아 빻아, 동료의 상처를 응급 처치한다.',{naturalist:14, bodily:4}),
      opt('⚖️ 주변의 돌들을 이용해 지렛대의 원리로 바위를 들어 올릴 방법을 찾는다.',{logical:12, bodily:6}),
      opt('💬 '조금만 참아, 내가 꼭 구해줄게.'라며 끊임없이 말을 걸어 동료가 의식을 잃지 않도록 한다.',{interpersonal:14, linguistic:6})
    ),
    q("네 갈래길", "마침내 '영원의 빛'이 잠든 신전 근처, 네 갈래길이 나타났다. 각 길목에는 다른 자연의 소리가 들린다. 어떤 길을 선택할까?",
      opt('🌊 잔잔한 물결 소리가 들리는 길. 마음의 평화를 따르기로 한다.',{intrapersonal:14, musical:4}),
      opt('🐦 희귀한 새의 지저귐이 들리는 길. 생명의 이끌림을 믿어본다.',{naturalist:14}),
      opt('🌬️ 바람 소리가 동굴 속에서 규칙적인 화음을 만들어내는 길. 패턴의 아름다움을 선택한다.',{musical:14, spatial:4}),
      opt('🐾 아무 소리도 들리지 않지만, 작은 동물 발자국이 이어지는 길. 겸손한 생명을 따른다.',{naturalist:12, interpersonal:4})
    ),
    q("마지막 의식", "신전 제단 앞에서 마지막 의식을 치러야 한다. '세상에서 가장 아름다운 것을 바치라'는 목소리가 울려 퍼진다. 무엇을 바칠 것인가?",
      opt('💖 '가장 아름다운 것은 타인을 위하는 마음입니다.'라며 동료들을 위한 기도를 올린다.',{interpersonal:16}),
      opt('🎵 세상의 모든 슬픔을 위로하기 위해 만든 나의 가장 아름다운 노래를 바친다.',{musical:16}),
      opt('✨ '가장 아름다운 것은 보이지 않는 곳에 있습니다.'라며 눈을 감고 명상에 잠긴다.',{intrapersonal:16}),
      opt('🌸 방금 길에서 꺾어온, 이름 모를 들꽃 한 송이를 조심스럽게 올려놓는다.',{naturalist:14})
    ),
    q("영원의 빛", "당신이 선택한 순간, 제단에서 눈부신 빛이 뿜어져 나온다. '영원의 빛'은 물질이 아닌, '깨달음' 그 자체였다. 이 힘을 어디에 가장 먼저 사용하겠는가?",
      opt('🌿 전쟁으로 황폐해진 이웃 나라의 땅에 생명의 기운을 불어넣는다.',{naturalist:16}),
      opt('🎶 사람들의 마음속 증오와 갈등을 치유하는 '조화의 멜로디'를 세상에 퍼뜨린다.',{musical:14, interpersonal:8}),
      opt('💡 빛의 힘을 분석하여 원리를 기록으로 남겨, 후대의 사람들이 지혜롭게 사용하도록 한다.',{logical:14, linguistic:6}),
      opt('🧘‍ 먼저 내 안의 마지막 남은 어두운 감정들을 비추고, 완전한 내면의 평화를 얻는다.',{intrapersonal:16})
    ),
    q("지혜를 구하는 사람들", "왕국에 돌아오자, 수많은 사람들이 당신의 지혜를 구하기 위해 몰려들었다. 그들을 어떻게 대하겠는가?",
      opt('💬 한 사람 한 사람의 이야기를 끝까지 들어주고, 그들 스스로 답을 찾도록 돕는다.',{interpersonal:16}),
      opt('📖 나의 깨달음을 비유와 상징이 가득한 한 편의 시로 만들어 들려준다.',{linguistic:14}),
      opt('🍵 사람들과 함께 찻잎을 따고 차를 마시며, 평범한 일상 속의 지혜를 나누는 시간을 갖는다.',{naturalist:12, interpersonal:6}),
      opt('🤔 '진정한 스승은 여러분 안에 있습니다.'라며, 자기 성찰의 방법을 가르쳐준다.',{intrapersonal:14})
    ),
    q("지혜를 시기하는 자", "당신의 명성을 시기한 한 귀족이, 당신의 지혜는 거짓이라며 공개 토론을 요구했다. 어떻게 대처하겠는가?",
      opt('😊 그의 도전을 미소로 받아들이고, '지혜란 이기고 지는 것이 아님'을 보여준다.',{intrapersonal:16}),
      opt('🤝 토론장에서도 그를 경쟁자가 아닌, 함께 진리를 찾는 동반자로 대하며 존중한다.',{interpersonal:14}),
      opt('🎶 그의 날카로운 질문에 노래로 답하여, 논쟁의 분위기를 화합으로 바꾼다.',{musical:14}),
      opt('📚 그의 주장을 논리적으로 반박하기보다, 더 깊은 차원의 질문을 던져 스스로 깨닫게 한다.',{linguistic:12, logical:8})
    ),
    q("상처받은 이웃 나라", "전쟁으로 모든 것을 잃은 이웃 나라를 돕기로 했다. 무엇을 가장 먼저 보내야 할까?",
      opt('🥣 굶주린 이들을 위한 식량과, 마음을 위로할 악기를 연주할 음악가들.',{interpersonal:12, musical:10}),
      opt('📐 무너진 도시를 더 효율적으로 재건할 수 있는 도시 계획 설계도.',{spatial:14, logical:6}),
      opt('📜 그들의 문화를 존중하며 진심 어린 위로를 담은, 내가 직접 쓴 편지.',{linguistic:12, interpersonal:8}),
      opt('🌱 당장의 구호품도 중요하지만, 다시 작물을 키울 수 있도록 좋은 씨앗과 농사 기술자들.',{naturalist:14})
    ),
    q("후세의 기억", "당신의 이야기가 후세에 어떻게 기억되기를 바라는가?",
      opt('👑 위대한 통치자가 아닌, 따뜻한 마음을 나눈 좋은 친구로 기억되길.',{interpersonal:16}),
      opt('🕊️ 세상의 모든 갈등을 조화롭게 중재한 평화의 상징으로 기억되길.',{intrapersonal:14, linguistic:6}),
      opt('🎵 마음을 치유한 아름다운 예술가이자 음악의 수호자로 기억되길.',{musical:14}),
      opt('🌳 자연을 깊이 사랑하고 모든 생명과 교감한 사람으로 기억되길.',{naturalist:14})
    ),
    q("다투는 아이들", "마을 광장에서 장난감을 두고 다투는 아이들을 보았다. 어떻게 중재하겠는가?",
      opt('💡 장난감을 똑같이 둘로 나누는 방법을 아이들에게 제안한다.',{logical:12}),
      opt('🎭 다툼을 주제로 한 짧은 인형극을 즉석에서 보여주어 스스로 깨닫게 한다.',{linguistic:12, spatial:6}),
      opt('🤝 둘이 함께해야 더 재미있는 새로운 놀이를 제안하여 관심을 돌린다.',{interpersonal:14, bodily:6}),
      opt('🎶 아이들의 마음을 풀어주는 재미있는 노래를 불러, 다툼을 잊게 만든다.',{musical:12})
    ),
    q("새로운 예술", "왕국에 이전과는 전혀 다른, 추상적이고 기이한 형태의 예술이 유행하기 시작했다. 당신의 반응은?",
      opt('🖼️ 예술가들을 궁으로 초대하여, 그들의 작품 세계와 철학에 대해 직접 이야기를 듣는다.',{interpersonal:14, linguistic:8}),
      opt('🤔 이 새로운 예술이 왜 사람들의 마음을 끄는지, 시대적 의미는 무엇인지 조용히 성찰한다.',{intrapersonal:14}),
      opt('🎨 직접 새로운 화풍의 그림을 그려보거나, 추상적인 조각을 만들어본다.',{bodily:12, spatial:8}),
      opt('🏛️ 이 새로운 예술을 위한 전문 미술관을 건립하여, 창작 활동을 적극 지원한다.',{logical:12, interpersonal:6})
    ),
    q("가뭄 끝의 비", "오랜 가뭄이 끝나고 마침내 단비가 내린다. 흙냄새와 빗소리가 온 세상에 가득하다. 이 순간, 당신은 무엇을 하고 싶은가?",
      opt('✍️ 비를 주제로 한 서정적인 시를 지어, 이 순간의 감동을 기록한다.',{linguistic:14}),
      opt('🎻 빗소리를 배경 삼아, 새로운 생명의 탄생을 축복하는 첼로 곡을 연주한다.',{musical:16}),
      opt('💃 왕궁의 정원으로 뛰쳐나가, 맨발로 비를 맞으며 자유롭게 춤을 춘다.',{bodily:14, naturalist:4}),
      opt('🙏 창가에 앉아 조용히 비 내리는 풍경을 보며, 자연의 위대함에 감사하는 명상의 시간을 갖는다.',{intrapersonal:14, naturalist:6})
    ),
    q("가장 큰 깨달음", "모든 여정의 끝에서 당신이 얻은 가장 큰 깨달음은 무엇인가?",
      opt('💬 진정한 힘은 타인의 마음을 얻는 공감의 능력에서 나온다는 것.',{interpersonal:16}),
      opt('💖 세상의 모든 해답은 결국 내 안의 목소리에 귀 기울이는 데 있다는 것.',{intrapersonal:16}),
      opt('🎶 세상의 모든 존재는 저마다의 고유한 노래를 가지고 있다는 것.',{musical:14}),
      opt('🌍 세상 모든 것은 보이지 않는 끈으로 연결된 하나의 생명이라는 것.',{naturalist:14})
    ),
    q("나의 지혜", "마지막으로, 당신의 지혜를 한 문장으로 남긴다면?",
      opt('📜 "서로의 이야기에 귀 기울일 때, 세상은 더 아름다운 음악이 됩니다."',{interpersonal:14, linguistic:8}),
      opt('🧘‍ "가장 깊은 침묵 속에서 가장 위대한 지혜를 발견할 수 있습니다."',{intrapersonal:16}),
      opt('🎶 "세상을 변화시키는 것은 거대한 힘이 아닌, 작은 화음의 조화입니다."',{musical:16, logical:6}),
      opt('🌎 "우리가 자연의 일부임을 깨달을 때, 진정한 자유를 얻을 것입니다."',{naturalist:16, bodily:6})
    )
  ],

  // Warrior Questline (20 Quests)
  warrior: [
    q("전사의 맹세", "오래전 잃어버린 '명예의 검'을 찾아 왕국의 평화를 되찾는 여정에 올랐다. 검이 잠들어 있다는 '침묵의 고원'의 첫 번째 관문은 '돌의 미로'. 어떻게 미로를 통과할까?",
      opt('🦶 돌의 벽에 기대어 촉감과 균형을 이용해 길을 찾는다.',{bodily:14, spatial:6}),
      opt('🧠 미로의 전체 구조를 머릿속으로 그려내고, 논리적으로 최단 경로를 파악한다.',{logical:14, spatial:6}),
      opt('🦅 가장 높은 바위에 올라 미로의 전체 지형을 파악한다.',{spatial:16}),
      opt('🗣️ 미로를 먼저 통과한 사람의 흔적을 찾아, 그들이 남긴 암호나 메시지를 해독한다.',{linguistic:12})
    ),
    q("야수와의 결투", "미로를 지나자, 길을 가로막는 거대한 야수를 만났다. 정면 승부를 피할 수 없다. 어떻게 야수를 제압할까?",
      opt('💪 야수의 공격을 온몸으로 막아내며 힘으로 맞선다.',{bodily:16}),
      opt('🧠 야수의 움직임을 분석하여 약점을 찾고, 치명적인 일격을 가한다.',{logical:14, bodily:6}),
      opt('💬 야수에게 '이것은 너의 영역이 아니다'라고 외치며 기선 제압을 시도한다.',{linguistic:12, interpersonal:6}),
      opt('🌿 주변의 독초를 이용하여 야수를 잠시 혼란에 빠뜨린다.',{naturalist:12})
    ),
    q("고원의 폭풍", "정상으로 향하는 길목에서 거대한 모래 폭풍을 만났다. 시야가 전혀 보이지 않는다. 어떻게 전진할까?",
      opt('🧭 몸의 감각에 집중해 발이 딛는 땅의 미세한 경사를 느끼며 방향을 잡는다.',{bodily:14, intrapersonal:6}),
      opt('🎶 바람이 바위에 부딪히며 내는 소리의 변화를 듣고, 폭풍의 흐름을 예측한다.',{musical:12, spatial:4}),
      opt('🤝 동료들과 끈으로 몸을 묶고, 서로의 손을 놓지 않고 전진한다.',{interpersonal:14}),
      opt('⏳ 폭풍이 지나갈 때까지 가장 안전한 바위 뒤에 몸을 숨기고 기다린다.',{intrapersonal:12})
    ),
    q("잃어버린 유적", "폭풍이 지난 후, 예상치 못했던 고대의 유적을 발견했다. 검에 대한 단서가 있을지도 모른다. 어떻게 유적을 탐사할까?",
      opt('🖼️ 유적 벽에 그려진 그림과 상징들을 분석하여, 그 안에 담긴 이야기를 읽어낸다.',{linguistic:14, spatial:6}),
      opt('⚙️ 유적 곳곳에 흩어진 복잡한 기계 장치들을 조합하여 비밀의 문을 연다.',{logical:14, bodily:4}),
      opt('🚶 직접 유적의 모든 통로를 걸어보며 숨겨진 길을 찾아낸다.',{bodily:12, spatial:8}),
      opt('🌿 유적 주변에만 자라는 특별한 이끼나 식물들을 관찰하여, 유적의 역사를 추정한다.',{naturalist:12})
    ),
    q("심연의 동굴", "유적의 단서를 따라 '심연의 동굴'에 들어섰다. 칠흑 같은 어둠과 끝없는 침묵이 당신을 짓누른다. 어떻게 극복할까?",
      opt('❤️ 동료들과 함께 '두려워하지 말자'는 긍정의 메시지를 서로 주고받는다.',{interpersonal:14}),
      opt('🎵 어둠을 밝힐 작은 노래를 흥얼거려, 내면의 불안을 잠재운다.',{musical:12, intrapersonal:8}),
      opt('🤝 보이지 않는 동료의 손을 잡고, 서로의 존재를 느끼며 전진한다.',{bodily:12, interpersonal:8}),
      opt('🤔 '어둠이란 빛의 부재일 뿐'이라는 생각을 떠올리며, 마음을 평온하게 유지한다.',{intrapersonal:16})
    ),
    q("숨겨진 함정", "동굴의 끝, '명예의 검'이 놓인 제단으로 향하는 길에 여러 개의 발판 함정이 나타났다. 안전한 길을 어떻게 찾을까?",
      opt('🔎 발판의 미세한 색깔 차이나 흙의 굳기 등을 분석하여, 안전한 발판을 구분한다.',{logical:14, naturalist:6}),
      opt('🤸 함정을 피하는 가장 효율적인 몸동작을 구상하고 실행한다.',{bodily:16}),
      opt('💬 '함정을 설치한 자의 심리는 무엇이었을까?' 스스로에게 질문하며 의도를 파악한다.',{intrapersonal:12, logical:8}),
      opt('🗺️ 바닥의 그림자를 이용하여, 함정이 설치된 위치를 시각적으로 추리한다.',{spatial:12})
    ),
    q("검의 주인을 시험하는 문제", "함정을 통과하자, 검을 지키는 수호자가 '이 세상의 모든 문제 중, 가장 어려운 문제는 무엇인가?'라고 묻는다. 당신의 답은?",
      opt('💡 "세상의 모든 문제는 해결 가능하지만, 나 자신을 아는 것은 가장 어려운 문제입니다."', {intrapersonal:16}),
      opt('🤝 "모든 백성이 서로를 이해하고 화합하는 것, 그것이 가장 어려운 문제입니다."', {interpersonal:16}),
      opt('❓ "질문이 너무 추상적입니다. '어려움'의 기준을 명확히 정의해 주십시오."', {logical:14, linguistic:6}),
      opt('🛡️ "가장 어려운 문제는, '포기'라는 단어 자체입니다. 전 결코 포기하지 않을 겁니다."', {bodily:14, intrapersonal:4})
    ),
    q("영혼의 대화", "수호자는 당신의 답에 만족하고 길을 비켜주었다. 이제 검에 손을 얹자, 검의 영혼이 속삭인다. '진정한 힘은 무엇인가?'",
      opt('💪 "진정한 힘은 타인을 지키는 용기입니다."', {bodily:14, interpersonal:8}),
      opt('✨ "진정한 힘은 보이지 않는 곳에서 피어나는 깨달음입니다."', {intrapersonal:16}),
      opt('📜 "진정한 힘은 글과 말로 세상을 변화시키는 것입니다."', {linguistic:14, interpersonal:6}),
      opt('💡 "진정한 힘은 복잡한 문제를 단순하게 만드는 논리입니다."', {logical:16})
    ),
    q("돌아온 검", "검은 당신의 손에 빛을 되찾았고, 당신은 영웅이 되어 왕국에 돌아왔다. 사람들은 환호하며 당신에게 축제를 열어주려 한다. 당신의 선택은?",
      opt('⚔️ 축제보다 더 중요한 것은 왕국의 안보라며, 즉시 병사들을 훈련시킨다.',{bodily:16, logical:6}),
      opt('😊 백성들과 함께 축제를 즐기며, 그들의 기쁨을 함께 나눈다.',{interpersonal:16}),
      opt('📜 '영웅은 혼자가 아니다'라는 연설로 백성들의 화합을 강조한다.',{linguistic:14, interpersonal:6}),
      opt('🧘‍ 축제 대신, 조용한 곳에서 나의 다음 여정이 어디로 향해야 할지 고민한다.',{intrapersonal:14})
    ),
    q("왕국의 재건", "전쟁으로 황폐해진 왕국을 재건해야 한다. 무엇부터 시작할까?",
      opt('🛠️ 가장 무너진 건물부터 직접 망치를 들고 복구 작업을 시작한다.', {bodily:14, interpersonal:8}),
      opt('🗺️ 새로운 도시 계획을 세워, 더 효율적이고 아름다운 도시를 설계한다.', {spatial:14, logical:6}),
      opt('💬 백성들과 회의를 열어, 그들이 가장 원하는 것이 무엇인지 직접 묻는다.', {interpersonal:16, linguistic:6}),
      opt('🌱 무너진 숲과 농장을 되살리기 위해, 나무를 심고 토양을 복구한다.', {naturalist:14})
    ),
    q("새로운 검의 전설", "당신은 새로운 '명예의 검'을 만들기로 했다. 어떤 검을 만들고 싶은가?",
      opt('🛡️ 어떤 공격도 막아내는 견고한 방패 같은 검.', {bodily:16, logical:6}),
      opt('🗣️ 한 번 휘두르면 백성들에게 용기를 주는 말을 들려주는 검.', {linguistic:14, musical:6}),
      opt('🗺️ 검집에서 꺼내면 왕국의 지형이 빛으로 나타나는 검.', {spatial:16, logical:6}),
      opt('🌿 검날에 풀이 자라나, 평화를 상징하는 검.', {naturalist:14, interpersonal:6})
    ),
    q("외교적 만찬", "이웃 나라와의 긴장을 풀기 위한 만찬에 참석했다. 상대국의 군사 지도자가 당신을 도발한다. 어떻게 대처할까?",
      opt('⚔️ 도발에 응하는 대신, 훈련으로 다져진 강인한 신체로 나의 결의를 보여준다.', {bodily:16}),
      opt('🤝 미소로 답하며, '진정한 힘은 싸움이 아닌 대화에서 나온다'고 말한다.', {interpersonal:16}),
      opt('⚖️ 그의 논리적 허점을 찾아, 말로 그를 압도한다.', {logical:14, linguistic:6}),
      opt('🧘‍ 침묵을 유지하며, 그의 도발이 왜 당신에게 영향을 미치지 못하는지 깨닫게 한다.', {intrapersonal:14, interpersonal:6})
    ),
    q("대자연과의 조화", "숲에서 훈련을 하던 중, 갑자기 거대한 곰이 나타났다. 어떻게 대처하겠는가?",
      opt('💪 곰과 정면으로 맞서 싸우기보다, 나무를 타고 올라가 곰을 피한다.', {bodily:14, logical:6}),
      opt('🌲 곰의 습성을 이해하고, 위협을 느끼지 않도록 조용히 자리를 피한다.', {naturalist:16}),
      opt('🗣️ 곰을 향해 위협적인 소리를 내며, 나의 영역임을 분명히 알린다.', {linguistic:12, bodily:8}),
      opt('🧘‍ 곰에게서 눈을 떼지 않고, 나의 평온한 기운을 보내 곰을 진정시킨다.', {intrapersonal:14, interpersonal:6})
    ),
    q("왕국의 유산", "이제 당신은 왕국의 미래를 책임질 후계자를 찾아야 한다. 어떤 자질을 가장 중요하게 생각하는가?",
      opt('🧠 위기 상황에서 침착하게 논리적 판단을 내리는 능력.', {logical:14}),
      opt('❤️ 백성들의 마음을 깊이 이해하고 공감하는 능력.', {interpersonal:16}),
      opt('🧘‍ 끊임없이 자신을 성찰하고, 스스로 답을 찾는 능력.', {intrapersonal:16}),
      opt('⚔️ 어떤 어려움에도 굴하지 않고, 행동으로 증명하는 강인함.', {bodily:14})
    ),
    q("마지막 훈련", "평화를 되찾은 왕국에서 당신은 마지막 훈련에 임한다. 어떤 훈련을 하겠는가?",
      opt('🌳 숲 속에서 동물의 움직임을 관찰하고, 그들의 사냥 방식을 배운다.', {naturalist:14, bodily:8}),
      opt('🎶 훈련 중에도 마음을 평온하게 유지하기 위한 명상 음악을 만든다.', {musical:14, intrapersonal:6}),
      opt('🤝 젊은 병사들을 가르치며, 그들이 직접 문제를 해결하도록 돕는다.', {interpersonal:14, logical:8}),
      opt('✍️ 나의 모든 훈련 과정을 책으로 기록하여, 후대에 남긴다.', {linguistic:14, intrapersonal:6})
    ),
    q("전쟁 영웅의 밤", "당신을 기리는 연회가 열렸다. 수많은 사람이 당신에게 영웅담을 듣고 싶어 한다. 당신의 선택은?",
      opt('🗣️ 화려한 언변으로 나의 무용담을 들려주며, 사람들의 사기를 높인다.',{linguistic:14, interpersonal:8}),
      opt('❤️ '진정한 영웅은 무기 뒤에 숨어있지 않습니다'라며, 동료들의 이름을 한 명씩 부른다.',{interpersonal:16}),
      opt('🤫 겸손한 미소로 '모든 것은 검이 이끌어주었다'며 공을 검에게 돌린다.',{intrapersonal:14}),
      opt('🏋️ 연회장 한가운데서 멋진 검무를 선보여, 모두에게 즐거움을 선사한다.',{bodily:14, musical:6})
    ),
    q("나의 흔적", "훗날, 당신의 무덤에는 어떤 비문이 새겨지길 바라는가?",
      opt('🌳 '이 땅을 사랑하고 자연과 함께한 자 여기 잠들다.'',{naturalist:16}),
      opt('🧠 '지혜와 용기로 왕국을 지켜낸 현명한 전사, 여기 잠들다.'',{logical:14, bodily:6}),
      opt('💖 '오직 사랑으로 백성을 다스린 위대한 영혼, 여기 잠들다.'',{interpersonal:16, intrapersonal:6}),
      opt('⚔️ '모든 난관을 행동으로 극복한 용기 있는 자, 여기 잠들다.'',{bodily:16})
    )
  ],

  // Wizard Questline (20 Quests)
  wizard: [
    q("마법사의 여정", "세상에 흩어진 '기억의 조각'을 모아 '진리의 마법서'를 복원하는 여정에 올랐다. 첫 번째 조각은 '꿈의 도서관'에 숨겨져 있다. 어떻게 그곳을 찾을까?",
      opt('📜 오래된 마법 문헌을 연구하여, 도서관의 위치를 추론한다.',{linguistic:14, logical:6}),
      opt('🌠 별자리를 읽어 신비한 지도를 만들고, 별의 인도에 따라 이동한다.',{spatial:14, naturalist:6}),
      opt('💬 사람들의 꿈 이야기를 수집하고, 그 속에 반복되는 상징을 분석한다.',{interpersonal:12, logical:8}),
      opt('🧘‍ 눈을 감고 명상하여, 도서관의 기운을 영적으로 감지한다.',{intrapersonal:16})
    ),
    q("꿈의 도서관", "도서관에 도착하자, 모든 책들이 비어있다. '진리를 알고 싶다면, 내면의 언어로 말하라'는 목소리가 들려온다. 어떻게 해야 책의 내용이 보일까?",
      opt('🧠 마음속으로 내가 알고 싶은 지식을 떠올리자, 책에 글자가 나타난다.',{intrapersonal:16, linguistic:6}),
      opt('✍️ 비어있는 책에 마법 주문을 적고, 글자가 나타나기를 기다린다.',{linguistic:14}),
      opt('🤝 주변에 있는 사람들과 서로의 마음을 공유하며 대화한다.',{interpersonal:14}),
      opt('🎶 조용히 책에 손을 얹고, 나의 마음을 진정시키는 명상 음악을 연주한다.',{musical:12, intrapersonal:8})
    ),
    q("마법사의 시험", "도서관의 책을 읽고 다음 장소로 이동하려 하자, 도서관 관리인이 '가장 복잡한 마법 공식'을 묻는다. 당신은 어떻게 대답할까?",
      opt('💡 "세상의 모든 것은 논리로 설명됩니다. 가장 복잡한 공식은 '무한의 공식'입니다."', {logical:16}),
      opt('💬 "가장 복잡한 공식은 바로 '사람의 마음을 이해하는 공식'입니다."', {interpersonal:16}),
      opt('📜 "공식은 글로 쓰는 것이 아니라, 마음으로 이해하는 것입니다."', {linguistic:14, intrapersonal:6}),
      opt('🌌 "모든 별과 행성의 궤도를 계산하는 공식, 우주의 공식입니다."', {spatial:14})
    ),
    q("정령의 숲", "다음 조각은 정령의 숲에 있다. 숲의 모든 생명체가 당신의 움직임에 따라 색깔을 바꾼다. 어떻게 숲을 지나갈까?",
      opt('🧘‍ 정령의 기운에 거스르지 않고, 조용히 내면의 평화를 유지하며 걷는다.',{intrapersonal:16, naturalist:6}),
      opt('🎵 정령들의 합창에 맞춰 마법의 노래를 부르며 숲을 지나간다.',{musical:16}),
      opt('🌿 숲의 식물들과 교감하여, 숲이 원하는 방향으로 움직인다.',{naturalist:14, interpersonal:8}),
      opt('🏃 숲의 변화에 신경 쓰지 않고, 가장 빠르게 목적지를 향해 달려간다.',{bodily:12, logical:6})
    ),
    q("바다의 노래", "숲을 지나자 거대한 바다가 나타났다. 바다의 가운데 섬에 '기억의 조각'이 보인다. 섬으로 가려면 '바다의 노래'를 불러야 한다. 어떤 노래를 부를까?",
      opt('🎶 파도의 소리와 똑같은 음계를 가진 노래를 불러 바다의 길을 연다.',{musical:16}),
      opt('❤️ 바다에게 '당신을 사랑합니다'라는 진심을 담아 노래를 부른다.',{interpersonal:14, intrapersonal:6}),
      opt('📜 바다에 대한 전설이 담긴 고대 서사시를 낭송한다.',{linguistic:14}),
      opt('🌊 바닷속 미생물들의 움직임을 관찰하고, 그들의 패턴에 맞는 노래를 만든다.',{naturalist:14, logical:6})
    ),
    q("마법사의 결투", "섬에 도착하자, 당신의 힘을 시험하려는 다른 마법사가 나타났다. 어떻게 결투를 벌이겠는가?",
      opt('✨ 마법 주문을 외우기보다, 나의 마음속 깨달음으로 상대방을 압도한다.',{intrapersonal:16, logical:6}),
      opt('💬 논리적인 마법 이론을 펼쳐, 상대방이 스스로 패배를 인정하게 만든다.',{logical:14, linguistic:8}),
      opt('🤝 마법을 겨루는 대신, '왜 싸워야 하는가?'라며 대화를 시도한다.',{interpersonal:16}),
      opt('🎨 거대한 환영 마법을 펼쳐, 상대방을 혼란에 빠뜨린다.',{spatial:14, musical:6})
    ),
    q("거울의 미로", "결투에서 이기고 다음 조각을 얻자, 거울로 이루어진 미로가 나타났다. 미로의 모든 거울에는 나의 모습이 비친다. 어떻게 미로를 통과할까?",
      opt('🧠 거울에 비친 나의 모습들을 분석하여, 올바른 거울을 찾아낸다.',{logical:14, spatial:8}),
      opt('🧘‍ 거울에 비친 나의 모습에 흔들리지 않고, 내면의 소리에 집중해 길을 찾는다.',{intrapersonal:16, spatial:6}),
      opt('🤸 거울의 허점을 찾아, 물리적으로 미로를 돌파한다.',{bodily:14, logical:4}),
      opt('🤝 거울 속의 내가 말을 걸면, 그에게 '우리는 하나'라고 말하며 통로를 연다.',{interpersonal:14, intrapersonal:6})
    ),
    q("잃어버린 언어", "미로를 통과하자, 한 권의 낡은 책이 놓여있다. 책은 '잃어버린 언어'로 쓰여있어 해독이 불가능하다. 어떻게 이 언어를 해석할까?",
      opt('📜 책에 쓰인 글자의 패턴과 상징을 분석하여, 언어의 규칙을 재구성한다.',{linguistic:16, logical:6}),
      opt('🎵 책의 내용을 음율에 맞춰 읊어보며, 언어의 리듬을 통해 의미를 파악한다.',{musical:14, linguistic:6}),
      opt('🧘‍ 책에 손을 얹고 명상하여, 저자의 의도를 영적으로 느낀다.',{intrapersonal:16}),
      opt('🗣️ 주변 마을 사람들의 이야기를 수집하여, 잃어버린 언어의 흔적을 찾는다.',{interpersonal:12, linguistic:8})
    ),
    q("마지막 조각", "드디어 마지막 조각을 찾았다. 이제 진리의 마법서를 완성해야 한다. 어떻게 조각들을 배열할까?",
      opt('🧠 조각들의 크기와 모양을 논리적으로 조합하여, 완벽한 형태로 만든다.',{logical:16}),
      opt('✨ 조각들이 내뿜는 미세한 마나의 흐름을 느끼고, 가장 조화로운 순서로 배열한다.',{intrapersonal:14, musical:8}),
      opt('🤝 동료들과 함께 조각을 하나씩 들고, 서로의 의견을 모아 배열한다.',{interpersonal:14, spatial:6}),
      opt('📜 각 조각에 새겨진 고대 마법 문양을 해독하여, 완성된 마법서의 내용으로 추론한다.',{linguistic:14})
    ),
    q("진리의 마법서", "마법서가 완성되자, 눈부신 빛을 내뿜으며 당신에게 말을 건다. '진정한 마법이란 무엇인가?'",
      opt('💡 "진정한 마법은 세상을 움직이는 논리 그 자체입니다."', {logical:16}),
      opt('💖 "진정한 마법은 상처받은 이의 마음을 치유하는 공감의 힘입니다."', {interpersonal:16}),
      opt('🧘‍ "진정한 마법은 외부의 힘이 아닌, 내면의 깨달음입니다."', {intrapersonal:16}),
      opt('✍️ "진정한 마법은 글과 말로 사람들에게 희망을 전하는 것입니다."', {linguistic:14, musical:6})
    ),
    q("새로운 시대의 마법", "당신은 세상의 모든 마법사들을 이끄는 '대마법사'가 되었다. 어떤 마법을 가장 먼저 가르치고 싶은가?",
      opt('🌱 자연의 힘을 빌어 황폐해진 땅을 되살리는 마법.', {naturalist:16, spatial:6}),
      opt('🤝 서로 다른 마법을 쓰는 마법사들이 화합하는 '조화의 마법'.', {interpersonal:16, musical:6}),
      opt('💡 무지한 이들의 마음속에 진실을 비추는 '깨달음의 마법'.', {intrapersonal:14, logical:8}),
      opt('📜 잃어버린 고대 언어를 복원하고, 새로운 지식을 기록하는 마법.', {linguistic:14})
    ),
    q("도시의 재앙", "마을을 덮친 원인 모를 역병으로 백성들이 고통받는다. 어떻게 이 위기를 해결할까?",
      opt('🔬 역병의 원인을 분석하고, 과학적 원리를 적용하여 치료법을 개발한다.', {logical:16, naturalist:6}),
      opt('🤝 마법사들을 규합하여, 각자의 마법으로 병든 자를 치유하도록 돕는다.', {interpersonal:14, musical:8}),
      opt('💬 '모두가 서로 도우면 이겨낼 수 있다'고 외치며 백성들의 용기를 북돋운다.', {linguistic:14, interpersonal:6}),
      opt('🧘‍ 역병의 근본적인 원인을 찾기 위해, 내면의 목소리에 귀 기울인다.', {intrapersonal:14, logical:6})
    ),
    q("마법사의 유산", "훗날 당신의 이야기는 어떤 마법사로 기억되길 바라는가?",
      opt('📚 '세상 모든 지식의 수호자'로 기억되길.', {linguistic:14, logical:8}),
      opt('🧙‍ '타인의 마음을 읽고 공감한 위대한 현자'로 기억되길.', {interpersonal:16}),
      opt('🔮 '보이지 않는 진리를 탐구한 가장 위대한 영혼'으로 기억되길.', {intrapersonal:16}),
      opt('🎨 '환상적인 마법으로 세상을 아름답게 만든 예술가'로 기억되길.', {spatial:14, musical:6})
    ),
    q("지구 반대편의 위기", "전령이 와서 지구 반대편의 이웃 왕국이 기아에 시달리고 있다고 전한다. 어떤 도움을 줄 수 있을까?",
      opt('🌾 식량과 물을 순간이동시키는 마법 포털을 만들어 긴급 구호 물품을 보낸다.',{logical:14, spatial:8}),
      opt('🗣️ 그들의 지도자에게 '모든 어려움은 함께 극복해야 한다'는 메시지를 담은 마법의 편지를 보낸다.',{linguistic:14, interpersonal:8}),
      opt('🌱 메마른 땅을 비옥하게 바꾸는 마법을 직접 가르치고, 농경 기술을 전수한다.',{naturalist:16, logical:6}),
      opt('🧘‍ 그들의 마음속에 절망 대신 희망을 심어주는 마법을 원격으로 사용한다.',{intrapersonal:16})
    ),
    q("마법사의 은퇴", "이제 당신은 마법사의 삶을 마치고 조용히 은퇴하려 한다. 어디로 가서 여생을 보내고 싶은가?",
      opt('🏡 사람들의 삶에 가장 가까운 곳, 평범한 마을에서 아이들에게 이야기를 들려주며.',{interpersonal:14}),
      opt('🏛️ 세상의 모든 책이 모인 거대한 도서관에서 지식을 탐구하며.',{linguistic:14, logical:6}),
      opt('🌲 아무도 찾지 않는 깊은 숲 속, 자연과 교감하며.',{naturalist:16}),
      opt('🌌 밤하늘의 별이 가장 잘 보이는 높은 산 위, 우주의 진리를 관찰하며.',{spatial:14, intrapersonal:6})
    ),
    q("시간을 되돌리는 마법", "당신은 시간을 되돌리는 마법을 개발했다. 과거로 돌아가 한 가지를 바꿀 수 있다면, 무엇을 바꾸겠는가?",
      opt('📜 세상의 모든 증오를 지우고, 사랑의 역사를 다시 쓴다.',{linguistic:16, interpersonal:8}),
      opt('💡 모든 전쟁의 논리를 무효화하고, 평화의 논리만 남긴다.',{logical:16, intrapersonal:6}),
      opt('💖 나와 당신의 첫 만남으로 돌아가, 더 좋은 인연을 만들고 싶다.',{interpersonal:16}),
      opt('🌍 오염된 강과 숲을 원래대로 되돌려, 자연을 복원한다.',{naturalist:14, spatial:6})
    ),
    q("마법의 노래", "수백 년에 한 번 피는 '진리의 꽃'이 당신을 위해 노래한다. 당신은 그 노래를 어떻게 기억할 것인가?",
      opt('🎶 노래의 음계와 화음을 완벽하게 악보에 기록한다.',{musical:16, logical:6}),
      opt('✍️ 노래의 가사를 해석하고, 시로 만들어 사람들에게 전한다.',{linguistic:14, interpersonal:8}),
      opt('💖 노래가 전하는 감정을 내면에 깊이 새기고, 영혼의 일부로 만든다.',{intrapersonal:16}),
      opt('🧘‍ 눈을 감고 노래의 진동을 온몸으로 느끼며, 자연과의 교감을 체험한다.',{naturalist:14})
    ),
    q("가장 소중한 주문", "당신이 평생 가장 중요하게 생각하는 마법 주문이 있다면?",
      opt('📜 "언어는 세상을 여는 열쇠니, 지혜를 구하는 자는 먼저 글을 읽으라."', {linguistic:16, logical:8}),
      opt('💖 "마음이 향하는 곳에 길이 있으니, 자신의 소리를 따르라."', {intrapersonal:16}),
      opt('🤝 "너와 내가 하나 될 때, 가장 위대한 마법이 펼쳐지리라."', {interpersonal:16}),
      opt('✨ "진실을 보는 자는 어둠 속에서도 길을 잃지 않으리라."', {logical:14, intrapersonal:6})
    )
  ]
};

const mapNames = {
    linguistic: '언어',
    logical: '논리-수학',
    spatial: '공간',
    bodily: '신체-운동',
    musical: '음악',
    interpersonal: '대인관계',
    intrapersonal: '자기이해',
    naturalist: '자연친화'
};


// 함수
function checkStartButton() {
    const name = el('input-name').value;
    const classVal = el('input-class').value;
    const companion = player.companion;
    el('btn-start').disabled = !(name && classVal && companion);
}

function selectCompanion(e) {
    // 이미 선택된 동료의 'selected' 클래스 제거
    const selectedChar = document.querySelector('.char.selected');
    if (selectedChar) {
        selectedChar.classList.remove('selected');
    }

    // 현재 클릭된 요소에 'selected' 클래스 추가
    const charDiv = e.currentTarget;
    charDiv.classList.add('selected');

    // 선택된 동료 정보 저장
    player.companion = charDiv.dataset.id;
    checkStartButton();
}

function startGame() {
    if (el('btn-start').disabled) return;

    player.name = el('input-name').value;
    player.class = el('input-class').value;
    
    // 게임 시작 시, 퀘스트 라인 설정
    questLine = quests[player.companion];

    // 게임 시작 시 UI 전환
    el('pre-game').style.display = 'none';
    el('game-area').style.display = 'block';
    el('stats-panel').style.display = 'block';
    el('stats-panel').style.opacity = 0;
    setTimeout(()=>el('stats-panel').style.opacity = 1, 100);

    // BGM 재생
    sounds.bgm.play().catch(e => console.log("BGM 재생이 차단되었습니다."));

    // 첫 퀘스트 표시
    showQuest(questLine[currentQuestIndex]);
}

function selectOption(e) {
    if (sounds.turn) sounds.turn.play();

    const optionIndex = parseInt(e.currentTarget.dataset.index);
    const effects = questLine[currentQuestIndex].options[optionIndex].e;
    
    // 스탯 업데이트
    for (const key in effects) {
        scores[key] = (scores[key] || 0) + effects[key];
    }
    
    // 다음 퀘스트 진행
    currentQuestIndex++;
    if (currentQuestIndex < questLine.length) {
        showQuest(questLine[currentQuestIndex]);
    } else {
        showResult();
    }
    updateStats();
}

function showQuest(quest) {
    el('quest-title').textContent = quest.title;
    el('quest-text').innerHTML = quest.text;
    const optionsRoot = el('options');
    optionsRoot.innerHTML = '';
    
    quest.options.forEach((opt, index) => {
        const optionDiv = document.createElement('div');
        optionDiv.className = 'option';
        optionDiv.dataset.index = index;
        optionDiv.innerHTML = `<span class="label"></span>${opt.t}`;
        optionDiv.onclick = selectOption;
        optionsRoot.appendChild(optionDiv);
    });
}

function updateStats() {
    const root = el('stats');
    root.innerHTML = '';
    const mapNames = {linguistic:'언어',logical:'논리',spatial:'공간',bodily:'신체',musical:'음악',interpersonal:'대인관계',intrapersonal:'자기이해',naturalist:'자연친화'};
    Object.keys(scores).forEach(k => {
        const score = Math.min(100, Math.max(0, scores[k]));
        const box = document.createElement('div');
        box.className = 'stat';
        box.innerHTML = `
            <div style="font-weight:bold;color:var(--gold)">${mapNames[k]}</div>
            <div class="bar"><div class="bar-inner" style="width:${score}%;background-color:var(--gold)"></div></div>
        `;
        root.appendChild(box);
    });
}

function showResult() {
    el('game-area').style.display = 'none';
    el('stats-panel').style.display = 'none';
    el('result-area').style.display = 'block';

    const entries = Object.entries(scores).sort((a,b)=>b[1]-a[1]);
    const top1 = entries[0][0];
    const top2 = entries[1][0];
    const mapNames = {linguistic:'언어 지능',logical:'논리-수학 지능',spatial:'공간 지능',bodily:'신체-운동 지능',musical:'음악 지능',interpersonal:'대인관계 지능',intrapersonal:'자기이해 지능',naturalist:'자연친화 지능'};
    
    const resultHTML = `
        <h3>📜 모험의 결과</h3>
        <p><strong>${player.name}</strong>(${player.class})님은<br><strong>${mapNames[top1]}</strong>과 <strong>${mapNames[top2]}</strong>을(를) 기반으로 하는 능력이 뛰어납니다. 
        <br>고대의 부름에 응답하여 당신의 잠재력을 발견했습니다!</p>
    `;
    el('result-content').innerHTML = resultHTML;
}

function restartGame() {
    location.reload();
}

// 이벤트 리스너
el('btn-start').onclick = startGame;
el('btn-restart').onclick = restartGame;
el('input-name').oninput = checkStartButton;
el('input-class').oninput = checkStartButton;
document.querySelectorAll('.char').forEach(el => el.onclick = selectCompanion);
</script>
</body>
</html>
