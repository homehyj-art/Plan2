<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>📜 다중지능 탐험: 고대의 부름</title>
<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline' https://cdn.pixabay.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; media-src https://cdn.pixabay.com;">
<link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Cinzel:wght@700&display=swap" rel="stylesheet">
<style>
:root{ --brown-text: #4a3a2a; --gold: #c89a4b; }
*{box-sizing:border-box}

body{
    margin:0;
    font-family: 'Gowun Dodum', serif;
    background: url('https://cdn.pixabay.com/photo/2020/02/05/17/23/ancient-4821613_1280.jpg') no-repeat center center/cover;
    background-color: rgba(0, 0, 0, 0.65); /* 이미지 위에 어둡게 오버레이 */
    background-blend-mode: multiply; /* 블렌드 모드 추가 */
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 20px;
}

.wrap{ width:100%; max-width:1200px; }

.header{
    text-align: center;
    margin-bottom: 20px;
    animation: fadeInDown 1s ease-out;
}
.title{
    font-family: 'Cinzel', serif;
    font-size: 3rem;
    color: var(--gold);
    text-shadow: 2px 2px 8px rgba(0,0,0,0.8);
}
.subtitle{ font-family: 'Gowun Dodum'; opacity:0.9; font-size: 1.2rem; color: #f0f0f0; }

.layout{ display:flex; gap:20px; }
.left, .right{ transition: all 0.5s ease-out; }

.left{
    width:360px;
    animation: fadeInLeft 1s ease-out;
    position: relative;
    z-index: 10;
}
.right{
    flex:1;
    animation: fadeInRight 1s ease-out;
    position: relative;
    z-index: 5;
}


.card{
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(8px);
    border-radius:16px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    border: 1px solid rgba(255,215,102,0.15);
}

.char-row{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
.char{
    padding:10px;
    border-radius:10px;
    background:rgba(0,0,0,0.3);
    text-align:center;
    cursor:pointer;
    border: 2px solid transparent;
    transition: all 0.3s ease;
}
.char:hover{ transform:translateY(-5px); background:rgba(0,0,0,0.5); border-color: var(--gold); }
.char .emoji{ font-size:44px; filter: drop-shadow(0 0 5px rgba(0,0,0,0.5)); }
.char .name{ color:var(--gold); font-weight:bold; }
.char.selected{
    background:rgba(200,154,75,0.3);
    border-color: var(--gold);
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 0 15px rgba(200, 154, 75, 0.5);
}

label{ display:block; color:var(--gold); font-weight:700; margin-bottom:6px; }
input[type=text]{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:1px solid rgba(255,215,102,0.2);
    background:rgba(0,0,0,0.3);
    color:#fff;
    margin-bottom:10px;
    font-family: 'Gowun Dodum', serif;
}
.btn{
    display:inline-flex;
    gap:8px;
    align-items:center;
    justify-content:center;
    padding:12px 16px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    background:linear-gradient(145deg, #b38645, #835e2c);
    color:#fff;
    font-weight:bold;
    box-shadow: 0 5px 15px rgba(0,0,0,0.4);
    width: 100%;
    font-family: 'Gowun Dodum', serif;
    font-size: 1rem;
    transition: all 0.2s ease;
}
.btn:hover {
    transform: scale(1.02);
}
.btn:disabled {
    background: #555;
    cursor: not-allowed;
    opacity: 0.6;
    transform: scale(1);
    box-shadow: none;
}

#game-card {
    background: linear-gradient(150deg, #f5eadd 0%, #e8d9c2 100%);
    box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
    color: var(--brown-text);
    padding: 50px 60px;
    min-height: 550px;
    position: relative;
    border-radius: 8px;
}
.quest-header { text-align: center; margin-bottom: 20px; }
.quest-header h3 { font-family: 'Cinzel', serif; color: #6a4a2a; margin: 0; font-size: 1.5rem;}
.quest-text { font-size:1.2rem; line-height:1.8; min-height: 100px; }
.options{ display:grid; grid-template-columns:1fr; gap:12px; margin-top:20px; }
.option{
    padding:12px;
    border-radius:10px;
    background:rgba(189, 168, 133, 0.3);
    cursor:pointer;
    border:1px solid rgba(112, 83, 48, 0.3);
    transition: all .2s ease;
}
.option:hover{ transform: scale(1.03); background:rgba(189, 168, 133, 0.5); border-color: var(--brown-text); }
.option .label{ font-weight:bold; }

.stats-grid{ display:grid; grid-template-columns:repeat(4,1fr); gap:8px; margin-top:12px; color: #fff;}
.stat{ background:rgba(0,0,0,0.3); padding:8px; border-radius:8px; text-align:center; }
.bar{ height:10px; background:rgba(255,255,255,0.1); border-radius:6px; margin-top:8px; overflow:hidden; }
.bar-inner{ height:100%; background:linear-gradient(90deg,var(--gold),#e6b873); width:0%; transition:width .6s; }

.result-content { color: var(--brown-text); text-align: center; }
.result-content h3 { font-family: 'Cinzel', serif; color: #6a4a2a; }

@keyframes fadeInDown { 0% { opacity:0; transform: translateY(-30px); } 100% { opacity:1; transform: translateY(0); } }
@keyframes fadeInLeft { 0% { opacity:0; transform: translateX(-50px); } 100% { opacity:1; transform: translateX(0); } }
@keyframes fadeInRight { 0% { opacity:0; transform: translateX(50px); } 100% { opacity:1; transform: translateX(0); } }

@media(max-width:900px){ .layout{flex-direction:column} .left{width:100%} }
</style>
</head>
<body>

<audio id="bgm" src="https://cdn.pixabay.com/audio/2022/08/04/audio_2dde649a33.mp3" loop></audio>
<audio id="sfx-turn" src="https://cdn.pixabay.com/audio/2022/03/15/audio_731c045b61.mp3"></audio>

<div class="wrap">
  <div class="header">
    <div class="title">Ancient Calling</div>
    <div class="subtitle">나의 다중지능을 찾아 떠나는 모험</div>
  </div>

  <div class="layout">
    <div class="left">
      <div class="card">
        <label>모험가 이름</label>
        <input id="input-name" type="text" placeholder="예: 김민준" />
        <label>소속 (반)</label>
        <input id="input-class" type="text" placeholder="예: 1학년 3반" />
        <label>여정을 함께할 동료</label>
        <div id="char-row" class="char-row">
          <div class="char" data-id="prince"><div class="emoji">🤴</div><div class="name">용감한 왕자</div></div>
          <div class="char" data-id="princess"><div class="emoji">👸</div><div class="name">지혜로운 공주</div></div>
          <div class="char" data-id="warrior"><div class="emoji">⚔️</div><div class="name">강인한 전사</div></div>
          <div class="char" data-id="wizard"><div class="emoji">🔮</div><div class="name">신비한 마법사</div></div>
        </div>
        <div style="margin-top:20px;">
          <button id="btn-start" class="btn" disabled>▶ 모험 시작하기</button>
        </div>
      </div>

      <div id="stats-panel" class="card" style="margin-top:12px; display:none;">
         <div id="stats" class="stats-grid"></div>
      </div>
    </div>

    <div class="right">
      <div id="game-card" class="card">
        <div id="pre-game">
          <div style="text-align:center; padding-top: 80px;">
            <h3 style="font-family:'Cinzel', serif; color: var(--brown-text);">📜 모험의 서막</h3>
            <p style="font-size: 1.1rem; line-height: 1.8;">이름과 소속을 적고, 여정을 함께할 동료를 선택하세요.<br>당신의 선택이 모여 미래의 길을 밝혀줄 것입니다.<br>이제, 고대의 부름에 응답할 시간입니다.</p>
          </div>
        </div>

        <div id="game-area" style="display:none">
          <div class="quest-header">
            <h3 id="quest-title"></h3>
          </div>
          <div id="quest-text" class="quest-text"></div>
          <div id="options" class="options"></div>
        </div>
        
        <div id="result-area" style="display:none; padding-top: 50px;">
          <div class="result-content" id="result-content"></div>
          <button id="btn-restart" class="btn" style="max-width:300px; margin: 20px auto 0;">🔄 새로운 모험 시작하기</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// DOM 요소 가져오기
const el = id => document.getElementById(id);

// 게임 변수
let player = {
    name: '',
    class: '',
    companion: null
};
let scores = {
    linguistic: 0,
    logical: 0,
    spatial: 0,
    bodily: 0,
    musical: 0,
    interpersonal: 0,
    intrapersonal: 0,
    naturalist: 0
};
let currentQuestIndex = 0;
let questLine = null;

// 지능 이름 매핑 (코드 전체에서 한 번만 정의)
const mapNames = {
    linguistic: '언어 지능',
    logical: '논리-수학 지능',
    spatial: '공간 지능',
    bodily: '신체-운동 지능',
    musical: '음악 지능',
    interpersonal: '대인관계 지능',
    intrapersonal: '자기이해 지능',
    naturalist: '자연친화 지능'
};

// 사운드 객체
const sounds = {
    bgm: document.getElementById('bgm'),
    turn: document.getElementById('sfx-turn'),
};
sounds.bgm.volume = 0.2; // BGM 볼륨 조절

document.body.addEventListener('click', () => {
    if (sounds.bgm.paused) {
        sounds.bgm.play().catch(e => console.log("BGM 자동재생이 차단되었습니다."));
    }
}, { once: true });


/* ====== 퀘스트 데이터 (전체 80개) ====== */
function q(title, text, a, b, c, d){ return { title, text, options:[a,b,c,d] }; }
function opt(text, effects){ return {t:text, e:effects}; }

const quests = {
  // Prince Questline (20 Quests)
  prince: [
    q("왕의 서신", "먼지 쌓인 서고에서 아버지의 흔적이 담긴 낡은 편지를 발견했다. '진정한 왕의 자격은 왕관이 아닌, 백성을 비추는 빛에 있나니. 그 빛을 따라가거라.' 이 수수께끼 같은 유언의 실마리는 어디서부터 찾아야 할까?",
      opt('📜 편지에 쓰인 단어들의 상징적 의미를 파고들어 분석한다.',{linguistic:14}),
      opt('🗺️ 편지에 남은 희미한 지도의 흔적을 따라 직접 현장으로 향한다.',{bodily:12,spatial:6}),
      opt('👥 편지를 마지막으로 만졌을 법한 왕궁의 오랜 신하를 찾아가 대화한다.',{interpersonal:12,logical:6}),
      opt('🌿 편지지에서 희미하게 나는 풀 향기를 단서로, 특정 지역의 식생를 조사한다.',{naturalist:8,spatial:6})
    ),
    q("시장의 현자", "시장에 도착하자, 한 노인이 당신을 알아보고 다가와 속삭였다. '왕께서 찾던 빛은 북쪽 숲의 심장, 가장 오래된 고목에서 나온다네.' 그의 말을 어떻게 받아들여야 할까?",
      opt('💬 노인의 이야기에 진심으로 감사하며, 숲에 대한 다른 전설은 없는지 묻는다.',{interpersonal:12,linguistic:6}),
      opt('🧭 즉시 숲으로 달려가기보다, 먼저 도서관에서 북쪽 숲에 대한 자료를 찾아본다.',{logical:12,linguistic:6}),
      opt('🤝 탐험대를 꾸려 함께 숲으로 떠난다. 여러 눈으로 보는 것이 더 정확할 것이다.',{interpersonal:12,bodily:6}),
      opt('🌲 그의 말이 사실인지 확인하기 위해, 즉시 혼자서 숲의 고목을 찾아 나선다.',{bodily:12,naturalist:6})
    ),
    q("별자리石", "숲길을 걷다, 이끼 낀 바위 위에 고대의 별자리와 닮은 문양이 새겨진 돌을 발견했다. 이 돌은 무엇을 의미할까?",
      opt('✍️ 문양을 양피지에 똑같이 베껴 그리고, 각 상징의 의미를 추론해본다.',{linguistic:12,spatial:4}),
      opt('⭐ 밤하늘의 실제 별자리와 돌의 문양을 대조하여 방향을 찾는다.',{spatial:14,naturalist:4}),
      opt('🪨 돌 주변의 흙과 식물을 관찰하여, 이 돌이 언제부터 이곳에 있었는지 추정한다.',{naturalist:12,logical:4}),
      opt('🤔 잠시 명상에 잠겨, 이 문양이 나에게 어떤 영감을 주는지 내면의 소리에 귀 기울인다.',{intrapersonal:12})
    ),
    q("숲의 울림", "밤이 되자 숲 속에서 규칙적인 북소리 같은 울림이 들려온다. 불안해하는 동료들 사이에서, 당신은 어떻게 행동할까?",
      opt('🎶 울림의 박자와 리듬을 분석하여, 그것이 인공적인 신호인지 자연적인 소리인지 판단한다.',{musical:14,logical:4}),
      opt('🏕️ 즉시 안전한 야영지를 구축하고, 교대로 불침번을 서며 동료들을 안심시킨다.',{bodily:12,interpersonal:8}),
      opt('🤫 소리의 근원지를 향해 조심스럽게 다가가, 정체가 무엇인지 직접 확인한다.',{bodily:12,spatial:4}),
      opt('🤝 동료들을 모아 각자의 의견을 듣고, 다 함께 다음 행동을 결정한다.',{interpersonal:14})
    ),
    q("고목의 비문", "마침내 거대한 고목을 찾았다. 그 앞에는 글자가 거의 지워진 낡은 비문이 서 있다. '오직 [■■] 자만이 빛을 보리라.' 비문의 내용을 어떻게 알아낼까?",
      opt('🔎 남아있는 글자의 형태와 조각들을 조합하여 사라진 단어를 추리한다.',{linguistic:14}),
      opt('📜 주변에서 비문과 비슷한 시대의 다른 유적을 찾아, 사용된 언어의 패턴을 비교 분석한다.',{logical:10,spatial:6}),
      opt('🖐️ 비문 표면을 손으로 직접 문질러, 마모된 글자의 흔적을 감각으로 읽어낸다.',{bodily:12,naturalist:4}),
      opt('❓ '만약 내가 비문을 세웠다면 어떤 단어를 썼을까?' 스스로 질문하며 답을 찾는다.',{intrapersonal:12,linguistic:4})
    ),
    q("가뭄의 마을", "숲을 나오자 극심한 가뭄으로 고통받는 마을을 마주쳤다. 물을 찾아달라는 마을 사람들의 간절한 눈빛을 외면할 수 없다. 어떻게 그들을 도울까?",
      opt('🌊 주변 지형을 정밀하게 분석하여, 지하 수맥이 있을 만한 곳을 찾아낸다.',{logical:12,spatial:8}),
      opt('💪 마을 사람들을 조직하고 격려하며, 다 함께 우물을 파는 작업에 직접 참여한다.',{interpersonal:14,bodily:6}),
      opt('🌱 가뭄에도 잘 자라는 식물들을 추적하여, 물이 있는 곳의 단서를 찾는다.',{naturalist:12}),
      opt('🗣️ 물 분배 문제로 다투는 마을 사람들을 중재하고, 모두가 합의할 규칙을 만든다.',{interpersonal:14,linguistic:6})
    ),
    q("광장의 노래", "마을 광장에서 한 음유시인이 '빛을 잃은 왕관'에 대한 노래를 부르고 있다. 가사 속에 중요한 단서가 있을지도 모른다.",
      opt('🎼 노래의 가사 하나하나를 빠짐없이 기록하고, 그 안에 숨겨진 은유를 분석한다.',{linguistic:12,musical:6}),
      opt('😊 노래가 끝난 후, 음유시인에게 다가가 그의 이야기에 깊은 관심을 보이며 추가 정보를 얻는다.',{interpersonal:12}),
      opt('🗺️ 노래에 묘사된 '세 개의 봉우리'나 '붉은 강' 같은 지형을 지도에서 찾아본다.',{spatial:12}),
      opt('🎵 가사보다는 노래의 슬픈 멜로디에 집중하여, '잃어버린 왕관'의 감정적 의미를 파악한다.',{musical:12,intrapersonal:4})
    ),
    q("국경의 의심", "단서를 따라 도착한 국경 요새. 하지만 수비대는 당신의 신분을 의심하며 길을 열어주지 않는다. 어떻게 이 상황을 해결할까?",
      opt('👑 나의 신분과 여정의 목적을 논리정연하고 설득력 있게 설명하여 신뢰를 얻는다.',{linguistic:14,interpersonal:6}),
      opt('🛡️ 수비대의 경계심을 이해한다고 말하며, 그들의 임무를 존중하는 태도를 보인다.',{interpersonal:16}),
      opt('🔍 지금까지 모아온 증거물(편지, 지도 조각 등)을 제시하여 나의 주장을 증명한다.',{logical:12}),
      opt('⏳ 당장 통과하려 하지 않고, 요새 밖에서 머물며 그들이 마음을 열 때까지 기다린다.',{intrapersonal:12})
    ),
    q("왕의 시험", "마침내 왕 앞에 선 당신. 그는 시험하듯 묻는다. '백성의 행복과 왕국의 안정, 둘 중 하나만 택해야 한다면 무엇을 택하겠는가?' 당신의 답은?",
      opt('💬 '백성의 행복이 곧 왕국의 가장 튼튼한 기반입니다.'라고 답하며 구체적인 정책을 제시한다.',{interpersonal:16,linguistic:6}),
      opt('⚖️ '안정 없는 행복은 신기루와 같으니, 먼저 튼튼한 방벽을 쌓겠습니다.'라고 답한다.',{logical:14,bodily:6}),
      opt('❓ '그 둘은 분리될 수 없습니다. 왜 그런 선택을 해야만 하는가?' 스스로 되묻는다.',{intrapersonal:12,logical:8}),
      opt('🎨 '교육과 예술을 통해 백성들의 마음을 풍요롭게 하는 것이 장기적인 안정의 길입니다.'라고 답한다.',{linguistic:12,musical:4})
    ),
    q("고대의 장치", "왕이 인정한 당신에게 마지막 장소의 지도가 주어진다. 그곳엔 복잡한 고대 장치가 잠들어 있다. 어떻게 작동시킬까?",
      opt('⚙️ 톱니바퀴와 문양들의 관계를 분석하여, 장치의 논리적인 작동 원리를 파악한다.',{logical:14,spatial:6}),
      opt('✋ 장치의 여러 부분을 직접 만지고 움직여보며, 물리적인 반응을 통해 해법을 찾는다.',{bodily:12}),
      opt('🔊 장치에서 주기적으로 들려오는 미세한 소리의 높낮이와 패턴에서 단서를 찾는다.',{musical:12}),
      opt('🌿 장치 주변에만 자라는 특이한 식물이나 이끼를 통해, 장치의 에너지원을 추측한다.',{naturalist:12})
    ),
    q("길 잃은 아이", "장치를 작동시키자 새로운 길이 열렸다. 하지만 그 길목에서, 겁에 질려 울고 있는 한 아이를 발견했다. 어떻게 할 것인가?",
      opt('❤️ 아이의 눈높이에 맞춰 앉아, 부드러운 목소리로 안심시키며 무슨 일이 있었는지 들어준다.',{interpersonal:14}),
      opt('👣 아이가 걸어온 방향의 발자국이나 흔적을 찾아, 부모를 찾을 단서를 수집한다.',{spatial:12,naturalist:8}),
      opt('🎵 아이의 긴장을 풀어주기 위해, 재미있는 노래를 불러주거나 작은 놀이를 함께 한다.',{musical:10,interpersonal:6}),
      opt('🤔 일단 아이를 안전한 곳으로 데려간 뒤, 침착하게 아이를 찾을 최선의 방법을 계획한다.',{logical:12,intrapersonal:6})
    ),
    q("마을의 전설", "아이를 부모에게 돌려보내자, 마을 사람들이 당신에게 고대의 전설을 들려준다. '세상의 끝에는 모든 지혜가 잠들어 있는 샘이 있다'고 한다. 어떻게 이 전설을 탐색할까?",
      opt('📜 전설에 등장하는 지명과 단어들을 철저히 조사하여, 숨겨진 의미를 파악한다.',{linguistic:14}),
      opt('🗺️ 전설에서 묘사된 지형적 특징들을 지도에 표시하고, 예상 경로를 설정한다.',{spatial:14}),
      opt('👥 마을의 현자나 나이 많은 이들을 찾아가 전설에 대한 더 자세한 이야기를 듣는다.',{interpersonal:12,linguistic:6}),
      opt('🧘‍♀️ 전설의 내용을 곰곰이 생각하며, 내가 중요하게 생각하는 가치와 연결시켜 본다.',{intrapersonal:12,logical:4})
    ),
    q("어둠의 동굴", "전설을 따라가다 어둠과 습기로 가득 찬 동굴을 만났다. 동굴 안에는 길을 잃은 듯한 불빛들이 깜빡인다. 어떻게 동굴을 통과할까?",
      opt('💡 동굴의 지형과 불빛의 패턴을 분석하여, 안전한 길을 찾아낸다.',{logical:14,spatial:8}),
      opt('✋ 동굴 벽을 손으로 짚어가며, 발의 감각을 이용해 길을 찾는다.',{bodily:14,intrapersonal:6}),
      opt('🔊 동굴에서 들려오는 메아리 소리의 방향을 분석하여, 출구를 짐작한다.',{musical:12}),
      opt('🔦 횃불을 밝혀 주변 환경을 밝히고, 어둠 속에 숨어 있는 위험을 찾아낸다.',{naturalist:12})
    ),
    q("고대 부족", "동굴을 통과하자 외부와 단절된 고대 부족을 만났다. 그들은 낯선 당신을 경계한다. 어떻게 그들과 소통할까?",
      opt('🗣️ 그들의 몸짓과 소리를 주의 깊게 관찰하여, 비언어적인 방식으로 소통을 시도한다.',{linguistic:14,interpersonal:10}),
      opt('🤝 부족민들에게 먼저 다가가, 존중과 평화의 제스처를 보인다.',{interpersonal:16}),
      opt('🎁 그들에게 작은 선물이나 유용한 물건을 건네며 신뢰를 얻는다.',{logical:12,interpersonal:8}),
      opt('🌿 주변의 식물을 이용해 그들의 문화와 자연의 연관성을 파악한다.',{naturalist:12,spatial:6})
    ),
    q("춤의 의식", "부족민들은 당신에게 그들의 전통 의식인 '춤의 의식'에 참여해달라고 요청한다. 어떻게 참여할까?",
      opt('🕺 부족민들의 춤 동작을 유심히 관찰하고, 그들의 리듬을 몸으로 익혀 따라 한다.',{bodily:16,musical:8}),
      opt('🎵 의식에서 연주되는 음악의 특징을 파악하고, 그에 맞는 나만의 춤을 창조한다.',{musical:14,intrapersonal:6}),
      opt('🤔 춤의 의미와 역사를 부족민들에게 물어보며, 의식에 대한 이해를 깊게 한다.',{linguistic:12,interpersonal:8}),
      opt('👀 춤을 추는 부족민들의 표정과 몸짓에서 그들의 감정을 읽고 공감한다.',{interpersonal:14})
    ),
    q("지혜의 샘", "모든 시련을 이겨내고 마침내 지혜의 샘에 도착했다. 샘물은 당신의 과거와 미래를 비춘다. 무엇을 볼 것인가?",
      opt('📚 샘물에 비친 과거의 지식들을 흡수하여, 나의 지능을 더욱 확장한다.',{linguistic:16,logical:10}),
      opt('💡 샘물이 보여주는 미래의 가능성 중, 가장 논리적이고 현실적인 길을 선택한다.',{logical:16,intrapersonal:8}),
      opt('💖 샘물에 비친 사람들의 행복한 모습을 보며, 그들을 위해 무엇을 할 수 있을지 생각한다.',{interpersonal:16,intrapersonal:8}),
      opt('🌌 샘물이 보여주는 우주의 신비와 자연의 섭리를 깊이 관찰한다.',{naturalist:16,spatial:10})
    ),
    q("샘물의 시험", "지혜의 샘은 당신에게 마지막 시험을 제시한다. '가장 위대한 지혜는 무엇인가?' 당신의 답은?",
      opt('💬 '타인의 아픔에 공감하고 사랑하는 마음입니다.'라고 답한다.',{interpersonal:16}),
      opt('🧠 '세상을 이해하고 문제를 해결하는 논리적 사고입니다.'라고 답한다.',{logical:16}),
      opt('🌳 '자연의 순리와 조화를 이해하는 것입니다.'라고 답한다.',{naturalist:16}),
      opt('🎶 '아름다움을 창조하고 감동을 주는 예술적 영감입니다.'라고 답한다.',{musical:16})
    ),
    q("진정한 왕의 귀환", "모든 시험을 통과하고 샘의 축복을 받은 당신. 이제 진정한 왕으로서 왕국으로 돌아갈 시간이다. 어떤 모습으로 돌아갈 것인가?",
      opt('👑 위엄과 지혜를 겸비한 모습으로 돌아가, 왕국을 평화롭게 다스린다.',{linguistic:14,interpersonal:12}),
      opt('💪 백성들을 이끌고 직접 나라를 재건하며, 강인한 리더십을 보여준다.',{bodily:14,interpersonal:10}),
      opt('✨ 백성들에게 새로운 지식과 예술을 전파하며, 문명의 발전을 이끈다.',{logical:14,musical:10}),
      opt('🌿 자연과 인간이 조화롭게 살아가는 이상적인 왕국을 건설한다.',{naturalist:14,intrapersonal:10})
    ),
    q("계승자의 명예", "왕위에 오른 당신은 이제 미래를 위한 결정을 해야 한다. 당신의 후계자는 어떤 자질을 가진 인물이어야 하는가?",
      opt('📚 뛰어난 언어 능력과 지식을 겸비한 학자를 후계자로 지명한다.',{linguistic:14,logical:8}),
      opt('💖 백성을 사랑하고 공감 능력이 뛰어난 인물을 후계자로 삼는다.',{interpersonal:16}),
      opt('⚔️ 위기 상황에 강인하게 대처하고, 백성을 직접 보호할 수 있는 용사를 택한다.',{bodily:14,spatial:8}),
      opt('🧘‍♀️ 자신의 내면을 깊이 이해하고, 백성들의 마음을 헤아릴 수 있는 현자를 선택한다.',{intrapersonal:16})
    ),
    q("평화로운 시대", "당신의 통치 아래 왕국은 평화롭고 번영한다. 백성들은 당신을 영원히 기억할 것이다. 당신의 치세는 어떤 모습으로 역사에 기록될까?",
      opt('✨ 지혜와 정의로움으로 모든 갈등을 해결하고, 평화로운 시대를 이룩한 왕으로 기억된다.',{logical:14,interpersonal:12}),
      opt('🎨 예술과 학문을 장려하여, 문화적 황금기를 이끈 위대한 군주로 칭송받는다.',{musical:14,linguistic:12}),
      opt('🌳 자연과 조화를 이루는 정책으로, 풍요로운 환경을 조성한 환경 친화적인 왕으로 기록된다.',{naturalist:14,bodily:10}),
      opt('❤️ 백성들의 마음을 하나로 모아, 모두가 행복한 공동체를 만든 따뜻한 왕으로 기억된다.',{intrapersonal:14,interpersonal:14})
    )
  ],
  // Princess Questline (20 Quests)
  princess: [
    q("잃어버린 일기장", "성 정원 가장 깊은 곳, 비밀의 샘 근처에서 낡은 일기장을 발견했다. 공주님이 썼을 법한 섬세한 글씨로 '가장 귀한 보석은 마음속에 있다'고 적혀있다. 그 의미를 어떻게 해석해야 할까?",
      opt('✍️ 문장 하나하나의 의미를 깊이 생각하고, 숨겨진 비유와 상징을 찾아본다.',{linguistic:14}),
      opt('🤔 조용히 샘물가에 앉아, 나 자신의 내면을 들여다보며 그 의미를 깨닫고자 한다.',{intrapersonal:14,interpersonal:6}),
      opt('🏰 일기장에 묘사된 정원의 지형과 비밀 통로를 지도에 표시해본다.',{spatial:12}),
      opt('👥 일기장의 필체를 아는 궁중 화가를 찾아가, 일기장의 주인을 추론한다.',{interpersonal:12,logical:4})
    ),
    q("정원의 수수께끼", "일기장에는 '해가 지는 방향으로 일곱 걸음, 그리고 밤의 노래가 끝날 때'라는 알쏭달쏭한 구절이 있다. 이 수수께끼를 어떻게 풀어야 할까?",
      opt('🧭 정확히 서쪽으로 일곱 걸음을 걸은 뒤, 밤의 별자리와 달의 위치를 관찰한다.',{spatial:14,naturalist:6}),
      opt('🎵 밤이 되었을 때, 정원에서 들려오는 모든 소리를 주의 깊게 듣고 패턴을 분석한다.',{musical:12,logical:6}),
      opt('🏃‍♀️ 일곱 걸음을 걷는 가장 효율적인 움직임을 연구하여, 최단 경로로 이동한다.',{bodily:10,logical:6}),
      opt('📖 일기장 속 다른 구절들과 연관성을 찾아, 구절의 진정한 의미를 추론한다.',{linguistic:12})
    ),
    q("궁정 연회", "다음 단서가 궁정 연회에 숨겨져 있다는 것을 알게 되었다. 하지만 사람들로 붐비는 곳에서 단서를 찾는 것은 쉽지 않다. 어떻게 행동할까?",
      opt('🤫 연회장의 모든 대화를 주의 깊게 엿들어, 중요한 정보를 찾아낸다.',{linguistic:14,interpersonal:6}),
      opt('🕺 음악에 맞춰 춤을 추며 자연스럽게 사람들과 어울려 정보를 얻는다.',{bodily:12,interpersonal:8}),
      opt('🖼️ 연회장 벽에 걸린 그림들과 장식품의 배치를 분석하여 단서를 찾는다.',{spatial:12}),
      opt('🤐 조용히 구석에 앉아, 나 자신에게 주어진 임무에 대해 깊이 생각한다.',{intrapersonal:12})
    ),
    q("무도회장의 가면", "무도회에서 가면을 쓴 수상한 사람이 당신에게 귓속말로 '자정의 종소리에 맞춰 정원의 분수대로 오라'고 속삭였다. 어떻게 할까?",
      opt('🕵️‍♀️ 수상한 사람의 걸음걸이와 행동 패턴을 분석하여, 그의 신분을 추정한다.',{bodily:12,logical:6}),
      opt('⏰ 약속 장소에 미리 도착해 분수대 주변의 모든 지형을 살핀다.',{spatial:12,intrapersonal:6}),
      opt('🤝 주변 사람들에게 그 수상한 사람에 대해 물어보며 정보를 모은다.',{interpersonal:14}),
      opt('🎶 자정의 종소리 소리를 기억하며, 그 소리가 울리는 방식에 집중한다.',{musical:12})
    ),
    q("사서의 부탁", "도서관에서 단서를 찾던 중, 사서가 당신에게 곤란한 부탁을 한다. '오래된 책들의 순서가 뒤섞였으니, 제자리를 찾아달라'고 한다. 어떻게 할까?",
      opt('📚 책의 내용과 저술 시기를 분석하여, 논리적인 순서대로 배열한다.',{logical:14,linguistic:6}),
      opt('🏃‍♀️ 책을 들고 빠르게 도서관을 돌아다니며, 원래의 위치를 찾아낸다.',{bodily:12}),
      opt('🧐 책장에 남은 미세한 먼지 흔적이나 빛바랜 자국을 통해, 책의 원래 위치를 추정한다.',{naturalist:12,spatial:6}),
      opt('💬 사서와 다른 사람들에게 책의 원래 순서에 대해 물어본다.',{interpersonal:14})
    ),
    q("미로 정원", "단서를 따라 도착한 곳은 복잡한 미로 정원. 길을 잃지 않고 지나가는 방법은 무엇일까?",
      opt('🧭 미로의 전체 지도를 머릿속에 그리며, 가장 효율적인 경로를 계산한다.',{spatial:14,logical:6}),
      opt('👣 벽을 한쪽 손으로 계속 짚으며 나아가는 가장 고전적인 방법을 사용한다.',{bodily:12,intrapersonal:4}),
      opt('🐦 미로 안에서 울고 있는 새의 소리를 듣고, 그 소리의 방향을 따라간다.',{musical:12}),
      opt('🌱 미로 벽에 붙어있는 식물들의 생장 방향을 관찰하여, 햇빛이 드는 방향을 추론한다.',{naturalist:12,spatial:4})
    ),
    q("비밀의 방", "미로를 통과하자 벽에 비밀의 방으로 통하는 문이 나타났다. 하지만 문에는 복잡한 기하학적 문양이 새겨져 있다. 어떻게 문을 열까?",
      opt(' geometrically 문양의 도형들과 패턴을 분석하여, 숨겨진 규칙을 찾아낸다.',{logical:14,spatial:8}),
      opt('💬 문양의 의미를 고대 문헌에서 찾아, 올바른 주문을 외운다.',{linguistic:12}),
      opt('🖐️ 문양의 각 부분을 직접 만져보고, 그 촉감과 무게에서 해답을 찾는다.',{bodily:12}),
      opt('🤔 문양을 보는 순간 떠오르는 영감에 따라 문을 조작해본다.',{intrapersonal:14})
    ),
    q("가시 덤불", "비밀의 방으로 가는 길목을 가시 덤불이 막고 있다. 덤불을 뚫고 가야 한다.",
      opt('✂️ 날카로운 도구를 사용하여 덤불의 가장 약한 부분을 체계적으로 잘라낸다.',{logical:12,bodily:6}),
      opt('🎶 노래를 부르며 덤불을 뚫고 나아간다. 흥겨운 리듬이 힘든 여정을 잊게 해 줄 것이다.',{musical:10,intrapersonal:8}),
      opt('🌳 덤불을 이루는 식물의 종류와 특성을 파악하여, 가장 효율적인 통로를 찾는다.',{naturalist:14,spatial:6}),
      opt('🤝 함께 온 동료들과 힘을 합쳐 덤불을 치워 길을 만든다.',{interpersonal:14,bodily:6})
    ),
    q("보석의 노래", "비밀의 방 안에는 아름다운 보석들이 놓여 있다. 그 중 하나가 미세하게 떨리며 이상한 소리를 낸다.",
      opt('👂 보석의 떨림이 만들어내는 소리의 파장과 멜로디를 분석한다.',{musical:16}),
      opt('💎 보석의 종류와 광물학적 특징을 파악하여, 그것이 어떤 물질에 반응하는지 알아본다.',{naturalist:12,logical:8}),
      opt('💬 보석이 내는 소리를 글로 기록하고, 그 의미를 해독한다.',{linguistic:12,logical:4}),
      opt('🧘‍♀️ 보석이 내는 소리에 집중하며, 그 소리가 내면에 어떤 감정을 일으키는지 느낀다.',{intrapersonal:14})
    ),
    q("진정한 공주", "마침내 모든 단서를 해독하고 진정한 왕녀의 자격을 증명하는 시험에 임한다. '힘과 지혜 중, 진정으로 중요한 것은 무엇인가?'라는 질문을 받았다. 당신의 답은?",
      opt('🧠 '지혜가 힘의 방향을 결정합니다.'라고 답하며 논리적인 근거를 제시한다.',{logical:16}),
      opt('🗣️ '진정한 힘은 백성들의 마음을 얻는 데서 나옵니다. 지혜롭게 소통하는 것이 중요합니다.'라고 답한다.',{interpersonal:16,linguistic:6}),
      opt('⚖️ '둘은 분리될 수 없습니다. 힘이 지혜를 뒷받침하고 지혜가 힘을 올바르게 이끌어야 합니다.'라고 답한다.',{intrapersonal:14}),
      opt('🤝 '동료들과 힘을 합칠 때 진정한 힘이 발현됩니다.'라고 답하며 연대의 중요성을 강조한다.',{interpersonal:12,bodily:8})
    ),
    q("돌...
  // Warrior Questline (20 Quests)
  warrior: [
    q("용사의 부름", "평화로운 마을에 재앙의 그림자가 드리워졌다. 왕궁은 강력한 용사의 부름을 내렸다. 당신은 어떻게 이 부름에 응답할 것인가?",
      opt('💪 검을 굳게 잡고, 혼자 힘으로 재앙의 근원지를 찾아 떠난다.',{bodily:16}),
      opt('🗺️ 마을의 오랜 지도를 펼쳐, 재앙이 시작된 지점의 지형적 특징을 분석한다.',{spatial:12,logical:6}),
      opt('👥 마을 사람들을 모아 재앙에 대한 증언을 듣고, 함께 대책을 세운다.',{interpersonal:12,linguistic:6}),
      opt('🤔 조용히 혼자 명상하며, 재앙을 막을 가장 현명한 방법을 모색한다.',{intrapersonal:14})
    ),
    q("훈련의 시간", "강력한 적을 물리치기 위해 고된 훈련이 필요하다. 어떤 훈련에 집중할 것인가?",
      opt('⚔️ 검술과 활쏘기 등 신체를 단련하는 훈련을 반복한다.',{bodily:16}),
      opt('🧠 전투에 대한 고대 전술 서적을 읽고, 적의 움직임을 예측하는 훈련을 한다.',{logical:14,spatial:6}),
      opt('🗣️ 동료들과 함께 실전처럼 모의 전투를 하며 소통 능력을 기른다.',{interpersonal:12,bodily:4}),
      opt('🌳 숲 속에서 자연의 소리에 귀를 기울이며, 평정심을 유지하는 훈련을 한다.',{intrapersonal:12,musical:4})
    ),
    q("전장의 노래", "진군하는 병사들의 사기가 땅에 떨어졌다. 용사인 당신은 이 상황을 어떻게 해결할까?",
      opt('📢 우렁찬 목소리로 병사들을 향해 승리를 향한 연설을 한다.',{linguistic:14,interpersonal:6}),
      opt('🥁 북을 쳐서 행진의 리듬을 다시 맞추고, 병사들의 사기를 끌어올린다.',{musical:14,bodily:6}),
      opt('⚔️ 최전선에 서서 가장 먼저 적과 맞서 싸우며 병사들에게 용기를 보여준다.',{bodily:16}),
      opt('👀 병사들 한 명 한 명의 눈을 바라보며, 개인적인 격려와 조언을 건넨다.',{interpersonal:14})
    ),
    q("바위산의 오르막", "재앙의 근원지를 향해 험준한 바위산을 올라야 한다. 어떻게 이 험난한 길을 극복할까?",
      opt('🧗‍♀️ 가장 효율적인 경로를 파악하여, 최소한의 힘으로 산을 오른다.',{spatial:14,bodily:8}),
      opt('💪 온몸의 근육을 사용해 바위를 잡고 당기며, 순수한 힘으로 산을 정복한다.',{bodily:16,intrapersonal:4}),
      opt('🔍 바위의 틈새나 이끼의 종류를 관찰하여, 안전한 발판을 찾는다.',{naturalist:14,logical:4}),
      opt('💬 동료들에게 길을 묻거나 도움을 요청하며 함께 나아간다.',{interpersonal:12})
    ),
    q("기습 공격", "산 정상에서 매복해 있던 적의 기습 공격을 받았다. 어떻게 대처할 것인가?",
      opt('💥 적의 공격 패턴을 순식간에 파악하고, 빈틈을 노려 반격한다.',{logical:14,bodily:6}),
      opt('🛡️ 방패를 들고 동료들을 보호하며, 모두 함께 후퇴할 시간을 번다.',{interpersonal:14,bodily:6}),
      opt('🏃‍♀️ 적의 공격 범위를 벗어날 수 있는 안전한 지형을 빠르게 찾는다.',{spatial:12,intrapersonal:6}),
      opt('🦅 적의 움직임에서 들려오는 미세한 소리를 통해 다음 공격을 예측한다.',{musical:12,bodily:4})
    ),
    q("적의 약점", "강력한 적을 마주했다. 적은 막강한 힘을 가졌지만, 반드시 약점이 있을 것이다. 어떻게 약점을 찾을까?",
      opt('🔭 적의 행동 하나하나를 분석하여, 움직임의 비논리적인 패턴을 찾아낸다.',{logical:14,spatial:8}),
      opt('🎶 적이 내는 소리나 울음소리에서 공명하는 부분을 찾아, 약한 부위를 공략한다.',{musical:12,logical:4}),
      opt('🗣️ 동료들에게 적에 대해 아는 것이 있는지 물어보며 정보를 취합한다.',{interpersonal:14}),
      opt('⚔️ 직접 부딪혀가며 적의 방어 체계 중 가장 약한 부분을 몸으로 찾아낸다.',{bodily:16})
    ),
    q("포획된 동료", "적과의 전투 중 동료가 붙잡혔다. 당신은 어떻게 동료를 구할 것인가?",
      opt('🏃‍♀️ 적의 시선을 끌기 위해 일부러 위험한 행동을 하며 동료를 구출할 시간을 번다.',{bodily:14,intrapersonal:6}),
      opt('👥 협상과 설득을 통해 적에게 동료를 풀어줄 것을 요구한다.',{linguistic:14,interpersonal:8}),
      opt('🔎 주변 지형을 이용해 적에게 기습 공격을 가할 계획을 세운다.',{spatial:12,logical:8}),
      opt('😭 자신의 감정을 솔직하게 드러내며 동료를 향한 마음을 외친다.',{intrapersonal:12})
    ),
    q("평화의 협상", "적을 물리친 후, 그들이 왜 재앙을 일으켰는지 알게 되었다. 그들 역시 고통받는 존재였다. 어떻게 그들과 평화를 이룰까?",
      opt('💬 적의 언어를 배워 그들의 고통에 공감하고, 평화적인 해결책을 논리적으로 제시한다.',{linguistic:16,interpersonal:8}),
      opt('🤝 적의 우두머리에게 직접 다가가, 악수하며 서로의 상처를 치유할 방법을 찾는다.',{interpersonal:16}),
      opt('💪 전쟁의 고통을 잊을 수 있도록, 함께 신체를 움직이는 축제를 제안한다.',{bodily:12,musical:4}),
      opt('🧘‍♀️ 내면의 평화를 먼저 찾고, 그 평화를 적들에게 전파한다.',{intrapersonal:14})
    ),
    q("마을의 재건", "재앙이 끝난 후, 파괴된 마을을 재건해야 한다. 당신의 역할은 무엇인가?",
      opt('🔨 무너진 건물들을 복구하고, 새로운 방어 시설을 직접 건설한다.',{bodily:14,spatial:6}),
      opt('✍️ 마을의 재건 계획을 상세히 기록하고, 자원 분배를 공정하게 관리한다.',{logical:14,linguistic:6}),
      opt('🌳 재앙으로 황폐해진 땅을 복구하기 위해, 새로운 작물을 심고 자연을 되살린다.',{naturalist:14}),
      opt('❤️ 마을 사람들의 아픔을 어루만지고, 그들이 다시 일어설 수 있도록 돕는다.',{interpersonal:16})
    ),
    q("최후의 선택", "당신은 영웅으로 추앙받게 되었다. 왕궁은 당신에게 높은 직위를 제안하지만, 평범한 삶으로 돌아가고 싶은 마음이 든다. 당신의 선택은?",
      opt('👑 왕의 제안을 받아들이고, 용사로서의 경험을 바탕으로 왕국을 지키는 역할을 한다.',{interpersonal:14,linguistic:8}),
      opt('🏞️ 모든 명예를 뒤로하고, 한적한 곳에서 자연과 함께 평화로운 삶을 시작한다.',{naturalist:14,intrapersonal:10}),
      opt('🌍 다시 모험을 떠나, 더 큰 위협으로부터 세상을 구원하는 길을 걷는다.',{bodily:16,spatial:12}),
      opt('🤔 왕의 제안과 개인의 행복 사이에서 깊은 고뇌에 빠진다.',{intrapersonal:16})
    ),
    q("산...
  // Wizard Questline (20 Quests)
  wizard: [
    q("마법의 서적", "오래된 마법 도서관에서 신비한 힘을 가진 고대 서적을 발견했다. 하지만 봉인되어 있어 쉽게 열 수 없다. 어떻게 봉인을 풀 것인가?",
      opt('🔮 책에 적힌 복잡한 마법 기호를 분석하고, 그 안에 담긴 논리적 패턴을 찾아낸다.',{logical:16,linguistic:6}),
      opt('🗣️ 책에 쓰인 고대 주문을 정확한 발음과 억양으로 소리 내어 읽어본다.',{musical:14,linguistic:4}),
      opt('✋ 손으로 책의 표면을 쓸어, 봉인에 남아있는 미세한 마나의 흐름을 감지한다.',{bodily:12,intrapersonal:4}),
      opt('🌳 책 주변에 있는 식물들이 책의 마나에 어떻게 반응하는지 관찰한다.',{naturalist:12,spatial:6})
    ),
    q("차원문", "봉인이 풀리자, 책 속에서 차원문이 열렸다. 문 너머는 미지의 세계다. 어떻게 이 세계를 탐험할까?",
      opt('🔭 차원문의 구조를 분석하여, 안정적인 통로를 설계하고 들어간다.',{logical:14,spatial:8}),
      opt('🏃‍♀️ 망설이지 않고 용감하게 차원문 안으로 뛰어든다.',{bodily:14}),
      opt('❤️ 차원문을 통과하기 전, 그 세계에 있을 존재들과의 평화적인 소통을 준비한다.',{interpersonal:14}),
      opt('🤫 주변의 미세한 소리나 떨림을 통해, 차원문 너머의 환경을 예측한다.',{musical:12})
    ),
    q("환상의 숲", "차원문을 통과하자 모든 것이 거꾸로 된 환상의 숲에 도착했다. 나무가 하늘을 향해 자라고, 땅은 반짝이는 별들로 가득하다. 길을 어떻게 찾을까?",
      opt('🗺️ 숲의 기이한 지형을 머릿속에 기억하며, 길을 잃지 않도록 지도를 그린다.',{spatial:14,intrapersonal:6}),
      opt('🌿 숲의 식물들과 상호작용하며, 그들이 가리키는 방향을 따라간다.',{naturalist:14}),
      opt('🤔 숲이 보여주는 환상이 나의 내면과 어떻게 연결되는지 깊이 생각한다.',{intrapersonal:14,logical:4}),
      opt('🎶 숲에서 들려오는 신비한 멜로디에 귀를 기울이며, 음악이 안내하는 곳으로 간다.',{musical:12})
    ),
    q("마법사의 시험", "숲의 입구를 지키는 마법사가 당신에게 난해한 수수께끼를 낸다. '태어나지 않았지만 울음소리가 있고, 몸이 없지만 춤을 추는 것은 무엇인가?'",
      opt('💬 질문의 단어들을 해체하고, 각각의 의미를 논리적으로 재조합해 답을 찾는다.',{linguistic:14,logical:6}),
      opt('🎼 수수께끼를 듣고 떠오르는 음악적 영감을 바탕으로 답을 추리한다.',{musical:14}),
      opt('👥 마법사의 표정과 눈빛을 관찰하여, 힌트를 얻으려고 노력한다.',{interpersonal:12,intrapersonal:4}),
      opt('🧠 잠시 눈을 감고, 내면의 직관에 의존하여 답을 찾는다.',{intrapersonal:14,linguistic:4})
    ),
    q("고대 유적", "수수께끼를 풀고 도착한 고대 유적. 거대한 돌들이 공중에 떠 있고, 중력의 법칙이 무시되는 듯하다. 어떻게 이 유적을 통과할까?",
      opt('🪨 공중에 떠 있는 돌들의 위치와 움직임을 분석하여, 안전한 경로를 계산한다.',{logical:14,spatial:8}),
      opt('🏃‍♀️ 돌들의 움직이는 주기를 파악하고, 빠른 몸놀림으로 그 사이를 통과한다.',{bodily:12,logical:4}),
      opt('✋ 돌들의 표면에 손을 대어, 마나의 흐름을 감지하고 조작한다.',{intrapersonal:12,bodily:4}),
      opt('🗣️ 유적에 남아있는 희미한 글자를 읽고, 유적의 작동 원리에 대한 단서를 찾는다.',{linguistic:12})
    ),
    q("마법의 약초", "유적을 지나자, 어떤 질병이든 고칠 수 있는 마법의 약초가 나타났다. 하지만 약초는 특정 음악에 반응하여 빛을 낸다. 어떻게 약초를 얻을까?",
      opt('🎶 약초 주변의 소리들을 모아, 약초가 좋아하는 음악을 분석하고 연주한다.',{musical:14,naturalist:8}),
      opt('🌱 약초의 생장 주기를 파악하고, 가장 마나를 많이 품고 있는 시기를 기다린다.',{naturalist:14}),
      opt('💡 다양한 마법 주문을 외워, 약초가 반응하는 주문을 찾는다.',{linguistic:12,logical:4}),
      opt('🤝 주변에 있는 다른 사람들에게 도움을 요청하여, 함께 약초를 얻을 방법을 찾는다.',{interpersonal:14})
    ),
    q("어둠의 그림자", "약초를 얻고 돌아가려는데, 길목을 어둠의 그림자가 막고 있다. 그림자는 물리적인 공격이 통하지 않는다. 어떻게 그림자를 물리칠까?",
      opt('✨ 빛과 그림자의 논리적인 관계를 분석하여, 그림자가 사라지는 지점을 찾아낸다.',{logical:14,spatial:8}),
      opt('🗣️ 그림자를 향해 빛을 창조하는 마법 주문을 외운다.',{linguistic:14}),
      opt('🤸‍♀️ 그림자의 움직임을 따라다니며, 그 움직임의 패턴을 흉내내고 그림자와 하나가 된다.',{bodily:12,intrapersonal:8}),
      opt('🤝 주변 사람들과 함께 손을 잡고, 서로의 마음의 빛을 모아 그림자에 맞선다.',{interpersonal:14})
    ),
    q("천공의 도시", "그림자를 물리치자, 구름 속에 숨겨져 있던 천공의 도시가 나타났다. 도시는 아름답지만, 도시를 이루는 건축물들이 불안정하다. 어떻게 도시를 탐험할까?",
      opt('🧭 도시의 건축물들이 공중에 떠 있는 원리를 파악하고, 가장 안전한 길을 계산한다.',{logical:14,spatial:10}),
      opt('🎵 도시에서 들려오는 미세한 바람 소리나 건축물의 마찰음을 통해, 무너지기 쉬운 부분을 예측한다.',{musical:14,naturalist:6}),
      opt('💬 도시의 주민들과 대화하며, 도시의 역사와 안전한 길에 대한 정보를 얻는다.',{interpersonal:12}),
      opt('🧘‍♀️ 도시의 에너지를 느끼며, 가장 안전하고 편안한 길을 직관적으로 선택한다.',{intrapersonal:14,bodily:6})
    ),
    q("현자의 시험", "천공의 도시 최상층에는 현자가 기다리고 있다. 그는 당신에게 마지막 시험을 낸다. '만물에 생명을 불어넣는 마법의 주문을 외우라.' 당신은 무엇을 할 것인가?",
      opt('✍️ 자연에 대한 깊은 이해를 바탕으로, 자연의 순환과 질서를 담은 주문을 만든다.',{naturalist:16,linguistic:10}),
      opt('🎼 주문이 아니라, 생명의 율동을 담은 아름다운 음악을 연주한다.',{musical:16,intrapersonal:8}),
      opt('👥 모든 존재가 연결되어 있다는 것을 보여주기 위해, 사람들과 함께 손을 잡고 노래를 부른다.',{interpersonal:16}),
      opt('🧘‍♀️ 깊은 명상에 빠져, 내면의 생명력을 찾아 주문으로 형상화한다.',{intrapersonal:16,logical:8})
    ),
    q("마...
  ],
  // 퀘스트 데이터 추가
};


/* ====== 게임 로직 ====== */
const mapNamesForStats = {
    linguistic: '언어',
    logical: '논리',
    spatial: '공간',
    bodily: '신체',
    musical: '음악',
    interpersonal: '대인관계',
    intrapersonal: '자기이해',
    naturalist: '자연'
};

function checkStartButton() {
    const isReady = el('input-name').value && el('input-class').value && player.companion;
    el('btn-start').disabled = !isReady;
}

function selectCompanion(id) {
    const chars = document.querySelectorAll('.char');
    chars.forEach(char => char.classList.remove('selected'));
    document.querySelector(`.char[data-id="${id}"]`).classList.add('selected');
    player.companion = id;
    checkStartButton(); // 동료 선택 시 버튼 상태 확인
}

function startGame() {
    player.name = el('input-name').value;
    player.class = el('input-class').value;
    questLine = quests[player.companion];
    currentQuestIndex = 0;
    scores = {
        linguistic: 0,
        logical: 0,
        spatial: 0,
        bodily: 0,
        musical: 0,
        interpersonal: 0,
        intrapersonal: 0,
        naturalist: 0
    };

    el('pre-game').style.display = 'none';
    el('game-area').style.display = 'block';
    el('stats-panel').style.display = 'block';
    el('stats').style.display = 'grid';
    
    showQuest(questLine[currentQuestIndex]);
    updateStats();
}

function showQuest(q) {
    el('quest-title').textContent = q.title;
    el('quest-text').textContent = q.text;
    const optionsRoot = el('options');
    optionsRoot.innerHTML = '';
    
    q.options.forEach(option => {
        const optionEl = document.createElement('div');
        optionEl.className = 'option';
        optionEl.innerHTML = `<span class="label">${option.t}</span>`;
        optionEl.addEventListener('click', () => selectOption(option));
        optionsRoot.appendChild(optionEl);
    });
    
    sounds.turn.play().catch(e => console.log("SFX 재생이 차단되었습니다."));
}

function selectOption(option) {
    for (const key in option.e) {
        scores[key] = (scores[key] || 0) + option.e[key];
    }
    updateStats();
    
    currentQuestIndex++;
    if (currentQuestIndex < questLine.length) {
        showQuest(questLine[currentQuestIndex]);
    } else {
        showResult();
    }
}

function updateStats() {
    const root = el('stats');
    root.innerHTML = '';
    
    Object.keys(scores).forEach(k => {
        const score = scores[k] || 0;
        const box = document.createElement('div');
        box.className = 'stat';
        box.innerHTML = `
            <div style="font-weight:bold;color:var(--gold)">${mapNamesForStats[k]}</div>
            <div class="bar"><div class="bar-inner" style="width:${score}%;background-color:var(--gold)"></div></div>
        `;
        root.appendChild(box);
    });
}

function showResult() {
    el('game-area').style.display = 'none';
    el('stats-panel').style.display = 'none';
    el('result-area').style.display = 'block';

    const entries = Object.entries(scores).sort((a,b)=>b[1]-a[1]);
    const top1 = entries[0][0];
    const top2 = entries[1][0];
    
    const resultHTML = `
        <h3>📜 모험의 결과</h3>
        <p><strong>${player.name}</strong>(${player.class})님은<br><strong>${mapNames[top1]}</strong>와 <strong>${mapNames[top2]}</strong>을(를) 기반으로 하는 능력이 뛰어납니다. 
        <br>고대의 부름에 응답하여 당신이 찾아낸 능력은<br>
        <br><strong>1위: ${mapNames[top1]}</strong><br>
        <strong>2위: ${mapNames[top2]}</strong><br>
        <br>당신의 여정은 이제 시작입니다. 이 결과를 바탕으로 당신의 강점을 더욱 발전시켜 보세요!</p>
    `;
    el('result-content').innerHTML = resultHTML;
}

function restartGame() {
    el('pre-game').style.display = 'block';
    el('game-area').style.display = 'none';
    el('stats-panel').style.display = 'none';
    el('result-area').style.display = 'none';
    el('input-name').value = '';
    el('input-class').value = '';
    document.querySelectorAll('.char').forEach(char => char.classList.remove('selected'));
    player.companion = null;
    checkStartButton(); // 재시작 후에도 버튼 상태 확인
}

// 이벤트 리스너
el('btn-start').addEventListener('click', startGame);
el('btn-restart').addEventListener('click', restartGame);

// 이름, 소속 입력 시 버튼 상태 확인
el('input-name').addEventListener('input', checkStartButton);
el('input-class').addEventListener('input', checkStartButton);

// 동료 선택 시 버튼 상태 확인
document.querySelectorAll('.char').forEach(char => {
    char.addEventListener('click', (e) => {
        const id = e.currentTarget.getAttribute('data-id');
        selectCompanion(id);
    });
});
</script>
</body>
</html>
